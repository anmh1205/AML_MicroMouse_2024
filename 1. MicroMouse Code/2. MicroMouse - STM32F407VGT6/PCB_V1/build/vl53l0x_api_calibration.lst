ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"vl53l0x_api_calibration.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.VL53L0X_perform_xtalk_calibration,"ax",%progbits
  18              		.align	1
  19              		.global	VL53L0X_perform_xtalk_calibration
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	VL53L0X_perform_xtalk_calibration:
  27              	.LVL0:
  28              	.LFB133:
  29              		.file 1 "Core/Src/vl53l0x_api_calibration.c"
   1:Core/Src/vl53l0x_api_calibration.c **** /*******************************************************************************
   2:Core/Src/vl53l0x_api_calibration.c ****  Copyright © 2016, STMicroelectronics International N.V.
   3:Core/Src/vl53l0x_api_calibration.c ****  All rights reserved.
   4:Core/Src/vl53l0x_api_calibration.c **** 
   5:Core/Src/vl53l0x_api_calibration.c ****  Redistribution and use in source and binary forms, with or without
   6:Core/Src/vl53l0x_api_calibration.c ****  modification, are permitted provided that the following conditions are met:
   7:Core/Src/vl53l0x_api_calibration.c ****  * Redistributions of source code must retain the above copyright
   8:Core/Src/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer.
   9:Core/Src/vl53l0x_api_calibration.c ****  * Redistributions in binary form must reproduce the above copyright
  10:Core/Src/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer in the
  11:Core/Src/vl53l0x_api_calibration.c ****  documentation and/or other materials provided with the distribution.
  12:Core/Src/vl53l0x_api_calibration.c ****  * Neither the name of STMicroelectronics nor the
  13:Core/Src/vl53l0x_api_calibration.c ****  names of its contributors may be used to endorse or promote products
  14:Core/Src/vl53l0x_api_calibration.c ****  derived from this software without specific prior written permission.
  15:Core/Src/vl53l0x_api_calibration.c **** 
  16:Core/Src/vl53l0x_api_calibration.c ****  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
  17:Core/Src/vl53l0x_api_calibration.c ****  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  18:Core/Src/vl53l0x_api_calibration.c ****  WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND
  19:Core/Src/vl53l0x_api_calibration.c ****  NON-INFRINGEMENT OF INTELLECTUAL PROPERTY RIGHTS ARE DISCLAIMED.
  20:Core/Src/vl53l0x_api_calibration.c ****  IN NO EVENT SHALL STMICROELECTRONICS INTERNATIONAL N.V. BE LIABLE FOR ANY
  21:Core/Src/vl53l0x_api_calibration.c ****  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  22:Core/Src/vl53l0x_api_calibration.c ****  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  23:Core/Src/vl53l0x_api_calibration.c ****  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  24:Core/Src/vl53l0x_api_calibration.c ****  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  25:Core/Src/vl53l0x_api_calibration.c ****  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  26:Core/Src/vl53l0x_api_calibration.c ****  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  27:Core/Src/vl53l0x_api_calibration.c ****  ******************************************************************************/
  28:Core/Src/vl53l0x_api_calibration.c **** 
  29:Core/Src/vl53l0x_api_calibration.c **** #include "vl53l0x_api.h"
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 2


  30:Core/Src/vl53l0x_api_calibration.c **** #include "vl53l0x_api_core.h"
  31:Core/Src/vl53l0x_api_calibration.c **** #include "vl53l0x_api_calibration.h"
  32:Core/Src/vl53l0x_api_calibration.c **** 
  33:Core/Src/vl53l0x_api_calibration.c **** #ifndef __KERNEL__
  34:Core/Src/vl53l0x_api_calibration.c **** #include <stdlib.h>
  35:Core/Src/vl53l0x_api_calibration.c **** #endif
  36:Core/Src/vl53l0x_api_calibration.c **** 
  37:Core/Src/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_START(fmt, ...) \
  38:Core/Src/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_START(TRACE_MODULE_API, fmt, ##__VA_ARGS__)
  39:Core/Src/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END(status, ...) \
  40:Core/Src/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END(TRACE_MODULE_API, status, ##__VA_ARGS__)
  41:Core/Src/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END_FMT(status, fmt, ...) \
  42:Core/Src/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END_FMT(TRACE_MODULE_API, status, fmt, ##__VA_ARGS__)
  43:Core/Src/vl53l0x_api_calibration.c **** 
  44:Core/Src/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_0  0
  45:Core/Src/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_5  5
  46:Core/Src/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_10 10
  47:Core/Src/vl53l0x_api_calibration.c **** 
  48:Core/Src/vl53l0x_api_calibration.c **** uint32_t refArrayQuadrants[4] = {REF_ARRAY_SPAD_10, REF_ARRAY_SPAD_5,
  49:Core/Src/vl53l0x_api_calibration.c **** 		REF_ARRAY_SPAD_0, REF_ARRAY_SPAD_5 };
  50:Core/Src/vl53l0x_api_calibration.c **** 
  51:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_xtalk_calibration(VL53L0X_DEV Dev,
  52:Core/Src/vl53l0x_api_calibration.c **** 			FixPoint1616_t XTalkCalDistance,
  53:Core/Src/vl53l0x_api_calibration.c **** 			FixPoint1616_t *pXTalkCompensationRateMegaCps)
  54:Core/Src/vl53l0x_api_calibration.c **** {
  30              		.loc 1 54 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 32
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 54 1 is_stmt 0 view .LVU1
  35 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  36              		.cfi_def_cfa_offset 36
  37              		.cfi_offset 4, -36
  38              		.cfi_offset 5, -32
  39              		.cfi_offset 6, -28
  40              		.cfi_offset 7, -24
  41              		.cfi_offset 8, -20
  42              		.cfi_offset 9, -16
  43              		.cfi_offset 10, -12
  44              		.cfi_offset 11, -8
  45              		.cfi_offset 14, -4
  46 0004 89B0     		sub	sp, sp, #36
  47              		.cfi_def_cfa_offset 72
  48 0006 0646     		mov	r6, r0
  49 0008 9246     		mov	r10, r2
  55:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
  50              		.loc 1 55 2 is_stmt 1 view .LVU2
  51              	.LVL1:
  56:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
  52              		.loc 1 56 2 view .LVU3
  57:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  53              		.loc 1 57 2 view .LVU4
  58:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  54              		.loc 1 58 2 view .LVU5
  59:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  55              		.loc 1 59 2 view .LVU6
  60:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 3


  56              		.loc 1 60 2 view .LVU7
  61:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
  57              		.loc 1 61 2 view .LVU8
  62:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanSignalRate;
  58              		.loc 1 62 2 view .LVU9
  63:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRange;
  59              		.loc 1 63 2 view .LVU10
  64:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRtnSpads;
  60              		.loc 1 64 2 view .LVU11
  65:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t signalXTalkTotalPerSpad;
  61              		.loc 1 65 2 view .LVU12
  66:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t xTalkStoredMeanRtnSpadsAsInt;
  62              		.loc 1 66 2 view .LVU13
  67:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t xTalkCalDistanceAsInt;
  63              		.loc 1 67 2 view .LVU14
  68:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t XTalkCompensationRateMegaCps;
  64              		.loc 1 68 2 view .LVU15
  69:Core/Src/vl53l0x_api_calibration.c **** 
  70:Core/Src/vl53l0x_api_calibration.c **** 	if (XTalkCalDistance <= 0)
  65              		.loc 1 70 2 view .LVU16
  66              		.loc 1 70 5 is_stmt 0 view .LVU17
  67 000a 8B46     		mov	fp, r1
  68 000c 51BB     		cbnz	r1, .L17
  71:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
  69              		.loc 1 71 10 view .LVU18
  70 000e 6FF00303 		mvn	r3, #3
  71              	.LVL2:
  72              	.L2:
  72:Core/Src/vl53l0x_api_calibration.c **** 
  73:Core/Src/vl53l0x_api_calibration.c **** 	/* Disable the XTalk compensation */
  74:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
  75:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetXTalkCompensationEnable(Dev, 0);
  76:Core/Src/vl53l0x_api_calibration.c **** 
  77:Core/Src/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
  78:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  73              		.loc 1 78 2 is_stmt 1 view .LVU19
  74              		.loc 1 78 5 is_stmt 0 view .LVU20
  75 0012 63B3     		cbz	r3, .L18
  76              	.L3:
  79:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
  80:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
  81:Core/Src/vl53l0x_api_calibration.c **** 	}
  82:Core/Src/vl53l0x_api_calibration.c **** 
  83:Core/Src/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
  84:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  77              		.loc 1 84 2 is_stmt 1 view .LVU21
  78              		.loc 1 84 5 is_stmt 0 view .LVU22
  79 0014 002B     		cmp	r3, #0
  80 0016 4DD0     		beq	.L12
  59:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  81              		.loc 1 59 17 view .LVU23
  82 0018 0027     		movs	r7, #0
  58:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  83              		.loc 1 58 17 view .LVU24
  84 001a B946     		mov	r9, r7
  57:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  85              		.loc 1 57 11 view .LVU25
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 4


  86 001c 3D46     		mov	r5, r7
  56:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  87              		.loc 1 56 11 view .LVU26
  88 001e B846     		mov	r8, r7
  89              	.LVL3:
  90              	.L5:
  85:Core/Src/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
  86:Core/Src/vl53l0x_api_calibration.c **** 		sum_spads = 0;
  87:Core/Src/vl53l0x_api_calibration.c **** 		sum_signalRate = 0;
  88:Core/Src/vl53l0x_api_calibration.c **** 		total_count = 0;
  89:Core/Src/vl53l0x_api_calibration.c **** 		for (xtalk_meas = 0; xtalk_meas < 50; xtalk_meas++) {
  90:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
  91:Core/Src/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
  92:Core/Src/vl53l0x_api_calibration.c **** 
  93:Core/Src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
  94:Core/Src/vl53l0x_api_calibration.c **** 				break;
  95:Core/Src/vl53l0x_api_calibration.c **** 
  96:Core/Src/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
  97:Core/Src/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
  98:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
  99:Core/Src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 100:Core/Src/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 101:Core/Src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 102:Core/Src/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 103:Core/Src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 104:Core/Src/vl53l0x_api_calibration.c **** 					/ 256;
 105:Core/Src/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 106:Core/Src/vl53l0x_api_calibration.c **** 			}
 107:Core/Src/vl53l0x_api_calibration.c **** 		}
 108:Core/Src/vl53l0x_api_calibration.c **** 
 109:Core/Src/vl53l0x_api_calibration.c **** 		/* no valid values found */
 110:Core/Src/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 111:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 112:Core/Src/vl53l0x_api_calibration.c **** 
 113:Core/Src/vl53l0x_api_calibration.c **** 	}
 114:Core/Src/vl53l0x_api_calibration.c **** 
 115:Core/Src/vl53l0x_api_calibration.c **** 
 116:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  91              		.loc 1 116 2 is_stmt 1 view .LVU27
  92              		.loc 1 116 5 is_stmt 0 view .LVU28
  93 0020 002B     		cmp	r3, #0
  94 0022 5BD1     		bne	.L9
 117:Core/Src/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 118:Core/Src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanSignalRate = sum_signalRate / total_count;
  95              		.loc 1 118 3 is_stmt 1 view .LVU29
  96              		.loc 1 118 29 is_stmt 0 view .LVU30
  97 0024 B9FBF7F9 		udiv	r9, r9, r7
  98              	.LVL4:
 119:Core/Src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
  99              		.loc 1 119 3 is_stmt 1 view .LVU31
 120:Core/Src/vl53l0x_api_calibration.c **** 			sum_ranging << 16) / total_count);
 100              		.loc 1 120 16 is_stmt 0 view .LVU32
 101 0028 4FEA0848 		lsl	r8, r8, #16
 102              	.LVL5:
 119:Core/Src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 103              		.loc 1 119 24 view .LVU33
 104 002c B8FBF7F8 		udiv	r8, r8, r7
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 5


 105              	.LVL6:
 121:Core/Src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 106              		.loc 1 121 3 is_stmt 1 view .LVU34
 122:Core/Src/vl53l0x_api_calibration.c **** 			sum_spads << 16) / total_count);
 107              		.loc 1 122 14 is_stmt 0 view .LVU35
 108 0030 2D04     		lsls	r5, r5, #16
 109              	.LVL7:
 121:Core/Src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 110              		.loc 1 121 27 view .LVU36
 111 0032 B5FBF7F7 		udiv	r7, r5, r7
 112              	.LVL8:
 123:Core/Src/vl53l0x_api_calibration.c **** 
 124:Core/Src/vl53l0x_api_calibration.c **** 		/* Round Mean Spads to Whole Number.
 125:Core/Src/vl53l0x_api_calibration.c **** 		 * Typically the calculated mean SPAD count is a whole number
 126:Core/Src/vl53l0x_api_calibration.c **** 		 * or very close to a whole
 127:Core/Src/vl53l0x_api_calibration.c **** 		 * number, therefore any truncation will not result in a
 128:Core/Src/vl53l0x_api_calibration.c **** 		 * significant loss in accuracy.
 129:Core/Src/vl53l0x_api_calibration.c **** 		 * Also, for a grey target at a typical distance of around
 130:Core/Src/vl53l0x_api_calibration.c **** 		 * 400mm, around 220 SPADs will
 131:Core/Src/vl53l0x_api_calibration.c **** 		 * be enabled, therefore, any truncation will result in a loss
 132:Core/Src/vl53l0x_api_calibration.c **** 		 * of accuracy of less than
 133:Core/Src/vl53l0x_api_calibration.c **** 		 * 0.5%.
 134:Core/Src/vl53l0x_api_calibration.c **** 		 */
 135:Core/Src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpadsAsInt = (xTalkStoredMeanRtnSpads +
 113              		.loc 1 135 3 is_stmt 1 view .LVU37
 114              		.loc 1 135 59 is_stmt 0 view .LVU38
 115 0036 07F50047 		add	r7, r7, #32768
 116              	.LVL9:
 136:Core/Src/vl53l0x_api_calibration.c **** 			0x8000) >> 16;
 137:Core/Src/vl53l0x_api_calibration.c **** 
 138:Core/Src/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 139:Core/Src/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 140:Core/Src/vl53l0x_api_calibration.c **** 		 * is lost.*/
 141:Core/Src/vl53l0x_api_calibration.c **** 		 xTalkCalDistanceAsInt = (XTalkCalDistance + 0x8000) >> 16;
 117              		.loc 1 141 4 is_stmt 1 view .LVU39
 118              		.loc 1 141 46 is_stmt 0 view .LVU40
 119 003a 0BF50043 		add	r3, fp, #32768
 120              	.LVL10:
 121              		.loc 1 141 26 view .LVU41
 122 003e 1B0C     		lsrs	r3, r3, #16
 123              	.LVL11:
 142:Core/Src/vl53l0x_api_calibration.c **** 
 143:Core/Src/vl53l0x_api_calibration.c **** 		if (xTalkStoredMeanRtnSpadsAsInt == 0 ||
 124              		.loc 1 143 3 is_stmt 1 view .LVU42
 125              		.loc 1 143 6 is_stmt 0 view .LVU43
 126 0040 3F0C     		lsrs	r7, r7, #16
 127              	.LVL12:
 128              		.loc 1 143 6 view .LVU44
 129 0042 43D0     		beq	.L10
 130              		.loc 1 143 41 discriminator 1 view .LVU45
 131 0044 002B     		cmp	r3, #0
 132 0046 40D0     		beq	.L14
 144:Core/Src/vl53l0x_api_calibration.c **** 		   xTalkCalDistanceAsInt == 0 ||
 133              		.loc 1 144 33 view .LVU46
 134 0048 C345     		cmp	fp, r8
 135 004a 4BD9     		bls	.L15
 145:Core/Src/vl53l0x_api_calibration.c **** 		   xTalkStoredMeanRange >= XTalkCalDistance) {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 6


 146:Core/Src/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = 0;
 147:Core/Src/vl53l0x_api_calibration.c **** 		} else {
 148:Core/Src/vl53l0x_api_calibration.c **** 			/* Round Cal Distance to Whole Number.
 149:Core/Src/vl53l0x_api_calibration.c **** 			   Note that the cal distance is in mm, therefore no
 150:Core/Src/vl53l0x_api_calibration.c **** 			   resolution is lost.*/
 151:Core/Src/vl53l0x_api_calibration.c **** 			xTalkCalDistanceAsInt = (XTalkCalDistance +
 136              		.loc 1 151 4 is_stmt 1 view .LVU47
 152:Core/Src/vl53l0x_api_calibration.c **** 				0x8000) >> 16;
 153:Core/Src/vl53l0x_api_calibration.c **** 
 154:Core/Src/vl53l0x_api_calibration.c **** 			/* Apply division by mean spad count early in the
 155:Core/Src/vl53l0x_api_calibration.c **** 			 * calculation to keep the numbers small.
 156:Core/Src/vl53l0x_api_calibration.c **** 			 * This ensures we can maintain a 32bit calculation.
 157:Core/Src/vl53l0x_api_calibration.c **** 			 * Fixed1616 / int := Fixed1616 */
 158:Core/Src/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad = (xTalkStoredMeanSignalRate) /
 137              		.loc 1 158 4 view .LVU48
 138              		.loc 1 158 28 is_stmt 0 view .LVU49
 139 004c B9FBF7F7 		udiv	r7, r9, r7
 140              	.LVL13:
 159:Core/Src/vl53l0x_api_calibration.c **** 				xTalkStoredMeanRtnSpadsAsInt;
 160:Core/Src/vl53l0x_api_calibration.c **** 
 161:Core/Src/vl53l0x_api_calibration.c **** 			/* Complete the calculation for total Signal XTalk per
 162:Core/Src/vl53l0x_api_calibration.c **** 			 * SPAD
 163:Core/Src/vl53l0x_api_calibration.c **** 			 * Fixed1616 * (Fixed1616 - Fixed1616/int) :=
 164:Core/Src/vl53l0x_api_calibration.c **** 			 * (2^16 * Fixed1616)
 165:Core/Src/vl53l0x_api_calibration.c **** 			 */
 166:Core/Src/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad *= ((1 << 16) -
 141              		.loc 1 166 4 is_stmt 1 view .LVU50
 167:Core/Src/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 142              		.loc 1 167 27 is_stmt 0 view .LVU51
 143 0050 B8FBF3F8 		udiv	r8, r8, r3
 144              	.LVL14:
 166:Core/Src/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 145              		.loc 1 166 42 view .LVU52
 146 0054 C8F58033 		rsb	r3, r8, #65536
 147              	.LVL15:
 166:Core/Src/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 148              		.loc 1 166 28 view .LVU53
 149 0058 07FB03F7 		mul	r7, r7, r3
 150              	.LVL16:
 168:Core/Src/vl53l0x_api_calibration.c **** 
 169:Core/Src/vl53l0x_api_calibration.c **** 			/* Round from 2^16 * Fixed1616, to Fixed1616. */
 170:Core/Src/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = (signalXTalkTotalPerSpad
 151              		.loc 1 170 4 is_stmt 1 view .LVU54
 171:Core/Src/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 152              		.loc 1 171 5 is_stmt 0 view .LVU55
 153 005c 07F50047 		add	r7, r7, #32768
 154              	.LVL17:
 170:Core/Src/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 155              		.loc 1 170 33 view .LVU56
 156 0060 3F0C     		lsrs	r7, r7, #16
 157              	.LVL18:
 170:Core/Src/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 158              		.loc 1 170 33 view .LVU57
 159 0062 33E0     		b	.L10
 160              	.LVL19:
 161              	.L17:
  74:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetXTalkCompensationEnable(Dev, 0);
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 7


 162              		.loc 1 74 2 is_stmt 1 view .LVU58
  75:Core/Src/vl53l0x_api_calibration.c **** 
 163              		.loc 1 75 3 view .LVU59
  75:Core/Src/vl53l0x_api_calibration.c **** 
 164              		.loc 1 75 12 is_stmt 0 view .LVU60
 165 0064 0021     		movs	r1, #0
 166              	.LVL20:
  75:Core/Src/vl53l0x_api_calibration.c **** 
 167              		.loc 1 75 12 view .LVU61
 168 0066 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
 169              	.LVL21:
  75:Core/Src/vl53l0x_api_calibration.c **** 
 170              		.loc 1 75 12 view .LVU62
 171 006a 0346     		mov	r3, r0
 172              	.LVL22:
  75:Core/Src/vl53l0x_api_calibration.c **** 
 173              		.loc 1 75 12 view .LVU63
 174 006c D1E7     		b	.L2
 175              	.L18:
  79:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 176              		.loc 1 79 3 is_stmt 1 view .LVU64
  79:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 177              		.loc 1 79 12 is_stmt 0 view .LVU65
 178 006e 0022     		movs	r2, #0
 179 0070 0321     		movs	r1, #3
 180 0072 3046     		mov	r0, r6
 181 0074 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 182              	.LVL23:
  79:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 183              		.loc 1 79 12 view .LVU66
 184 0078 0346     		mov	r3, r0
 185              	.LVL24:
  79:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 186              		.loc 1 79 12 view .LVU67
 187 007a CBE7     		b	.L3
 188              	.LVL25:
 189              	.L7:
  89:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 190              		.loc 1 89 41 is_stmt 1 discriminator 2 view .LVU68
  89:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 191              		.loc 1 89 51 is_stmt 0 discriminator 2 view .LVU69
 192 007c 0134     		adds	r4, r4, #1
 193              	.LVL26:
  89:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 194              		.loc 1 89 51 discriminator 2 view .LVU70
 195 007e E4B2     		uxtb	r4, r4
 196              	.LVL27:
 197              	.L4:
  89:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 198              		.loc 1 89 24 is_stmt 1 discriminator 1 view .LVU71
  89:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 199              		.loc 1 89 3 is_stmt 0 discriminator 1 view .LVU72
 200 0080 312C     		cmp	r4, #49
 201 0082 1DD8     		bhi	.L6
  90:Core/Src/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
 202              		.loc 1 90 4 is_stmt 1 view .LVU73
  90:Core/Src/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 8


 203              		.loc 1 90 13 is_stmt 0 view .LVU74
 204 0084 01A9     		add	r1, sp, #4
 205 0086 3046     		mov	r0, r6
 206 0088 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 207              	.LVL28:
  93:Core/Src/vl53l0x_api_calibration.c **** 				break;
 208              		.loc 1 93 4 is_stmt 1 view .LVU75
  93:Core/Src/vl53l0x_api_calibration.c **** 				break;
 209              		.loc 1 93 7 is_stmt 0 view .LVU76
 210 008c 0346     		mov	r3, r0
 211 008e B8B9     		cbnz	r0, .L6
  97:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 212              		.loc 1 97 4 is_stmt 1 view .LVU77
  97:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 213              		.loc 1 97 30 is_stmt 0 view .LVU78
 214 0090 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
  97:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 215              		.loc 1 97 7 view .LVU79
 216 0094 002A     		cmp	r2, #0
 217 0096 F1D1     		bne	.L7
  98:Core/Src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 218              		.loc 1 98 5 is_stmt 1 view .LVU80
  99:Core/Src/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 219              		.loc 1 99 28 is_stmt 0 view .LVU81
 220 0098 BDF80C20 		ldrh	r2, [sp, #12]
  98:Core/Src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 221              		.loc 1 98 17 view .LVU82
 222 009c 9044     		add	r8, r8, r2
 223              	.LVL29:
  98:Core/Src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 224              		.loc 1 98 17 view .LVU83
 225 009e 1FFA88F8 		uxth	r8, r8
 226              	.LVL30:
 100:Core/Src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 227              		.loc 1 100 5 is_stmt 1 view .LVU84
 101:Core/Src/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 228              		.loc 1 101 27 is_stmt 0 view .LVU85
 229 00a2 049A     		ldr	r2, [sp, #16]
 100:Core/Src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 230              		.loc 1 100 20 view .LVU86
 231 00a4 9144     		add	r9, r9, r2
 232              	.LVL31:
 102:Core/Src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 233              		.loc 1 102 5 is_stmt 1 view .LVU87
 103:Core/Src/vl53l0x_api_calibration.c **** 					/ 256;
 234              		.loc 1 103 27 is_stmt 0 view .LVU88
 235 00a6 BDF81820 		ldrh	r2, [sp, #24]
 102:Core/Src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 236              		.loc 1 102 15 view .LVU89
 237 00aa 05EB1225 		add	r5, r5, r2, lsr #8
 238              	.LVL32:
 102:Core/Src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 239              		.loc 1 102 15 view .LVU90
 240 00ae ADB2     		uxth	r5, r5
 241              	.LVL33:
 105:Core/Src/vl53l0x_api_calibration.c **** 			}
 242              		.loc 1 105 5 is_stmt 1 view .LVU91
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 9


 105:Core/Src/vl53l0x_api_calibration.c **** 			}
 243              		.loc 1 105 17 is_stmt 0 view .LVU92
 244 00b0 0137     		adds	r7, r7, #1
 245              	.LVL34:
 105:Core/Src/vl53l0x_api_calibration.c **** 			}
 246              		.loc 1 105 17 view .LVU93
 247 00b2 E3E7     		b	.L7
 248              	.LVL35:
 249              	.L12:
  89:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 250              		.loc 1 89 19 view .LVU94
 251 00b4 0024     		movs	r4, #0
  88:Core/Src/vl53l0x_api_calibration.c **** 		for (xtalk_meas = 0; xtalk_meas < 50; xtalk_meas++) {
 252              		.loc 1 88 15 view .LVU95
 253 00b6 2746     		mov	r7, r4
  87:Core/Src/vl53l0x_api_calibration.c **** 		total_count = 0;
 254              		.loc 1 87 18 view .LVU96
 255 00b8 A146     		mov	r9, r4
  86:Core/Src/vl53l0x_api_calibration.c **** 		sum_signalRate = 0;
 256              		.loc 1 86 13 view .LVU97
 257 00ba 2546     		mov	r5, r4
  85:Core/Src/vl53l0x_api_calibration.c **** 		sum_spads = 0;
 258              		.loc 1 85 15 view .LVU98
 259 00bc A046     		mov	r8, r4
 260 00be DFE7     		b	.L4
 261              	.LVL36:
 262              	.L6:
 110:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 263              		.loc 1 110 3 is_stmt 1 view .LVU99
 110:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 264              		.loc 1 110 6 is_stmt 0 view .LVU100
 265 00c0 002F     		cmp	r7, #0
 266 00c2 ADD1     		bne	.L5
 111:Core/Src/vl53l0x_api_calibration.c **** 
 267              		.loc 1 111 11 view .LVU101
 268 00c4 6FF00503 		mvn	r3, #5
 269              	.LVL37:
 111:Core/Src/vl53l0x_api_calibration.c **** 
 270              		.loc 1 111 11 view .LVU102
 271 00c8 AAE7     		b	.L5
 272              	.LVL38:
 273              	.L14:
 146:Core/Src/vl53l0x_api_calibration.c **** 		} else {
 274              		.loc 1 146 33 view .LVU103
 275 00ca 1F46     		mov	r7, r3
 276              	.LVL39:
 277              	.L10:
 172:Core/Src/vl53l0x_api_calibration.c **** 		}
 173:Core/Src/vl53l0x_api_calibration.c **** 
 174:Core/Src/vl53l0x_api_calibration.c **** 		*pXTalkCompensationRateMegaCps = XTalkCompensationRateMegaCps;
 278              		.loc 1 174 3 is_stmt 1 view .LVU104
 279              		.loc 1 174 34 is_stmt 0 view .LVU105
 280 00cc CAF80070 		str	r7, [r10]
 175:Core/Src/vl53l0x_api_calibration.c **** 
 176:Core/Src/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 177:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 281              		.loc 1 177 3 is_stmt 1 view .LVU106
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 10


 178:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationEnable(Dev, 1);
 282              		.loc 1 178 4 view .LVU107
 283              		.loc 1 178 13 is_stmt 0 view .LVU108
 284 00d0 0121     		movs	r1, #1
 285 00d2 3046     		mov	r0, r6
 286 00d4 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
 287              	.LVL40:
 179:Core/Src/vl53l0x_api_calibration.c **** 
 180:Core/Src/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 181:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 288              		.loc 1 181 3 is_stmt 1 view .LVU109
 289              		.loc 1 181 6 is_stmt 0 view .LVU110
 290 00d8 0346     		mov	r3, r0
 291 00da 28B1     		cbz	r0, .L19
 292              	.LVL41:
 293              	.L9:
 182:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 183:Core/Src/vl53l0x_api_calibration.c **** 					XTalkCompensationRateMegaCps);
 184:Core/Src/vl53l0x_api_calibration.c **** 
 185:Core/Src/vl53l0x_api_calibration.c **** 	}
 186:Core/Src/vl53l0x_api_calibration.c **** 
 187:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 294              		.loc 1 187 2 is_stmt 1 view .LVU111
 188:Core/Src/vl53l0x_api_calibration.c **** }
 295              		.loc 1 188 1 is_stmt 0 view .LVU112
 296 00dc 1846     		mov	r0, r3
 297 00de 09B0     		add	sp, sp, #36
 298              		.cfi_remember_state
 299              		.cfi_def_cfa_offset 36
 300              		@ sp needed
 301 00e0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 302              	.LVL42:
 303              	.L15:
 304              		.cfi_restore_state
 146:Core/Src/vl53l0x_api_calibration.c **** 		} else {
 305              		.loc 1 146 33 view .LVU113
 306 00e4 0027     		movs	r7, #0
 307              	.LVL43:
 146:Core/Src/vl53l0x_api_calibration.c **** 		} else {
 308              		.loc 1 146 33 view .LVU114
 309 00e6 F1E7     		b	.L10
 310              	.LVL44:
 311              	.L19:
 182:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 312              		.loc 1 182 4 is_stmt 1 view .LVU115
 182:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 313              		.loc 1 182 13 is_stmt 0 view .LVU116
 314 00e8 3946     		mov	r1, r7
 315 00ea 3046     		mov	r0, r6
 316              	.LVL45:
 182:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 317              		.loc 1 182 13 view .LVU117
 318 00ec FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationRateMegaCps
 319              	.LVL46:
 320 00f0 0346     		mov	r3, r0
 321              	.LVL47:
 182:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 11


 322              		.loc 1 182 13 view .LVU118
 323 00f2 F3E7     		b	.L9
 324              		.cfi_endproc
 325              	.LFE133:
 327              		.section	.text.VL53L0X_perform_offset_calibration,"ax",%progbits
 328              		.align	1
 329              		.global	VL53L0X_perform_offset_calibration
 330              		.syntax unified
 331              		.thumb
 332              		.thumb_func
 333              		.fpu fpv4-sp-d16
 335              	VL53L0X_perform_offset_calibration:
 336              	.LVL48:
 337              	.LFB134:
 189:Core/Src/vl53l0x_api_calibration.c **** 
 190:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_offset_calibration(VL53L0X_DEV Dev,
 191:Core/Src/vl53l0x_api_calibration.c **** 			FixPoint1616_t CalDistanceMilliMeter,
 192:Core/Src/vl53l0x_api_calibration.c **** 			int32_t *pOffsetMicroMeter)
 193:Core/Src/vl53l0x_api_calibration.c **** {
 338              		.loc 1 193 1 is_stmt 1 view -0
 339              		.cfi_startproc
 340              		@ args = 0, pretend = 0, frame = 32
 341              		@ frame_needed = 0, uses_anonymous_args = 0
 342              		.loc 1 193 1 is_stmt 0 view .LVU120
 343 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 344              		.cfi_def_cfa_offset 28
 345              		.cfi_offset 4, -28
 346              		.cfi_offset 5, -24
 347              		.cfi_offset 6, -20
 348              		.cfi_offset 7, -16
 349              		.cfi_offset 8, -12
 350              		.cfi_offset 9, -8
 351              		.cfi_offset 14, -4
 352 0004 89B0     		sub	sp, sp, #36
 353              		.cfi_def_cfa_offset 64
 354 0006 0546     		mov	r5, r0
 355 0008 1646     		mov	r6, r2
 194:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 356              		.loc 1 194 2 is_stmt 1 view .LVU121
 357              	.LVL49:
 195:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
 358              		.loc 1 195 2 view .LVU122
 196:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 359              		.loc 1 196 2 view .LVU123
 197:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 360              		.loc 1 197 2 view .LVU124
 198:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t StoredMeanRange;
 361              		.loc 1 198 2 view .LVU125
 199:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t StoredMeanRangeAsInt;
 362              		.loc 1 199 2 view .LVU126
 200:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t CalDistanceAsInt_mm;
 363              		.loc 1 200 2 view .LVU127
 201:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t SequenceStepEnabled;
 364              		.loc 1 201 2 view .LVU128
 202:Core/Src/vl53l0x_api_calibration.c **** 	int meas = 0;
 365              		.loc 1 202 2 view .LVU129
 203:Core/Src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 12


 204:Core/Src/vl53l0x_api_calibration.c **** 	if (CalDistanceMilliMeter <= 0)
 366              		.loc 1 204 2 view .LVU130
 367              		.loc 1 204 5 is_stmt 0 view .LVU131
 368 000a 0F46     		mov	r7, r1
 369 000c A1B9     		cbnz	r1, .L36
 205:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
 370              		.loc 1 205 10 view .LVU132
 371 000e 6FF00303 		mvn	r3, #3
 372              	.LVL50:
 373              	.L21:
 206:Core/Src/vl53l0x_api_calibration.c **** 
 207:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 208:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev, 0);
 209:Core/Src/vl53l0x_api_calibration.c **** 
 210:Core/Src/vl53l0x_api_calibration.c **** 
 211:Core/Src/vl53l0x_api_calibration.c **** 	/* Get the value of the TCC */
 212:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 374              		.loc 1 212 2 is_stmt 1 view .LVU133
 375              		.loc 1 212 5 is_stmt 0 view .LVU134
 376 0012 B3B1     		cbz	r3, .L37
 377              	.L22:
 213:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetSequenceStepEnable(Dev,
 214:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 215:Core/Src/vl53l0x_api_calibration.c **** 
 216:Core/Src/vl53l0x_api_calibration.c **** 
 217:Core/Src/vl53l0x_api_calibration.c **** 	/* Disable the TCC */
 218:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 378              		.loc 1 218 2 is_stmt 1 view .LVU135
 379              		.loc 1 218 5 is_stmt 0 view .LVU136
 380 0014 EBB1     		cbz	r3, .L38
 381              	.L23:
 219:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetSequenceStepEnable(Dev,
 220:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 221:Core/Src/vl53l0x_api_calibration.c **** 
 222:Core/Src/vl53l0x_api_calibration.c **** 
 223:Core/Src/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
 224:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 382              		.loc 1 224 2 is_stmt 1 view .LVU137
 383              		.loc 1 224 5 is_stmt 0 view .LVU138
 384 0016 1BB3     		cbz	r3, .L39
 385              	.L24:
 225:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
 226:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 227:Core/Src/vl53l0x_api_calibration.c **** 
 228:Core/Src/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
 229:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 386              		.loc 1 229 2 is_stmt 1 view .LVU139
 387              		.loc 1 229 5 is_stmt 0 view .LVU140
 388 0018 002B     		cmp	r3, #0
 389 001a 3DD0     		beq	.L33
 196:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 390              		.loc 1 196 17 view .LVU141
 391 001c 4FF00008 		mov	r8, #0
 195:Core/Src/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 392              		.loc 1 195 11 view .LVU142
 393 0020 C146     		mov	r9, r8
 394              	.LVL51:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 13


 395              	.L26:
 230:Core/Src/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
 231:Core/Src/vl53l0x_api_calibration.c **** 		total_count = 0;
 232:Core/Src/vl53l0x_api_calibration.c **** 		for (meas = 0; meas < 50; meas++) {
 233:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 234:Core/Src/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
 235:Core/Src/vl53l0x_api_calibration.c **** 
 236:Core/Src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 237:Core/Src/vl53l0x_api_calibration.c **** 				break;
 238:Core/Src/vl53l0x_api_calibration.c **** 
 239:Core/Src/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
 240:Core/Src/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 241:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 242:Core/Src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 243:Core/Src/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 244:Core/Src/vl53l0x_api_calibration.c **** 			}
 245:Core/Src/vl53l0x_api_calibration.c **** 		}
 246:Core/Src/vl53l0x_api_calibration.c **** 
 247:Core/Src/vl53l0x_api_calibration.c **** 		/* no valid values found */
 248:Core/Src/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 249:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 250:Core/Src/vl53l0x_api_calibration.c **** 	}
 251:Core/Src/vl53l0x_api_calibration.c **** 
 252:Core/Src/vl53l0x_api_calibration.c **** 
 253:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 396              		.loc 1 253 2 is_stmt 1 view .LVU143
 397              		.loc 1 253 5 is_stmt 0 view .LVU144
 398 0022 002B     		cmp	r3, #0
 399 0024 42D0     		beq	.L40
 400              	.LVL52:
 401              	.L30:
 254:Core/Src/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 255:Core/Src/vl53l0x_api_calibration.c **** 		StoredMeanRange = (FixPoint1616_t)((uint32_t)(sum_ranging << 16)
 256:Core/Src/vl53l0x_api_calibration.c **** 			/ total_count);
 257:Core/Src/vl53l0x_api_calibration.c **** 
 258:Core/Src/vl53l0x_api_calibration.c **** 		StoredMeanRangeAsInt = (StoredMeanRange + 0x8000) >> 16;
 259:Core/Src/vl53l0x_api_calibration.c **** 
 260:Core/Src/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 261:Core/Src/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 262:Core/Src/vl53l0x_api_calibration.c **** 		 * is lost.*/
 263:Core/Src/vl53l0x_api_calibration.c **** 		 CalDistanceAsInt_mm = (CalDistanceMilliMeter + 0x8000) >> 16;
 264:Core/Src/vl53l0x_api_calibration.c **** 
 265:Core/Src/vl53l0x_api_calibration.c **** 		 *pOffsetMicroMeter = (CalDistanceAsInt_mm -
 266:Core/Src/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 267:Core/Src/vl53l0x_api_calibration.c **** 
 268:Core/Src/vl53l0x_api_calibration.c **** 		/* Apply the calculated offset */
 269:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 270:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 271:Core/Src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 272:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 273:Core/Src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 274:Core/Src/vl53l0x_api_calibration.c **** 		}
 275:Core/Src/vl53l0x_api_calibration.c **** 
 276:Core/Src/vl53l0x_api_calibration.c **** 	}
 277:Core/Src/vl53l0x_api_calibration.c **** 
 278:Core/Src/vl53l0x_api_calibration.c **** 	/* Restore the TCC */
 279:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 14


 402              		.loc 1 279 2 is_stmt 1 view .LVU145
 403              		.loc 1 279 5 is_stmt 0 view .LVU146
 404 0026 1BB9     		cbnz	r3, .L31
 280:Core/Src/vl53l0x_api_calibration.c **** 		if (SequenceStepEnabled != 0)
 405              		.loc 1 280 3 is_stmt 1 view .LVU147
 406              		.loc 1 280 27 is_stmt 0 view .LVU148
 407 0028 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 408              		.loc 1 280 6 view .LVU149
 409 002c 002A     		cmp	r2, #0
 410 002e 53D1     		bne	.L41
 411              	.L31:
 281:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetSequenceStepEnable(Dev,
 282:Core/Src/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 283:Core/Src/vl53l0x_api_calibration.c **** 	}
 284:Core/Src/vl53l0x_api_calibration.c **** 
 285:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 412              		.loc 1 285 2 is_stmt 1 view .LVU150
 286:Core/Src/vl53l0x_api_calibration.c **** }
 413              		.loc 1 286 1 is_stmt 0 view .LVU151
 414 0030 1846     		mov	r0, r3
 415 0032 09B0     		add	sp, sp, #36
 416              		.cfi_remember_state
 417              		.cfi_def_cfa_offset 28
 418              		@ sp needed
 419 0034 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 420              	.LVL53:
 421              	.L36:
 422              		.cfi_restore_state
 207:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev, 0);
 423              		.loc 1 207 2 is_stmt 1 view .LVU152
 208:Core/Src/vl53l0x_api_calibration.c **** 
 424              		.loc 1 208 3 view .LVU153
 208:Core/Src/vl53l0x_api_calibration.c **** 
 425              		.loc 1 208 12 is_stmt 0 view .LVU154
 426 0038 0021     		movs	r1, #0
 427              	.LVL54:
 208:Core/Src/vl53l0x_api_calibration.c **** 
 428              		.loc 1 208 12 view .LVU155
 429 003a FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 430              	.LVL55:
 208:Core/Src/vl53l0x_api_calibration.c **** 
 431              		.loc 1 208 12 view .LVU156
 432 003e 0346     		mov	r3, r0
 433              	.LVL56:
 208:Core/Src/vl53l0x_api_calibration.c **** 
 434              		.loc 1 208 12 view .LVU157
 435 0040 E7E7     		b	.L21
 436              	.L37:
 213:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 437              		.loc 1 213 3 is_stmt 1 view .LVU158
 213:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 438              		.loc 1 213 12 is_stmt 0 view .LVU159
 439 0042 0DF10302 		add	r2, sp, #3
 440 0046 0021     		movs	r1, #0
 441 0048 2846     		mov	r0, r5
 442 004a FFF7FEFF 		bl	VL53L0X_GetSequenceStepEnable
 443              	.LVL57:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 15


 213:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 444              		.loc 1 213 12 view .LVU160
 445 004e 0346     		mov	r3, r0
 446              	.LVL58:
 213:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 447              		.loc 1 213 12 view .LVU161
 448 0050 E0E7     		b	.L22
 449              	.L38:
 219:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 450              		.loc 1 219 3 is_stmt 1 view .LVU162
 219:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 451              		.loc 1 219 12 is_stmt 0 view .LVU163
 452 0052 0022     		movs	r2, #0
 453 0054 1146     		mov	r1, r2
 454 0056 2846     		mov	r0, r5
 455 0058 FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 456              	.LVL59:
 219:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 457              		.loc 1 219 12 view .LVU164
 458 005c 0346     		mov	r3, r0
 459              	.LVL60:
 219:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 460              		.loc 1 219 12 view .LVU165
 461 005e DAE7     		b	.L23
 462              	.L39:
 225:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 463              		.loc 1 225 3 is_stmt 1 view .LVU166
 225:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 464              		.loc 1 225 12 is_stmt 0 view .LVU167
 465 0060 0022     		movs	r2, #0
 466 0062 0321     		movs	r1, #3
 467 0064 2846     		mov	r0, r5
 468 0066 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 469              	.LVL61:
 225:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 470              		.loc 1 225 12 view .LVU168
 471 006a 0346     		mov	r3, r0
 472              	.LVL62:
 225:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 473              		.loc 1 225 12 view .LVU169
 474 006c D4E7     		b	.L24
 475              	.LVL63:
 476              	.L28:
 232:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 477              		.loc 1 232 29 is_stmt 1 discriminator 2 view .LVU170
 232:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 478              		.loc 1 232 33 is_stmt 0 discriminator 2 view .LVU171
 479 006e 0134     		adds	r4, r4, #1
 480              	.LVL64:
 481              	.L25:
 232:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 482              		.loc 1 232 18 is_stmt 1 discriminator 1 view .LVU172
 232:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 483              		.loc 1 232 3 is_stmt 0 discriminator 1 view .LVU173
 484 0070 312C     		cmp	r4, #49
 485 0072 15DC     		bgt	.L27
 233:Core/Src/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 16


 486              		.loc 1 233 4 is_stmt 1 view .LVU174
 233:Core/Src/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
 487              		.loc 1 233 13 is_stmt 0 view .LVU175
 488 0074 01A9     		add	r1, sp, #4
 489 0076 2846     		mov	r0, r5
 490 0078 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 491              	.LVL65:
 236:Core/Src/vl53l0x_api_calibration.c **** 				break;
 492              		.loc 1 236 4 is_stmt 1 view .LVU176
 236:Core/Src/vl53l0x_api_calibration.c **** 				break;
 493              		.loc 1 236 7 is_stmt 0 view .LVU177
 494 007c 0346     		mov	r3, r0
 495 007e 78B9     		cbnz	r0, .L27
 240:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 496              		.loc 1 240 4 is_stmt 1 view .LVU178
 240:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 497              		.loc 1 240 30 is_stmt 0 view .LVU179
 498 0080 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 240:Core/Src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 499              		.loc 1 240 7 view .LVU180
 500 0084 002A     		cmp	r2, #0
 501 0086 F2D1     		bne	.L28
 241:Core/Src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 502              		.loc 1 241 5 is_stmt 1 view .LVU181
 242:Core/Src/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 503              		.loc 1 242 28 is_stmt 0 view .LVU182
 504 0088 BDF80C20 		ldrh	r2, [sp, #12]
 241:Core/Src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 505              		.loc 1 241 17 view .LVU183
 506 008c 4A44     		add	r2, r2, r9
 507 008e 1FFA82F9 		uxth	r9, r2
 508              	.LVL66:
 243:Core/Src/vl53l0x_api_calibration.c **** 			}
 509              		.loc 1 243 5 is_stmt 1 view .LVU184
 243:Core/Src/vl53l0x_api_calibration.c **** 			}
 510              		.loc 1 243 17 is_stmt 0 view .LVU185
 511 0092 08F10108 		add	r8, r8, #1
 512              	.LVL67:
 243:Core/Src/vl53l0x_api_calibration.c **** 			}
 513              		.loc 1 243 17 view .LVU186
 514 0096 EAE7     		b	.L28
 515              	.LVL68:
 516              	.L33:
 232:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 517              		.loc 1 232 13 view .LVU187
 518 0098 0024     		movs	r4, #0
 231:Core/Src/vl53l0x_api_calibration.c **** 		for (meas = 0; meas < 50; meas++) {
 519              		.loc 1 231 15 view .LVU188
 520 009a A046     		mov	r8, r4
 230:Core/Src/vl53l0x_api_calibration.c **** 		total_count = 0;
 521              		.loc 1 230 15 view .LVU189
 522 009c A146     		mov	r9, r4
 523 009e E7E7     		b	.L25
 524              	.LVL69:
 525              	.L27:
 248:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 526              		.loc 1 248 3 is_stmt 1 view .LVU190
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 17


 248:Core/Src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 527              		.loc 1 248 6 is_stmt 0 view .LVU191
 528 00a0 B8F1000F 		cmp	r8, #0
 529 00a4 BDD1     		bne	.L26
 249:Core/Src/vl53l0x_api_calibration.c **** 	}
 530              		.loc 1 249 11 view .LVU192
 531 00a6 6FF00503 		mvn	r3, #5
 532              	.LVL70:
 249:Core/Src/vl53l0x_api_calibration.c **** 	}
 533              		.loc 1 249 11 view .LVU193
 534 00aa BAE7     		b	.L26
 535              	.LVL71:
 536              	.L40:
 255:Core/Src/vl53l0x_api_calibration.c **** 			/ total_count);
 537              		.loc 1 255 3 is_stmt 1 view .LVU194
 255:Core/Src/vl53l0x_api_calibration.c **** 			/ total_count);
 538              		.loc 1 255 61 is_stmt 0 view .LVU195
 539 00ac 4FEA0942 		lsl	r2, r9, #16
 255:Core/Src/vl53l0x_api_calibration.c **** 			/ total_count);
 540              		.loc 1 255 19 view .LVU196
 541 00b0 B2FBF8F8 		udiv	r8, r2, r8
 542              	.LVL72:
 258:Core/Src/vl53l0x_api_calibration.c **** 
 543              		.loc 1 258 3 is_stmt 1 view .LVU197
 258:Core/Src/vl53l0x_api_calibration.c **** 
 544              		.loc 1 258 43 is_stmt 0 view .LVU198
 545 00b4 08F50048 		add	r8, r8, #32768
 546              	.LVL73:
 263:Core/Src/vl53l0x_api_calibration.c **** 
 547              		.loc 1 263 4 is_stmt 1 view .LVU199
 263:Core/Src/vl53l0x_api_calibration.c **** 
 548              		.loc 1 263 49 is_stmt 0 view .LVU200
 549 00b8 07F50047 		add	r7, r7, #32768
 550              	.LVL74:
 263:Core/Src/vl53l0x_api_calibration.c **** 
 551              		.loc 1 263 24 view .LVU201
 552 00bc 390C     		lsrs	r1, r7, #16
 553              	.LVL75:
 265:Core/Src/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 554              		.loc 1 265 4 is_stmt 1 view .LVU202
 265:Core/Src/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 555              		.loc 1 265 46 is_stmt 0 view .LVU203
 556 00be A1EB1848 		sub	r8, r1, r8, lsr #16
 557              	.LVL76:
 266:Core/Src/vl53l0x_api_calibration.c **** 
 558              		.loc 1 266 28 view .LVU204
 559 00c2 4FF47A71 		mov	r1, #1000
 560              	.LVL77:
 266:Core/Src/vl53l0x_api_calibration.c **** 
 561              		.loc 1 266 28 view .LVU205
 562 00c6 01FB08F1 		mul	r1, r1, r8
 265:Core/Src/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 563              		.loc 1 265 23 view .LVU206
 564 00ca 3160     		str	r1, [r6]
 269:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 565              		.loc 1 269 3 is_stmt 1 view .LVU207
 270:Core/Src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 18


 566              		.loc 1 270 4 view .LVU208
 567 00cc 6962     		str	r1, [r5, #36]
 272:Core/Src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 568              		.loc 1 272 4 view .LVU209
 272:Core/Src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 569              		.loc 1 272 13 is_stmt 0 view .LVU210
 570 00ce 2846     		mov	r0, r5
 571 00d0 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 572              	.LVL78:
 272:Core/Src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 573              		.loc 1 272 13 view .LVU211
 574 00d4 0346     		mov	r3, r0
 575              	.LVL79:
 272:Core/Src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 576              		.loc 1 272 13 view .LVU212
 577 00d6 A6E7     		b	.L30
 578              	.LVL80:
 579              	.L41:
 281:Core/Src/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 580              		.loc 1 281 4 is_stmt 1 view .LVU213
 281:Core/Src/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 581              		.loc 1 281 13 is_stmt 0 view .LVU214
 582 00d8 0122     		movs	r2, #1
 583 00da 0021     		movs	r1, #0
 584 00dc 2846     		mov	r0, r5
 585 00de FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 586              	.LVL81:
 281:Core/Src/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 587              		.loc 1 281 13 view .LVU215
 588 00e2 0346     		mov	r3, r0
 589              	.LVL82:
 281:Core/Src/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 590              		.loc 1 281 13 view .LVU216
 591 00e4 A4E7     		b	.L31
 592              		.cfi_endproc
 593              	.LFE134:
 595              		.section	.text.VL53L0X_set_offset_calibration_data_micro_meter,"ax",%progbits
 596              		.align	1
 597              		.global	VL53L0X_set_offset_calibration_data_micro_meter
 598              		.syntax unified
 599              		.thumb
 600              		.thumb_func
 601              		.fpu fpv4-sp-d16
 603              	VL53L0X_set_offset_calibration_data_micro_meter:
 604              	.LVL83:
 605              	.LFB135:
 287:Core/Src/vl53l0x_api_calibration.c **** 
 288:Core/Src/vl53l0x_api_calibration.c **** 
 289:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 290:Core/Src/vl53l0x_api_calibration.c **** 		int32_t OffsetCalibrationDataMicroMeter)
 291:Core/Src/vl53l0x_api_calibration.c **** {
 606              		.loc 1 291 1 is_stmt 1 view -0
 607              		.cfi_startproc
 608              		@ args = 0, pretend = 0, frame = 0
 609              		@ frame_needed = 0, uses_anonymous_args = 0
 610              		.loc 1 291 1 is_stmt 0 view .LVU218
 611 0000 08B5     		push	{r3, lr}
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 19


 612              		.cfi_def_cfa_offset 8
 613              		.cfi_offset 3, -8
 614              		.cfi_offset 14, -4
 292:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 615              		.loc 1 292 2 is_stmt 1 view .LVU219
 616              	.LVL84:
 293:Core/Src/vl53l0x_api_calibration.c **** 	int32_t cMaxOffsetMicroMeter = 511000;
 617              		.loc 1 293 2 view .LVU220
 294:Core/Src/vl53l0x_api_calibration.c **** 	int32_t cMinOffsetMicroMeter = -512000;
 618              		.loc 1 294 2 view .LVU221
 295:Core/Src/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 619              		.loc 1 295 2 view .LVU222
 296:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t encodedOffsetVal;
 620              		.loc 1 296 2 view .LVU223
 297:Core/Src/vl53l0x_api_calibration.c **** 
 298:Core/Src/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_START("");
 621              		.loc 1 298 2 view .LVU224
 299:Core/Src/vl53l0x_api_calibration.c **** 
 300:Core/Src/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter > cMaxOffsetMicroMeter)
 622              		.loc 1 300 2 view .LVU225
 623              		.loc 1 300 5 is_stmt 0 view .LVU226
 624 0002 0F4B     		ldr	r3, .L49
 625 0004 9942     		cmp	r1, r3
 626 0006 05DC     		bgt	.L46
 301:Core/Src/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 302:Core/Src/vl53l0x_api_calibration.c **** 	else if (OffsetCalibrationDataMicroMeter < cMinOffsetMicroMeter)
 627              		.loc 1 302 7 is_stmt 1 view .LVU227
 628              		.loc 1 302 10 is_stmt 0 view .LVU228
 629 0008 11F5FA2F 		cmn	r1, #512000
 630 000c 0EDB     		blt	.L47
 303:Core/Src/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMinOffsetMicroMeter;
 304:Core/Src/vl53l0x_api_calibration.c **** 
 305:Core/Src/vl53l0x_api_calibration.c **** 	/* The offset register is 10.2 format and units are mm
 306:Core/Src/vl53l0x_api_calibration.c **** 	 * therefore conversion is applied by a division of
 307:Core/Src/vl53l0x_api_calibration.c **** 	 * 250.
 308:Core/Src/vl53l0x_api_calibration.c **** 	 */
 309:Core/Src/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter >= 0) {
 631              		.loc 1 309 2 is_stmt 1 view .LVU229
 632              		.loc 1 309 5 is_stmt 0 view .LVU230
 633 000e 0029     		cmp	r1, #0
 634 0010 01DA     		bge	.L43
 635 0012 0CE0     		b	.L44
 636              	.L46:
 301:Core/Src/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 637              		.loc 1 301 35 view .LVU231
 638 0014 0A49     		ldr	r1, .L49
 639              	.LVL85:
 640              	.L43:
 310:Core/Src/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 641              		.loc 1 310 3 is_stmt 1 view .LVU232
 311:Core/Src/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 642              		.loc 1 311 35 is_stmt 0 view .LVU233
 643 0016 0B4A     		ldr	r2, .L49+4
 644 0018 82FB0132 		smull	r3, r2, r2, r1
 645 001c C917     		asrs	r1, r1, #31
 646 001e C1EB2212 		rsb	r2, r1, r2, asr #4
 647              	.LVL86:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 20


 648              	.L45:
 312:Core/Src/vl53l0x_api_calibration.c **** 	} else {
 313:Core/Src/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 314:Core/Src/vl53l0x_api_calibration.c **** 			cOffsetRange +
 315:Core/Src/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 316:Core/Src/vl53l0x_api_calibration.c **** 	}
 317:Core/Src/vl53l0x_api_calibration.c **** 
 318:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrWord(Dev,
 649              		.loc 1 318 2 is_stmt 1 view .LVU234
 650              		.loc 1 318 11 is_stmt 0 view .LVU235
 651 0022 92B2     		uxth	r2, r2
 652              	.LVL87:
 653              		.loc 1 318 11 view .LVU236
 654 0024 2821     		movs	r1, #40
 655 0026 FFF7FEFF 		bl	VL53L0X_WrWord
 656              	.LVL88:
 319:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 320:Core/Src/vl53l0x_api_calibration.c **** 		encodedOffsetVal);
 321:Core/Src/vl53l0x_api_calibration.c **** 
 322:Core/Src/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_END(Status);
 657              		.loc 1 322 2 is_stmt 1 view .LVU237
 323:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 658              		.loc 1 323 2 view .LVU238
 324:Core/Src/vl53l0x_api_calibration.c **** }
 659              		.loc 1 324 1 is_stmt 0 view .LVU239
 660 002a 08BD     		pop	{r3, pc}
 661              	.LVL89:
 662              	.L47:
 303:Core/Src/vl53l0x_api_calibration.c **** 
 663              		.loc 1 303 35 view .LVU240
 664 002c 0649     		ldr	r1, .L49+8
 665              	.LVL90:
 666              	.L44:
 313:Core/Src/vl53l0x_api_calibration.c **** 			cOffsetRange +
 667              		.loc 1 313 3 is_stmt 1 view .LVU241
 315:Core/Src/vl53l0x_api_calibration.c **** 	}
 668              		.loc 1 315 35 is_stmt 0 view .LVU242
 669 002e 054B     		ldr	r3, .L49+4
 670 0030 83FB0123 		smull	r2, r3, r3, r1
 671 0034 CA17     		asrs	r2, r1, #31
 672 0036 C2EB2312 		rsb	r2, r2, r3, asr #4
 314:Core/Src/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 673              		.loc 1 314 17 view .LVU243
 674 003a 02F58052 		add	r2, r2, #4096
 675              	.LVL91:
 314:Core/Src/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 676              		.loc 1 314 17 view .LVU244
 677 003e F0E7     		b	.L45
 678              	.L50:
 679              		.align	2
 680              	.L49:
 681 0040 18CC0700 		.word	511000
 682 0044 D34D6210 		.word	274877907
 683 0048 0030F8FF 		.word	-512000
 684              		.cfi_endproc
 685              	.LFE135:
 687              		.section	.text.VL53L0X_get_offset_calibration_data_micro_meter,"ax",%progbits
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 21


 688              		.align	1
 689              		.global	VL53L0X_get_offset_calibration_data_micro_meter
 690              		.syntax unified
 691              		.thumb
 692              		.thumb_func
 693              		.fpu fpv4-sp-d16
 695              	VL53L0X_get_offset_calibration_data_micro_meter:
 696              	.LVL92:
 697              	.LFB136:
 325:Core/Src/vl53l0x_api_calibration.c **** 
 326:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 327:Core/Src/vl53l0x_api_calibration.c **** 		int32_t *pOffsetCalibrationDataMicroMeter)
 328:Core/Src/vl53l0x_api_calibration.c **** {
 698              		.loc 1 328 1 is_stmt 1 view -0
 699              		.cfi_startproc
 700              		@ args = 0, pretend = 0, frame = 8
 701              		@ frame_needed = 0, uses_anonymous_args = 0
 702              		.loc 1 328 1 is_stmt 0 view .LVU246
 703 0000 10B5     		push	{r4, lr}
 704              		.cfi_def_cfa_offset 8
 705              		.cfi_offset 4, -8
 706              		.cfi_offset 14, -4
 707 0002 82B0     		sub	sp, sp, #8
 708              		.cfi_def_cfa_offset 16
 709 0004 0C46     		mov	r4, r1
 329:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 710              		.loc 1 329 2 is_stmt 1 view .LVU247
 711              	.LVL93:
 330:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t RangeOffsetRegister;
 712              		.loc 1 330 2 view .LVU248
 331:Core/Src/vl53l0x_api_calibration.c **** 	int16_t cMaxOffset = 2047;
 713              		.loc 1 331 2 view .LVU249
 332:Core/Src/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 714              		.loc 1 332 2 view .LVU250
 333:Core/Src/vl53l0x_api_calibration.c **** 
 334:Core/Src/vl53l0x_api_calibration.c **** 	/* Note that offset has 10.2 format */
 335:Core/Src/vl53l0x_api_calibration.c **** 
 336:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_RdWord(Dev,
 715              		.loc 1 336 2 view .LVU251
 716              		.loc 1 336 11 is_stmt 0 view .LVU252
 717 0006 0DF10602 		add	r2, sp, #6
 718 000a 2821     		movs	r1, #40
 719              	.LVL94:
 720              		.loc 1 336 11 view .LVU253
 721 000c FFF7FEFF 		bl	VL53L0X_RdWord
 722              	.LVL95:
 337:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 338:Core/Src/vl53l0x_api_calibration.c **** 				&RangeOffsetRegister);
 339:Core/Src/vl53l0x_api_calibration.c **** 
 340:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 723              		.loc 1 340 2 is_stmt 1 view .LVU254
 724              		.loc 1 340 5 is_stmt 0 view .LVU255
 725 0010 60B9     		cbnz	r0, .L52
 341:Core/Src/vl53l0x_api_calibration.c **** 		RangeOffsetRegister = (RangeOffsetRegister & 0x0fff);
 726              		.loc 1 341 3 is_stmt 1 view .LVU256
 727              		.loc 1 341 46 is_stmt 0 view .LVU257
 728 0012 BDF80630 		ldrh	r3, [sp, #6]
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 22


 729 0016 C3F30B03 		ubfx	r3, r3, #0, #12
 730              	.LVL96:
 342:Core/Src/vl53l0x_api_calibration.c **** 
 343:Core/Src/vl53l0x_api_calibration.c **** 		/* Apply 12 bit 2's compliment conversion */
 344:Core/Src/vl53l0x_api_calibration.c **** 		if (RangeOffsetRegister > cMaxOffset)
 731              		.loc 1 344 3 is_stmt 1 view .LVU258
 732              		.loc 1 344 6 is_stmt 0 view .LVU259
 733 001a B3F5006F 		cmp	r3, #2048
 734 001e 07D3     		bcc	.L53
 345:Core/Src/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 735              		.loc 1 345 4 is_stmt 1 view .LVU260
 346:Core/Src/vl53l0x_api_calibration.c **** 				(int16_t)(RangeOffsetRegister - cOffsetRange)
 736              		.loc 1 346 5 is_stmt 0 view .LVU261
 737 0020 A3F58053 		sub	r3, r3, #4096
 738              	.LVL97:
 347:Core/Src/vl53l0x_api_calibration.c **** 					* 250;
 739              		.loc 1 347 6 view .LVU262
 740 0024 FA22     		movs	r2, #250
 741 0026 02FB03F3 		mul	r3, r2, r3
 742              	.LVL98:
 345:Core/Src/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 743              		.loc 1 345 38 view .LVU263
 744 002a 2360     		str	r3, [r4]
 745              	.LVL99:
 746              	.L52:
 348:Core/Src/vl53l0x_api_calibration.c **** 		else
 349:Core/Src/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 350:Core/Src/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 351:Core/Src/vl53l0x_api_calibration.c **** 
 352:Core/Src/vl53l0x_api_calibration.c **** 	}
 353:Core/Src/vl53l0x_api_calibration.c **** 
 354:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 747              		.loc 1 354 2 is_stmt 1 view .LVU264
 355:Core/Src/vl53l0x_api_calibration.c **** }
 748              		.loc 1 355 1 is_stmt 0 view .LVU265
 749 002c 02B0     		add	sp, sp, #8
 750              		.cfi_remember_state
 751              		.cfi_def_cfa_offset 8
 752              		@ sp needed
 753 002e 10BD     		pop	{r4, pc}
 754              	.LVL100:
 755              	.L53:
 756              		.cfi_restore_state
 349:Core/Src/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 757              		.loc 1 349 4 is_stmt 1 view .LVU266
 350:Core/Src/vl53l0x_api_calibration.c **** 
 758              		.loc 1 350 34 is_stmt 0 view .LVU267
 759 0030 FA22     		movs	r2, #250
 760 0032 03FB02F3 		mul	r3, r3, r2
 761              	.LVL101:
 349:Core/Src/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 762              		.loc 1 349 38 view .LVU268
 763 0036 2360     		str	r3, [r4]
 764              	.LVL102:
 349:Core/Src/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 765              		.loc 1 349 38 view .LVU269
 766 0038 F8E7     		b	.L52
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 23


 767              		.cfi_endproc
 768              	.LFE136:
 770              		.section	.text.VL53L0X_apply_offset_adjustment,"ax",%progbits
 771              		.align	1
 772              		.global	VL53L0X_apply_offset_adjustment
 773              		.syntax unified
 774              		.thumb
 775              		.thumb_func
 776              		.fpu fpv4-sp-d16
 778              	VL53L0X_apply_offset_adjustment:
 779              	.LVL103:
 780              	.LFB137:
 356:Core/Src/vl53l0x_api_calibration.c **** 
 357:Core/Src/vl53l0x_api_calibration.c **** 
 358:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_apply_offset_adjustment(VL53L0X_DEV Dev)
 359:Core/Src/vl53l0x_api_calibration.c **** {
 781              		.loc 1 359 1 is_stmt 1 view -0
 782              		.cfi_startproc
 783              		@ args = 0, pretend = 0, frame = 8
 784              		@ frame_needed = 0, uses_anonymous_args = 0
 785              		.loc 1 359 1 is_stmt 0 view .LVU271
 786 0000 30B5     		push	{r4, r5, lr}
 787              		.cfi_def_cfa_offset 12
 788              		.cfi_offset 4, -12
 789              		.cfi_offset 5, -8
 790              		.cfi_offset 14, -4
 791 0002 83B0     		sub	sp, sp, #12
 792              		.cfi_def_cfa_offset 24
 793 0004 0446     		mov	r4, r0
 360:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 794              		.loc 1 360 2 is_stmt 1 view .LVU272
 795              	.LVL104:
 361:Core/Src/vl53l0x_api_calibration.c **** 	int32_t CorrectedOffsetMicroMeters;
 796              		.loc 1 361 2 view .LVU273
 362:Core/Src/vl53l0x_api_calibration.c **** 	int32_t CurrentOffsetMicroMeters;
 797              		.loc 1 362 2 view .LVU274
 363:Core/Src/vl53l0x_api_calibration.c **** 
 364:Core/Src/vl53l0x_api_calibration.c **** 	/* if we run on this function we can read all the NVM info
 365:Core/Src/vl53l0x_api_calibration.c **** 	 * used by the API */
 366:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_get_info_from_device(Dev, 7);
 798              		.loc 1 366 2 view .LVU275
 799              		.loc 1 366 11 is_stmt 0 view .LVU276
 800 0006 0721     		movs	r1, #7
 801 0008 FFF7FEFF 		bl	VL53L0X_get_info_from_device
 802              	.LVL105:
 367:Core/Src/vl53l0x_api_calibration.c **** 
 368:Core/Src/vl53l0x_api_calibration.c **** 	/* Read back current device offset */
 369:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 803              		.loc 1 369 2 is_stmt 1 view .LVU277
 804              		.loc 1 369 5 is_stmt 0 view .LVU278
 805 000c 0346     		mov	r3, r0
 806 000e 18B1     		cbz	r0, .L59
 807              	.LVL106:
 808              	.L56:
 370:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 371:Core/Src/vl53l0x_api_calibration.c **** 					&CurrentOffsetMicroMeters);
 372:Core/Src/vl53l0x_api_calibration.c **** 	}
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 24


 373:Core/Src/vl53l0x_api_calibration.c **** 
 374:Core/Src/vl53l0x_api_calibration.c **** 	/* Apply Offset Adjustment derived from 400mm measurements */
 375:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 809              		.loc 1 375 2 is_stmt 1 view .LVU279
 810              		.loc 1 375 5 is_stmt 0 view .LVU280
 811 0010 43B1     		cbz	r3, .L60
 812              	.LVL107:
 813              	.L57:
 376:Core/Src/vl53l0x_api_calibration.c **** 
 377:Core/Src/vl53l0x_api_calibration.c **** 		/* Store initial device offset */
 378:Core/Src/vl53l0x_api_calibration.c **** 		PALDevDataSet(Dev, Part2PartOffsetNVMMicroMeter,
 379:Core/Src/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 380:Core/Src/vl53l0x_api_calibration.c **** 
 381:Core/Src/vl53l0x_api_calibration.c **** 		CorrectedOffsetMicroMeters = CurrentOffsetMicroMeters +
 382:Core/Src/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 383:Core/Src/vl53l0x_api_calibration.c **** 				Part2PartOffsetAdjustmentNVMMicroMeter);
 384:Core/Src/vl53l0x_api_calibration.c **** 
 385:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 386:Core/Src/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 387:Core/Src/vl53l0x_api_calibration.c **** 
 388:Core/Src/vl53l0x_api_calibration.c **** 		/* store current, adjusted offset */
 389:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 390:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 391:Core/Src/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 392:Core/Src/vl53l0x_api_calibration.c **** 		}
 393:Core/Src/vl53l0x_api_calibration.c **** 	}
 394:Core/Src/vl53l0x_api_calibration.c **** 
 395:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 814              		.loc 1 395 2 is_stmt 1 view .LVU281
 396:Core/Src/vl53l0x_api_calibration.c **** }
 815              		.loc 1 396 1 is_stmt 0 view .LVU282
 816 0012 1846     		mov	r0, r3
 817 0014 03B0     		add	sp, sp, #12
 818              		.cfi_remember_state
 819              		.cfi_def_cfa_offset 12
 820              		@ sp needed
 821 0016 30BD     		pop	{r4, r5, pc}
 822              	.LVL108:
 823              	.L59:
 824              		.cfi_restore_state
 370:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 825              		.loc 1 370 3 is_stmt 1 view .LVU283
 370:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 826              		.loc 1 370 12 is_stmt 0 view .LVU284
 827 0018 01A9     		add	r1, sp, #4
 828 001a 2046     		mov	r0, r4
 829              	.LVL109:
 370:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 830              		.loc 1 370 12 view .LVU285
 831 001c FFF7FEFF 		bl	VL53L0X_GetOffsetCalibrationDataMicroMeter
 832              	.LVL110:
 833 0020 0346     		mov	r3, r0
 834              	.LVL111:
 370:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 835              		.loc 1 370 12 view .LVU286
 836 0022 F5E7     		b	.L56
 837              	.L60:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 25


 378:Core/Src/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 838              		.loc 1 378 3 is_stmt 1 view .LVU287
 839 0024 019B     		ldr	r3, [sp, #4]
 840              	.LVL112:
 378:Core/Src/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 841              		.loc 1 378 3 is_stmt 0 view .LVU288
 842 0026 A360     		str	r3, [r4, #8]
 381:Core/Src/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 843              		.loc 1 381 3 is_stmt 1 view .LVU289
 382:Core/Src/vl53l0x_api_calibration.c **** 				Part2PartOffsetAdjustmentNVMMicroMeter);
 844              		.loc 1 382 13 is_stmt 0 view .LVU290
 845 0028 E568     		ldr	r5, [r4, #12]
 381:Core/Src/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 846              		.loc 1 381 30 view .LVU291
 847 002a 1D44     		add	r5, r5, r3
 848              	.LVL113:
 385:Core/Src/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 849              		.loc 1 385 3 is_stmt 1 view .LVU292
 385:Core/Src/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 850              		.loc 1 385 12 is_stmt 0 view .LVU293
 851 002c 2946     		mov	r1, r5
 852 002e 2046     		mov	r0, r4
 853 0030 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 854              	.LVL114:
 389:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 855              		.loc 1 389 3 is_stmt 1 view .LVU294
 389:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 856              		.loc 1 389 6 is_stmt 0 view .LVU295
 857 0034 0346     		mov	r3, r0
 858 0036 0028     		cmp	r0, #0
 859 0038 EBD1     		bne	.L57
 390:Core/Src/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 860              		.loc 1 390 4 is_stmt 1 view .LVU296
 861 003a 6562     		str	r5, [r4, #36]
 862 003c E9E7     		b	.L57
 863              		.cfi_endproc
 864              	.LFE137:
 866              		.section	.text.get_next_good_spad,"ax",%progbits
 867              		.align	1
 868              		.global	get_next_good_spad
 869              		.syntax unified
 870              		.thumb
 871              		.thumb_func
 872              		.fpu fpv4-sp-d16
 874              	get_next_good_spad:
 875              	.LVL115:
 876              	.LFB138:
 397:Core/Src/vl53l0x_api_calibration.c **** 
 398:Core/Src/vl53l0x_api_calibration.c **** void get_next_good_spad(uint8_t goodSpadArray[], uint32_t size,
 399:Core/Src/vl53l0x_api_calibration.c **** 			uint32_t curr, int32_t *next)
 400:Core/Src/vl53l0x_api_calibration.c **** {
 877              		.loc 1 400 1 view -0
 878              		.cfi_startproc
 879              		@ args = 0, pretend = 0, frame = 0
 880              		@ frame_needed = 0, uses_anonymous_args = 0
 881              		@ link register save eliminated.
 882              		.loc 1 400 1 is_stmt 0 view .LVU298
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 26


 883 0000 F0B4     		push	{r4, r5, r6, r7}
 884              		.cfi_def_cfa_offset 16
 885              		.cfi_offset 4, -16
 886              		.cfi_offset 5, -12
 887              		.cfi_offset 6, -8
 888              		.cfi_offset 7, -4
 401:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t startIndex;
 889              		.loc 1 401 2 is_stmt 1 view .LVU299
 402:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t fineOffset;
 890              		.loc 1 402 2 view .LVU300
 403:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 891              		.loc 1 403 2 view .LVU301
 892              	.LVL116:
 404:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 893              		.loc 1 404 2 view .LVU302
 405:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 894              		.loc 1 405 2 view .LVU303
 406:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t dataByte;
 895              		.loc 1 406 2 view .LVU304
 407:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t success = 0;
 896              		.loc 1 407 2 view .LVU305
 408:Core/Src/vl53l0x_api_calibration.c **** 
 409:Core/Src/vl53l0x_api_calibration.c **** 	/*
 410:Core/Src/vl53l0x_api_calibration.c **** 	 * Starting with the current good spad, loop through the array to find
 411:Core/Src/vl53l0x_api_calibration.c **** 	 * the next. i.e. the next bit set in the sequence.
 412:Core/Src/vl53l0x_api_calibration.c **** 	 *
 413:Core/Src/vl53l0x_api_calibration.c **** 	 * The coarse index is the byte index of the array and the fine index is
 414:Core/Src/vl53l0x_api_calibration.c **** 	 * the index of the bit within each byte.
 415:Core/Src/vl53l0x_api_calibration.c **** 	 */
 416:Core/Src/vl53l0x_api_calibration.c **** 
 417:Core/Src/vl53l0x_api_calibration.c **** 	*next = -1;
 897              		.loc 1 417 2 view .LVU306
 898              		.loc 1 417 8 is_stmt 0 view .LVU307
 899 0002 4FF0FF34 		mov	r4, #-1
 900 0006 1C60     		str	r4, [r3]
 418:Core/Src/vl53l0x_api_calibration.c **** 
 419:Core/Src/vl53l0x_api_calibration.c **** 	startIndex = curr / cSpadsPerByte;
 901              		.loc 1 419 2 is_stmt 1 view .LVU308
 902              		.loc 1 419 13 is_stmt 0 view .LVU309
 903 0008 D708     		lsrs	r7, r2, #3
 904              	.LVL117:
 420:Core/Src/vl53l0x_api_calibration.c **** 	fineOffset = curr % cSpadsPerByte;
 905              		.loc 1 420 2 is_stmt 1 view .LVU310
 906              		.loc 1 420 13 is_stmt 0 view .LVU311
 907 000a 02F0070C 		and	ip, r2, #7
 908              	.LVL118:
 421:Core/Src/vl53l0x_api_calibration.c **** 
 422:Core/Src/vl53l0x_api_calibration.c **** 	for (coarseIndex = startIndex; ((coarseIndex < size) && !success);
 909              		.loc 1 422 2 is_stmt 1 view .LVU312
 910              		.loc 1 422 19 is_stmt 0 view .LVU313
 911 000e 3D46     		mov	r5, r7
 407:Core/Src/vl53l0x_api_calibration.c **** 
 912              		.loc 1 407 10 view .LVU314
 913 0010 0026     		movs	r6, #0
 914              		.loc 1 422 2 view .LVU315
 915 0012 09E0     		b	.L62
 916              	.LVL119:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 27


 917              	.L72:
 423:Core/Src/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 424:Core/Src/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 425:Core/Src/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 426:Core/Src/vl53l0x_api_calibration.c **** 
 427:Core/Src/vl53l0x_api_calibration.c **** 		if (coarseIndex == startIndex) {
 428:Core/Src/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 429:Core/Src/vl53l0x_api_calibration.c **** 			 * spad bit before iterating */
 430:Core/Src/vl53l0x_api_calibration.c **** 			dataByte >>= fineOffset;
 918              		.loc 1 430 4 is_stmt 1 view .LVU316
 919              		.loc 1 430 13 is_stmt 0 view .LVU317
 920 0014 44FA0CF4 		asr	r4, r4, ip
 921              	.LVL120:
 922              		.loc 1 430 13 view .LVU318
 923 0018 E4B2     		uxtb	r4, r4
 924              	.LVL121:
 431:Core/Src/vl53l0x_api_calibration.c **** 			fineIndex = fineOffset;
 925              		.loc 1 431 4 is_stmt 1 view .LVU319
 926              		.loc 1 431 14 is_stmt 0 view .LVU320
 927 001a 6246     		mov	r2, ip
 928 001c 0BE0     		b	.L66
 929              	.LVL122:
 930              	.L73:
 432:Core/Src/vl53l0x_api_calibration.c **** 		}
 433:Core/Src/vl53l0x_api_calibration.c **** 
 434:Core/Src/vl53l0x_api_calibration.c **** 		while (fineIndex < cSpadsPerByte) {
 435:Core/Src/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 436:Core/Src/vl53l0x_api_calibration.c **** 				success = 1;
 931              		.loc 1 436 5 is_stmt 1 view .LVU321
 437:Core/Src/vl53l0x_api_calibration.c **** 				*next = coarseIndex * cSpadsPerByte + fineIndex;
 932              		.loc 1 437 5 view .LVU322
 933              		.loc 1 437 41 is_stmt 0 view .LVU323
 934 001e 02EBC502 		add	r2, r2, r5, lsl #3
 935              	.LVL123:
 936              		.loc 1 437 11 view .LVU324
 937 0022 1A60     		str	r2, [r3]
 438:Core/Src/vl53l0x_api_calibration.c **** 				break;
 938              		.loc 1 438 5 is_stmt 1 view .LVU325
 436:Core/Src/vl53l0x_api_calibration.c **** 				*next = coarseIndex * cSpadsPerByte + fineIndex;
 939              		.loc 1 436 13 is_stmt 0 view .LVU326
 940 0024 0126     		movs	r6, #1
 941              	.LVL124:
 942              	.L65:
 423:Core/Src/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 943              		.loc 1 423 5 is_stmt 1 view .LVU327
 423:Core/Src/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 944              		.loc 1 423 16 is_stmt 0 view .LVU328
 945 0026 0135     		adds	r5, r5, #1
 946              	.LVL125:
 947              	.L62:
 422:Core/Src/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 948              		.loc 1 422 33 is_stmt 1 discriminator 1 view .LVU329
 422:Core/Src/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 949              		.loc 1 422 2 is_stmt 0 discriminator 1 view .LVU330
 950 0028 8D42     		cmp	r5, r1
 951 002a 0CD2     		bcs	.L61
 422:Core/Src/vl53l0x_api_calibration.c **** 				coarseIndex++) {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 28


 952              		.loc 1 422 55 discriminator 2 view .LVU331
 953 002c 5EB9     		cbnz	r6, .L61
 424:Core/Src/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 954              		.loc 1 424 3 is_stmt 1 view .LVU332
 955              	.LVL126:
 425:Core/Src/vl53l0x_api_calibration.c **** 
 956              		.loc 1 425 3 view .LVU333
 425:Core/Src/vl53l0x_api_calibration.c **** 
 957              		.loc 1 425 12 is_stmt 0 view .LVU334
 958 002e 445D     		ldrb	r4, [r0, r5]	@ zero_extendqisi2
 959              	.LVL127:
 427:Core/Src/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 960              		.loc 1 427 3 is_stmt 1 view .LVU335
 427:Core/Src/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 961              		.loc 1 427 6 is_stmt 0 view .LVU336
 962 0030 BD42     		cmp	r5, r7
 963 0032 EFD0     		beq	.L72
 424:Core/Src/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 964              		.loc 1 424 13 view .LVU337
 965 0034 0022     		movs	r2, #0
 966              	.LVL128:
 967              	.L66:
 434:Core/Src/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 968              		.loc 1 434 9 is_stmt 1 view .LVU338
 969 0036 072A     		cmp	r2, #7
 970 0038 F5D8     		bhi	.L65
 435:Core/Src/vl53l0x_api_calibration.c **** 				success = 1;
 971              		.loc 1 435 4 view .LVU339
 435:Core/Src/vl53l0x_api_calibration.c **** 				success = 1;
 972              		.loc 1 435 7 is_stmt 0 view .LVU340
 973 003a 14F0010F 		tst	r4, #1
 974 003e EED1     		bne	.L73
 439:Core/Src/vl53l0x_api_calibration.c **** 			}
 440:Core/Src/vl53l0x_api_calibration.c **** 			dataByte >>= 1;
 975              		.loc 1 440 4 is_stmt 1 view .LVU341
 976              		.loc 1 440 13 is_stmt 0 view .LVU342
 977 0040 6408     		lsrs	r4, r4, #1
 978              	.LVL129:
 441:Core/Src/vl53l0x_api_calibration.c **** 			fineIndex++;
 979              		.loc 1 441 4 is_stmt 1 view .LVU343
 980              		.loc 1 441 13 is_stmt 0 view .LVU344
 981 0042 0132     		adds	r2, r2, #1
 982              	.LVL130:
 983              		.loc 1 441 13 view .LVU345
 984 0044 F7E7     		b	.L66
 985              	.LVL131:
 986              	.L61:
 442:Core/Src/vl53l0x_api_calibration.c **** 		}
 443:Core/Src/vl53l0x_api_calibration.c **** 	}
 444:Core/Src/vl53l0x_api_calibration.c **** }
 987              		.loc 1 444 1 view .LVU346
 988 0046 F0BC     		pop	{r4, r5, r6, r7}
 989              		.cfi_restore 7
 990              		.cfi_restore 6
 991              		.cfi_restore 5
 992              		.cfi_restore 4
 993              		.cfi_def_cfa_offset 0
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 29


 994              	.LVL132:
 995              		.loc 1 444 1 view .LVU347
 996 0048 7047     		bx	lr
 997              		.cfi_endproc
 998              	.LFE138:
 1000              		.section	.text.is_aperture,"ax",%progbits
 1001              		.align	1
 1002              		.global	is_aperture
 1003              		.syntax unified
 1004              		.thumb
 1005              		.thumb_func
 1006              		.fpu fpv4-sp-d16
 1008              	is_aperture:
 1009              	.LVL133:
 1010              	.LFB139:
 445:Core/Src/vl53l0x_api_calibration.c **** 
 446:Core/Src/vl53l0x_api_calibration.c **** 
 447:Core/Src/vl53l0x_api_calibration.c **** uint8_t is_aperture(uint32_t spadIndex)
 448:Core/Src/vl53l0x_api_calibration.c **** {
 1011              		.loc 1 448 1 is_stmt 1 view -0
 1012              		.cfi_startproc
 1013              		@ args = 0, pretend = 0, frame = 0
 1014              		@ frame_needed = 0, uses_anonymous_args = 0
 1015              		@ link register save eliminated.
 449:Core/Src/vl53l0x_api_calibration.c **** 	/*
 450:Core/Src/vl53l0x_api_calibration.c **** 	 * This function reports if a given spad index is an aperture SPAD by
 451:Core/Src/vl53l0x_api_calibration.c **** 	 * deriving the quadrant.
 452:Core/Src/vl53l0x_api_calibration.c **** 	 */
 453:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t quadrant;
 1016              		.loc 1 453 2 view .LVU349
 454:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t isAperture = 1;
 1017              		.loc 1 454 2 view .LVU350
 455:Core/Src/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 1018              		.loc 1 455 2 view .LVU351
 1019              		.loc 1 455 11 is_stmt 0 view .LVU352
 1020 0000 8009     		lsrs	r0, r0, #6
 1021              	.LVL134:
 456:Core/Src/vl53l0x_api_calibration.c **** 	if (refArrayQuadrants[quadrant] == REF_ARRAY_SPAD_0)
 1022              		.loc 1 456 2 is_stmt 1 view .LVU353
 1023              		.loc 1 456 23 is_stmt 0 view .LVU354
 1024 0002 044B     		ldr	r3, .L77
 1025 0004 53F82030 		ldr	r3, [r3, r0, lsl #2]
 1026              		.loc 1 456 5 view .LVU355
 1027 0008 0BB1     		cbz	r3, .L76
 454:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t isAperture = 1;
 1028              		.loc 1 454 10 view .LVU356
 1029 000a 0120     		movs	r0, #1
 1030              	.LVL135:
 454:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t isAperture = 1;
 1031              		.loc 1 454 10 view .LVU357
 1032 000c 7047     		bx	lr
 1033              	.LVL136:
 1034              	.L76:
 457:Core/Src/vl53l0x_api_calibration.c **** 		isAperture = 0;
 1035              		.loc 1 457 14 view .LVU358
 1036 000e 0020     		movs	r0, #0
 1037              	.LVL137:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 30


 458:Core/Src/vl53l0x_api_calibration.c **** 
 459:Core/Src/vl53l0x_api_calibration.c **** 	return isAperture;
 1038              		.loc 1 459 2 is_stmt 1 view .LVU359
 460:Core/Src/vl53l0x_api_calibration.c **** }
 1039              		.loc 1 460 1 is_stmt 0 view .LVU360
 1040 0010 7047     		bx	lr
 1041              	.L78:
 1042 0012 00BF     		.align	2
 1043              	.L77:
 1044 0014 00000000 		.word	.LANCHOR0
 1045              		.cfi_endproc
 1046              	.LFE139:
 1048              		.section	.text.enable_spad_bit,"ax",%progbits
 1049              		.align	1
 1050              		.global	enable_spad_bit
 1051              		.syntax unified
 1052              		.thumb
 1053              		.thumb_func
 1054              		.fpu fpv4-sp-d16
 1056              	enable_spad_bit:
 1057              	.LVL138:
 1058              	.LFB140:
 461:Core/Src/vl53l0x_api_calibration.c **** 
 462:Core/Src/vl53l0x_api_calibration.c **** 
 463:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error enable_spad_bit(uint8_t spadArray[], uint32_t size,
 464:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t spadIndex)
 465:Core/Src/vl53l0x_api_calibration.c **** {
 1059              		.loc 1 465 1 is_stmt 1 view -0
 1060              		.cfi_startproc
 1061              		@ args = 0, pretend = 0, frame = 0
 1062              		@ frame_needed = 0, uses_anonymous_args = 0
 1063              		@ link register save eliminated.
 466:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1064              		.loc 1 466 2 view .LVU362
 467:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 1065              		.loc 1 467 2 view .LVU363
 468:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 1066              		.loc 1 468 2 view .LVU364
 469:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 1067              		.loc 1 469 2 view .LVU365
 470:Core/Src/vl53l0x_api_calibration.c **** 
 471:Core/Src/vl53l0x_api_calibration.c **** 	coarseIndex = spadIndex / cSpadsPerByte;
 1068              		.loc 1 471 2 view .LVU366
 472:Core/Src/vl53l0x_api_calibration.c **** 	fineIndex = spadIndex % cSpadsPerByte;
 1069              		.loc 1 472 2 view .LVU367
 473:Core/Src/vl53l0x_api_calibration.c **** 	if (coarseIndex >= size)
 1070              		.loc 1 473 2 view .LVU368
 1071              		.loc 1 473 5 is_stmt 0 view .LVU369
 1072 0000 B1EBD20F 		cmp	r1, r2, lsr #3
 1073 0004 0CD9     		bls	.L81
 465:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1074              		.loc 1 465 1 view .LVU370
 1075 0006 30B4     		push	{r4, r5}
 1076              		.cfi_def_cfa_offset 8
 1077              		.cfi_offset 4, -8
 1078              		.cfi_offset 5, -4
 1079 0008 D408     		lsrs	r4, r2, #3
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 31


 1080              	.LVL139:
 465:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1081              		.loc 1 465 1 view .LVU371
 1082 000a 02F00705 		and	r5, r2, #7
 1083              	.LVL140:
 474:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 475:Core/Src/vl53l0x_api_calibration.c **** 	else
 476:Core/Src/vl53l0x_api_calibration.c **** 		spadArray[coarseIndex] |= (1 << fineIndex);
 1084              		.loc 1 476 3 is_stmt 1 view .LVU372
 1085              		.loc 1 476 32 is_stmt 0 view .LVU373
 1086 000e 0123     		movs	r3, #1
 1087 0010 03FA05F2 		lsl	r2, r3, r5
 1088              	.LVL141:
 1089              		.loc 1 476 26 view .LVU374
 1090 0014 035D     		ldrb	r3, [r0, r4]	@ zero_extendqisi2
 1091 0016 1343     		orrs	r3, r3, r2
 1092 0018 0355     		strb	r3, [r0, r4]
 466:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 1093              		.loc 1 466 16 view .LVU375
 1094 001a 0020     		movs	r0, #0
 1095              	.LVL142:
 477:Core/Src/vl53l0x_api_calibration.c **** 
 478:Core/Src/vl53l0x_api_calibration.c **** 	return status;
 1096              		.loc 1 478 2 is_stmt 1 view .LVU376
 479:Core/Src/vl53l0x_api_calibration.c **** }
 1097              		.loc 1 479 1 is_stmt 0 view .LVU377
 1098 001c 30BC     		pop	{r4, r5}
 1099              		.cfi_restore 5
 1100              		.cfi_restore 4
 1101              		.cfi_def_cfa_offset 0
 1102              	.LVL143:
 1103              		.loc 1 479 1 view .LVU378
 1104 001e 7047     		bx	lr
 1105              	.LVL144:
 1106              	.L81:
 474:Core/Src/vl53l0x_api_calibration.c **** 	else
 1107              		.loc 1 474 10 view .LVU379
 1108 0020 6FF03100 		mvn	r0, #49
 1109              	.LVL145:
 478:Core/Src/vl53l0x_api_calibration.c **** }
 1110              		.loc 1 478 2 is_stmt 1 view .LVU380
 1111              		.loc 1 479 1 is_stmt 0 view .LVU381
 1112 0024 7047     		bx	lr
 1113              		.cfi_endproc
 1114              	.LFE140:
 1116              		.section	.text.count_enabled_spads,"ax",%progbits
 1117              		.align	1
 1118              		.global	count_enabled_spads
 1119              		.syntax unified
 1120              		.thumb
 1121              		.thumb_func
 1122              		.fpu fpv4-sp-d16
 1124              	count_enabled_spads:
 1125              	.LVL146:
 1126              	.LFB141:
 480:Core/Src/vl53l0x_api_calibration.c **** 
 481:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error count_enabled_spads(uint8_t spadArray[],
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 32


 482:Core/Src/vl53l0x_api_calibration.c **** 		uint32_t byteCount, uint32_t maxSpads,
 483:Core/Src/vl53l0x_api_calibration.c **** 		uint32_t *pTotalSpadsEnabled, uint8_t *pIsAperture)
 484:Core/Src/vl53l0x_api_calibration.c **** {
 1127              		.loc 1 484 1 is_stmt 1 view -0
 1128              		.cfi_startproc
 1129              		@ args = 4, pretend = 0, frame = 0
 1130              		@ frame_needed = 0, uses_anonymous_args = 0
 1131              		.loc 1 484 1 is_stmt 0 view .LVU383
 1132 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1133              		.cfi_def_cfa_offset 24
 1134              		.cfi_offset 4, -24
 1135              		.cfi_offset 5, -20
 1136              		.cfi_offset 6, -16
 1137              		.cfi_offset 7, -12
 1138              		.cfi_offset 8, -8
 1139              		.cfi_offset 14, -4
 1140 0004 8446     		mov	ip, r0
 1141 0006 069F     		ldr	r7, [sp, #24]
 485:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1142              		.loc 1 485 2 is_stmt 1 view .LVU384
 1143              	.LVL147:
 486:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 1144              		.loc 1 486 2 view .LVU385
 487:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t lastByte;
 1145              		.loc 1 487 2 view .LVU386
 488:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t lastBit;
 1146              		.loc 1 488 2 view .LVU387
 489:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t byteIndex = 0;
 1147              		.loc 1 489 2 view .LVU388
 490:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t bitIndex = 0;
 1148              		.loc 1 490 2 view .LVU389
 491:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t tempByte;
 1149              		.loc 1 491 2 view .LVU390
 492:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t spadTypeIdentified = 0;
 1150              		.loc 1 492 2 view .LVU391
 493:Core/Src/vl53l0x_api_calibration.c **** 
 494:Core/Src/vl53l0x_api_calibration.c **** 	/* The entire array will not be used for spads, therefore the last
 495:Core/Src/vl53l0x_api_calibration.c **** 	 * byte and last bit is determined from the max spads value.
 496:Core/Src/vl53l0x_api_calibration.c **** 	 */
 497:Core/Src/vl53l0x_api_calibration.c **** 
 498:Core/Src/vl53l0x_api_calibration.c **** 	lastByte = maxSpads / cSpadsPerByte;
 1151              		.loc 1 498 2 view .LVU392
 1152              		.loc 1 498 11 is_stmt 0 view .LVU393
 1153 0008 4FEAD208 		lsr	r8, r2, #3
 1154              	.LVL148:
 499:Core/Src/vl53l0x_api_calibration.c **** 	lastBit = maxSpads % cSpadsPerByte;
 1155              		.loc 1 499 2 is_stmt 1 view .LVU394
 1156              		.loc 1 499 10 is_stmt 0 view .LVU395
 1157 000c 02F0070E 		and	lr, r2, #7
 1158              	.LVL149:
 500:Core/Src/vl53l0x_api_calibration.c **** 
 501:Core/Src/vl53l0x_api_calibration.c **** 	/* Check that the max spads value does not exceed the array bounds. */
 502:Core/Src/vl53l0x_api_calibration.c **** 	if (lastByte >= byteCount)
 1159              		.loc 1 502 2 is_stmt 1 view .LVU396
 1160              		.loc 1 502 5 is_stmt 0 view .LVU397
 1161 0010 B1EBD20F 		cmp	r1, r2, lsr #3
 1162 0014 04D9     		bls	.L96
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 33


 485:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 1163              		.loc 1 485 16 view .LVU398
 1164 0016 0020     		movs	r0, #0
 1165              	.LVL150:
 1166              	.L87:
 503:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 504:Core/Src/vl53l0x_api_calibration.c **** 
 505:Core/Src/vl53l0x_api_calibration.c **** 	*pTotalSpadsEnabled = 0;
 1167              		.loc 1 505 2 is_stmt 1 view .LVU399
 1168              		.loc 1 505 22 is_stmt 0 view .LVU400
 1169 0018 0025     		movs	r5, #0
 1170 001a 1D60     		str	r5, [r3]
 506:Core/Src/vl53l0x_api_calibration.c **** 
 507:Core/Src/vl53l0x_api_calibration.c **** 	/* Count the bits enabled in the whole bytes */
 508:Core/Src/vl53l0x_api_calibration.c **** 	for (byteIndex = 0; byteIndex <= (lastByte - 1); byteIndex++) {
 1171              		.loc 1 508 2 is_stmt 1 view .LVU401
 492:Core/Src/vl53l0x_api_calibration.c **** 
 1172              		.loc 1 492 10 is_stmt 0 view .LVU402
 1173 001c 2E46     		mov	r6, r5
 1174              		.loc 1 508 2 view .LVU403
 1175 001e 1CE0     		b	.L88
 1176              	.LVL151:
 1177              	.L96:
 503:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 1178              		.loc 1 503 10 view .LVU404
 1179 0020 6FF03100 		mvn	r0, #49
 1180              	.LVL152:
 503:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 1181              		.loc 1 503 10 view .LVU405
 1182 0024 F8E7     		b	.L87
 1183              	.LVL153:
 1184              	.L102:
 509:Core/Src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 510:Core/Src/vl53l0x_api_calibration.c **** 
 511:Core/Src/vl53l0x_api_calibration.c **** 		for (bitIndex = 0; bitIndex <= cSpadsPerByte; bitIndex++) {
 512:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 513:Core/Src/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 514:Core/Src/vl53l0x_api_calibration.c **** 
 515:Core/Src/vl53l0x_api_calibration.c **** 				if (!spadTypeIdentified) {
 516:Core/Src/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 517:Core/Src/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 1185              		.loc 1 517 26 discriminator 1 view .LVU406
 1186 0026 032A     		cmp	r2, #3
 1187 0028 12D9     		bls	.L100
 518:Core/Src/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 519:Core/Src/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 1188              		.loc 1 519 25 view .LVU407
 1189 002a 0126     		movs	r6, #1
 1190              	.LVL154:
 1191              	.L90:
 520:Core/Src/vl53l0x_api_calibration.c **** 				}
 521:Core/Src/vl53l0x_api_calibration.c **** 			}
 522:Core/Src/vl53l0x_api_calibration.c **** 			tempByte >>= 1;
 1192              		.loc 1 522 4 is_stmt 1 discriminator 2 view .LVU408
 1193              		.loc 1 522 13 is_stmt 0 discriminator 2 view .LVU409
 1194 002c 4908     		lsrs	r1, r1, #1
 1195              	.LVL155:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 34


 511:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1196              		.loc 1 511 49 is_stmt 1 discriminator 2 view .LVU410
 511:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1197              		.loc 1 511 57 is_stmt 0 discriminator 2 view .LVU411
 1198 002e 0132     		adds	r2, r2, #1
 1199              	.LVL156:
 1200              	.L89:
 511:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1201              		.loc 1 511 22 is_stmt 1 discriminator 1 view .LVU412
 511:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1202              		.loc 1 511 3 is_stmt 0 discriminator 1 view .LVU413
 1203 0030 082A     		cmp	r2, #8
 1204 0032 11D8     		bhi	.L101
 512:Core/Src/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 1205              		.loc 1 512 4 is_stmt 1 view .LVU414
 512:Core/Src/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 1206              		.loc 1 512 7 is_stmt 0 view .LVU415
 1207 0034 11F0010F 		tst	r1, #1
 1208 0038 F8D0     		beq	.L90
 513:Core/Src/vl53l0x_api_calibration.c **** 
 1209              		.loc 1 513 5 is_stmt 1 view .LVU416
 513:Core/Src/vl53l0x_api_calibration.c **** 
 1210              		.loc 1 513 6 is_stmt 0 view .LVU417
 1211 003a 1C68     		ldr	r4, [r3]
 513:Core/Src/vl53l0x_api_calibration.c **** 
 1212              		.loc 1 513 26 view .LVU418
 1213 003c 0134     		adds	r4, r4, #1
 1214 003e 1C60     		str	r4, [r3]
 515:Core/Src/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 1215              		.loc 1 515 5 is_stmt 1 view .LVU419
 515:Core/Src/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 1216              		.loc 1 515 8 is_stmt 0 view .LVU420
 1217 0040 002E     		cmp	r6, #0
 1218 0042 F3D1     		bne	.L90
 516:Core/Src/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 1219              		.loc 1 516 6 is_stmt 1 view .LVU421
 516:Core/Src/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 1220              		.loc 1 516 19 is_stmt 0 view .LVU422
 1221 0044 0124     		movs	r4, #1
 1222 0046 3C70     		strb	r4, [r7]
 517:Core/Src/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 1223              		.loc 1 517 6 is_stmt 1 view .LVU423
 517:Core/Src/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 1224              		.loc 1 517 9 is_stmt 0 view .LVU424
 1225 0048 A542     		cmp	r5, r4
 1226 004a ECD9     		bls	.L102
 519:Core/Src/vl53l0x_api_calibration.c **** 				}
 1227              		.loc 1 519 25 view .LVU425
 1228 004c 0126     		movs	r6, #1
 1229              	.LVL157:
 519:Core/Src/vl53l0x_api_calibration.c **** 				}
 1230              		.loc 1 519 25 view .LVU426
 1231 004e EDE7     		b	.L90
 1232              	.LVL158:
 1233              	.L100:
 518:Core/Src/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 1234              		.loc 1 518 8 is_stmt 1 view .LVU427
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 35


 518:Core/Src/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 1235              		.loc 1 518 21 is_stmt 0 view .LVU428
 1236 0050 0024     		movs	r4, #0
 1237 0052 3C70     		strb	r4, [r7]
 519:Core/Src/vl53l0x_api_calibration.c **** 				}
 1238              		.loc 1 519 25 view .LVU429
 1239 0054 0126     		movs	r6, #1
 1240              	.LVL159:
 519:Core/Src/vl53l0x_api_calibration.c **** 				}
 1241              		.loc 1 519 25 view .LVU430
 1242 0056 E9E7     		b	.L90
 1243              	.LVL160:
 1244              	.L101:
 508:Core/Src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1245              		.loc 1 508 51 is_stmt 1 discriminator 2 view .LVU431
 508:Core/Src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1246              		.loc 1 508 60 is_stmt 0 discriminator 2 view .LVU432
 1247 0058 0135     		adds	r5, r5, #1
 1248              	.LVL161:
 1249              	.L88:
 508:Core/Src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1250              		.loc 1 508 22 is_stmt 1 discriminator 1 view .LVU433
 508:Core/Src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1251              		.loc 1 508 45 is_stmt 0 discriminator 1 view .LVU434
 1252 005a 08F1FF32 		add	r2, r8, #-1
 508:Core/Src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1253              		.loc 1 508 2 discriminator 1 view .LVU435
 1254 005e AA42     		cmp	r2, r5
 1255 0060 03D3     		bcc	.L103
 509:Core/Src/vl53l0x_api_calibration.c **** 
 1256              		.loc 1 509 3 is_stmt 1 view .LVU436
 509:Core/Src/vl53l0x_api_calibration.c **** 
 1257              		.loc 1 509 12 is_stmt 0 view .LVU437
 1258 0062 1CF80510 		ldrb	r1, [ip, r5]	@ zero_extendqisi2
 1259              	.LVL162:
 511:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1260              		.loc 1 511 3 is_stmt 1 view .LVU438
 511:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1261              		.loc 1 511 17 is_stmt 0 view .LVU439
 1262 0066 0022     		movs	r2, #0
 511:Core/Src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1263              		.loc 1 511 3 view .LVU440
 1264 0068 E2E7     		b	.L89
 1265              	.LVL163:
 1266              	.L103:
 523:Core/Src/vl53l0x_api_calibration.c **** 		}
 524:Core/Src/vl53l0x_api_calibration.c **** 	}
 525:Core/Src/vl53l0x_api_calibration.c **** 
 526:Core/Src/vl53l0x_api_calibration.c **** 	/* Count the number of bits enabled in the last byte accounting
 527:Core/Src/vl53l0x_api_calibration.c **** 	 * for the fact that not all bits in the byte may be used.
 528:Core/Src/vl53l0x_api_calibration.c **** 	 */
 529:Core/Src/vl53l0x_api_calibration.c **** 	tempByte = spadArray[lastByte];
 1267              		.loc 1 529 2 is_stmt 1 view .LVU441
 1268              		.loc 1 529 11 is_stmt 0 view .LVU442
 1269 006a 1CF80840 		ldrb	r4, [ip, r8]	@ zero_extendqisi2
 1270              	.LVL164:
 530:Core/Src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 36


 531:Core/Src/vl53l0x_api_calibration.c **** 	for (bitIndex = 0; bitIndex <= lastBit; bitIndex++) {
 1271              		.loc 1 531 2 is_stmt 1 view .LVU443
 1272              		.loc 1 531 16 is_stmt 0 view .LVU444
 1273 006e 0022     		movs	r2, #0
 1274              		.loc 1 531 2 view .LVU445
 1275 0070 00E0     		b	.L93
 1276              	.LVL165:
 1277              	.L94:
 1278              		.loc 1 531 42 is_stmt 1 discriminator 2 view .LVU446
 1279              		.loc 1 531 50 is_stmt 0 discriminator 2 view .LVU447
 1280 0072 0132     		adds	r2, r2, #1
 1281              	.LVL166:
 1282              	.L93:
 1283              		.loc 1 531 21 is_stmt 1 discriminator 1 view .LVU448
 1284              		.loc 1 531 2 is_stmt 0 discriminator 1 view .LVU449
 1285 0074 7245     		cmp	r2, lr
 1286 0076 06D8     		bhi	.L104
 532:Core/Src/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 1287              		.loc 1 532 3 is_stmt 1 view .LVU450
 1288              		.loc 1 532 6 is_stmt 0 view .LVU451
 1289 0078 14F0010F 		tst	r4, #1
 1290 007c F9D0     		beq	.L94
 533:Core/Src/vl53l0x_api_calibration.c **** 			(*pTotalSpadsEnabled)++;
 1291              		.loc 1 533 4 is_stmt 1 view .LVU452
 1292              		.loc 1 533 5 is_stmt 0 view .LVU453
 1293 007e 1968     		ldr	r1, [r3]
 1294              		.loc 1 533 25 view .LVU454
 1295 0080 0131     		adds	r1, r1, #1
 1296 0082 1960     		str	r1, [r3]
 1297 0084 F5E7     		b	.L94
 1298              	.L104:
 534:Core/Src/vl53l0x_api_calibration.c **** 	}
 535:Core/Src/vl53l0x_api_calibration.c **** 
 536:Core/Src/vl53l0x_api_calibration.c **** 	return status;
 537:Core/Src/vl53l0x_api_calibration.c **** }
 1299              		.loc 1 537 1 view .LVU455
 1300 0086 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1301              		.loc 1 537 1 view .LVU456
 1302              		.cfi_endproc
 1303              	.LFE141:
 1305              		.section	.text.set_ref_spad_map,"ax",%progbits
 1306              		.align	1
 1307              		.global	set_ref_spad_map
 1308              		.syntax unified
 1309              		.thumb
 1310              		.thumb_func
 1311              		.fpu fpv4-sp-d16
 1313              	set_ref_spad_map:
 1314              	.LVL167:
 1315              	.LFB142:
 538:Core/Src/vl53l0x_api_calibration.c **** 
 539:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error set_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 540:Core/Src/vl53l0x_api_calibration.c **** {
 1316              		.loc 1 540 1 is_stmt 1 view -0
 1317              		.cfi_startproc
 1318              		@ args = 0, pretend = 0, frame = 0
 1319              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 37


 1320              		.loc 1 540 1 is_stmt 0 view .LVU458
 1321 0000 08B5     		push	{r3, lr}
 1322              		.cfi_def_cfa_offset 8
 1323              		.cfi_offset 3, -8
 1324              		.cfi_offset 14, -4
 1325 0002 0A46     		mov	r2, r1
 541:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_WriteMulti(Dev,
 1326              		.loc 1 541 2 is_stmt 1 view .LVU459
 1327              		.loc 1 541 25 is_stmt 0 view .LVU460
 1328 0004 0623     		movs	r3, #6
 1329 0006 B021     		movs	r1, #176
 1330              	.LVL168:
 1331              		.loc 1 541 25 view .LVU461
 1332 0008 FFF7FEFF 		bl	VL53L0X_WriteMulti
 1333              	.LVL169:
 542:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 543:Core/Src/vl53l0x_api_calibration.c **** 				refSpadArray, 6);
 544:Core/Src/vl53l0x_api_calibration.c **** 	return status;
 1334              		.loc 1 544 2 is_stmt 1 view .LVU462
 545:Core/Src/vl53l0x_api_calibration.c **** }
 1335              		.loc 1 545 1 is_stmt 0 view .LVU463
 1336 000c 08BD     		pop	{r3, pc}
 1337              		.cfi_endproc
 1338              	.LFE142:
 1340              		.section	.text.get_ref_spad_map,"ax",%progbits
 1341              		.align	1
 1342              		.global	get_ref_spad_map
 1343              		.syntax unified
 1344              		.thumb
 1345              		.thumb_func
 1346              		.fpu fpv4-sp-d16
 1348              	get_ref_spad_map:
 1349              	.LVL170:
 1350              	.LFB143:
 546:Core/Src/vl53l0x_api_calibration.c **** 
 547:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error get_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 548:Core/Src/vl53l0x_api_calibration.c **** {
 1351              		.loc 1 548 1 is_stmt 1 view -0
 1352              		.cfi_startproc
 1353              		@ args = 0, pretend = 0, frame = 0
 1354              		@ frame_needed = 0, uses_anonymous_args = 0
 1355              		.loc 1 548 1 is_stmt 0 view .LVU465
 1356 0000 08B5     		push	{r3, lr}
 1357              		.cfi_def_cfa_offset 8
 1358              		.cfi_offset 3, -8
 1359              		.cfi_offset 14, -4
 1360 0002 0A46     		mov	r2, r1
 549:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ReadMulti(Dev,
 1361              		.loc 1 549 2 is_stmt 1 view .LVU466
 1362              		.loc 1 549 25 is_stmt 0 view .LVU467
 1363 0004 0623     		movs	r3, #6
 1364 0006 B021     		movs	r1, #176
 1365              	.LVL171:
 1366              		.loc 1 549 25 view .LVU468
 1367 0008 FFF7FEFF 		bl	VL53L0X_ReadMulti
 1368              	.LVL172:
 550:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 38


 551:Core/Src/vl53l0x_api_calibration.c **** 				refSpadArray,
 552:Core/Src/vl53l0x_api_calibration.c **** 				6);
 553:Core/Src/vl53l0x_api_calibration.c **** 	return status;
 1369              		.loc 1 553 2 is_stmt 1 view .LVU469
 554:Core/Src/vl53l0x_api_calibration.c **** }
 1370              		.loc 1 554 1 is_stmt 0 view .LVU470
 1371 000c 08BD     		pop	{r3, pc}
 1372              		.cfi_endproc
 1373              	.LFE143:
 1375              		.section	.text.enable_ref_spads,"ax",%progbits
 1376              		.align	1
 1377              		.global	enable_ref_spads
 1378              		.syntax unified
 1379              		.thumb
 1380              		.thumb_func
 1381              		.fpu fpv4-sp-d16
 1383              	enable_ref_spads:
 1384              	.LVL173:
 1385              	.LFB144:
 555:Core/Src/vl53l0x_api_calibration.c **** 
 556:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error enable_ref_spads(VL53L0X_DEV Dev,
 557:Core/Src/vl53l0x_api_calibration.c **** 				uint8_t apertureSpads,
 558:Core/Src/vl53l0x_api_calibration.c **** 				uint8_t goodSpadArray[],
 559:Core/Src/vl53l0x_api_calibration.c **** 				uint8_t spadArray[],
 560:Core/Src/vl53l0x_api_calibration.c **** 				uint32_t size,
 561:Core/Src/vl53l0x_api_calibration.c **** 				uint32_t start,
 562:Core/Src/vl53l0x_api_calibration.c **** 				uint32_t offset,
 563:Core/Src/vl53l0x_api_calibration.c **** 				uint32_t spadCount,
 564:Core/Src/vl53l0x_api_calibration.c **** 				uint32_t *lastSpad)
 565:Core/Src/vl53l0x_api_calibration.c **** {
 1386              		.loc 1 565 1 is_stmt 1 view -0
 1387              		.cfi_startproc
 1388              		@ args = 20, pretend = 0, frame = 24
 1389              		@ frame_needed = 0, uses_anonymous_args = 0
 1390              		.loc 1 565 1 is_stmt 0 view .LVU472
 1391 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1392              		.cfi_def_cfa_offset 36
 1393              		.cfi_offset 4, -36
 1394              		.cfi_offset 5, -32
 1395              		.cfi_offset 6, -28
 1396              		.cfi_offset 7, -24
 1397              		.cfi_offset 8, -20
 1398              		.cfi_offset 9, -16
 1399              		.cfi_offset 10, -12
 1400              		.cfi_offset 11, -8
 1401              		.cfi_offset 14, -4
 1402 0004 87B0     		sub	sp, sp, #28
 1403              		.cfi_def_cfa_offset 64
 1404 0006 0190     		str	r0, [sp, #4]
 1405 0008 8946     		mov	r9, r1
 1406 000a 0092     		str	r2, [sp]
 1407 000c 9846     		mov	r8, r3
 1408 000e 109E     		ldr	r6, [sp, #64]
 1409 0010 DDF844B0 		ldr	fp, [sp, #68]
 1410 0014 129F     		ldr	r7, [sp, #72]
 1411 0016 DDF84CA0 		ldr	r10, [sp, #76]
 566:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 39


 1412              		.loc 1 566 2 is_stmt 1 view .LVU473
 1413              	.LVL174:
 567:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t index;
 1414              		.loc 1 567 2 view .LVU474
 568:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t i;
 1415              		.loc 1 568 2 view .LVU475
 569:Core/Src/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = offset;
 1416              		.loc 1 569 2 view .LVU476
 1417              		.loc 1 569 10 is_stmt 0 view .LVU477
 1418 001a 0597     		str	r7, [sp, #20]
 570:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t currentSpad;
 1419              		.loc 1 570 2 is_stmt 1 view .LVU478
 571:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t checkSpadArray[6];
 1420              		.loc 1 571 2 view .LVU479
 572:Core/Src/vl53l0x_api_calibration.c **** 
 573:Core/Src/vl53l0x_api_calibration.c **** 	/*
 574:Core/Src/vl53l0x_api_calibration.c **** 	 * This function takes in a spad array which may or may not have SPADS
 575:Core/Src/vl53l0x_api_calibration.c **** 	 * already enabled and appends from a given offset a requested number
 576:Core/Src/vl53l0x_api_calibration.c **** 	 * of new SPAD enables. The 'good spad map' is applied to
 577:Core/Src/vl53l0x_api_calibration.c **** 	 * determine the next SPADs to enable.
 578:Core/Src/vl53l0x_api_calibration.c **** 	 *
 579:Core/Src/vl53l0x_api_calibration.c **** 	 * This function applies to only aperture or only non-aperture spads.
 580:Core/Src/vl53l0x_api_calibration.c **** 	 * Checks are performed to ensure this.
 581:Core/Src/vl53l0x_api_calibration.c **** 	 */
 582:Core/Src/vl53l0x_api_calibration.c **** 
 583:Core/Src/vl53l0x_api_calibration.c **** 	currentSpad = offset;
 1421              		.loc 1 583 2 view .LVU480
 1422              	.LVL175:
 584:Core/Src/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadCount; index++) {
 1423              		.loc 1 584 2 view .LVU481
 1424              		.loc 1 584 13 is_stmt 0 view .LVU482
 1425 001c 0025     		movs	r5, #0
 1426              		.loc 1 584 2 view .LVU483
 1427 001e 06E0     		b	.L110
 1428              	.LVL176:
 1429              	.L122:
 585:Core/Src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 586:Core/Src/vl53l0x_api_calibration.c **** 			&nextGoodSpad);
 587:Core/Src/vl53l0x_api_calibration.c **** 
 588:Core/Src/vl53l0x_api_calibration.c **** 		if (nextGoodSpad == -1) {
 589:Core/Src/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 590:Core/Src/vl53l0x_api_calibration.c **** 			break;
 591:Core/Src/vl53l0x_api_calibration.c **** 		}
 592:Core/Src/vl53l0x_api_calibration.c **** 
 593:Core/Src/vl53l0x_api_calibration.c **** 		/* Confirm that the next good SPAD is non-aperture */
 594:Core/Src/vl53l0x_api_calibration.c **** 		if (is_aperture(start + nextGoodSpad) != apertureSpads) {
 595:Core/Src/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 596:Core/Src/vl53l0x_api_calibration.c **** 			 * spads from the current quadrant then this is an error
 597:Core/Src/vl53l0x_api_calibration.c **** 			 */
 598:Core/Src/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 599:Core/Src/vl53l0x_api_calibration.c **** 			break;
 600:Core/Src/vl53l0x_api_calibration.c **** 		}
 601:Core/Src/vl53l0x_api_calibration.c **** 		currentSpad = (uint32_t)nextGoodSpad;
 1430              		.loc 1 601 3 is_stmt 1 discriminator 2 view .LVU484
 602:Core/Src/vl53l0x_api_calibration.c **** 		enable_spad_bit(spadArray, size, currentSpad);
 1431              		.loc 1 602 3 discriminator 2 view .LVU485
 1432 0020 2246     		mov	r2, r4
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 40


 1433 0022 3146     		mov	r1, r6
 1434 0024 4046     		mov	r0, r8
 1435 0026 FFF7FEFF 		bl	enable_spad_bit
 1436              	.LVL177:
 603:Core/Src/vl53l0x_api_calibration.c **** 		currentSpad++;
 1437              		.loc 1 603 3 discriminator 2 view .LVU486
 1438              		.loc 1 603 14 is_stmt 0 discriminator 2 view .LVU487
 1439 002a 671C     		adds	r7, r4, #1
 1440              	.LVL178:
 584:Core/Src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1441              		.loc 1 584 37 is_stmt 1 discriminator 2 view .LVU488
 584:Core/Src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1442              		.loc 1 584 42 is_stmt 0 discriminator 2 view .LVU489
 1443 002c 0135     		adds	r5, r5, #1
 1444              	.LVL179:
 1445              	.L110:
 584:Core/Src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1446              		.loc 1 584 18 is_stmt 1 discriminator 1 view .LVU490
 584:Core/Src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1447              		.loc 1 584 2 is_stmt 0 discriminator 1 view .LVU491
 1448 002e 5545     		cmp	r5, r10
 1449 0030 12D2     		bcs	.L121
 585:Core/Src/vl53l0x_api_calibration.c **** 			&nextGoodSpad);
 1450              		.loc 1 585 3 is_stmt 1 view .LVU492
 1451 0032 05AB     		add	r3, sp, #20
 1452 0034 3A46     		mov	r2, r7
 1453 0036 3146     		mov	r1, r6
 1454 0038 0098     		ldr	r0, [sp]
 1455 003a FFF7FEFF 		bl	get_next_good_spad
 1456              	.LVL180:
 588:Core/Src/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 1457              		.loc 1 588 3 view .LVU493
 588:Core/Src/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 1458              		.loc 1 588 20 is_stmt 0 view .LVU494
 1459 003e 059C     		ldr	r4, [sp, #20]
 588:Core/Src/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 1460              		.loc 1 588 6 view .LVU495
 1461 0040 B4F1FF3F 		cmp	r4, #-1
 1462 0044 10D0     		beq	.L117
 594:Core/Src/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 1463              		.loc 1 594 3 is_stmt 1 view .LVU496
 594:Core/Src/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 1464              		.loc 1 594 7 is_stmt 0 view .LVU497
 1465 0046 04EB0B00 		add	r0, r4, fp
 1466 004a FFF7FEFF 		bl	is_aperture
 1467              	.LVL181:
 594:Core/Src/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 1468              		.loc 1 594 6 view .LVU498
 1469 004e 4845     		cmp	r0, r9
 1470 0050 E6D0     		beq	.L122
 598:Core/Src/vl53l0x_api_calibration.c **** 			break;
 1471              		.loc 1 598 11 view .LVU499
 1472 0052 6FF03100 		mvn	r0, #49
 1473 0056 00E0     		b	.L111
 1474              	.L121:
 566:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t index;
 1475              		.loc 1 566 16 view .LVU500
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 41


 1476 0058 0020     		movs	r0, #0
 1477              	.L111:
 1478              	.LVL182:
 604:Core/Src/vl53l0x_api_calibration.c **** 	}
 605:Core/Src/vl53l0x_api_calibration.c **** 	*lastSpad = currentSpad;
 1479              		.loc 1 605 2 is_stmt 1 view .LVU501
 1480              		.loc 1 605 12 is_stmt 0 view .LVU502
 1481 005a 149B     		ldr	r3, [sp, #80]
 1482 005c 1F60     		str	r7, [r3]
 606:Core/Src/vl53l0x_api_calibration.c **** 
 607:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1483              		.loc 1 607 2 is_stmt 1 view .LVU503
 1484              		.loc 1 607 5 is_stmt 0 view .LVU504
 1485 005e 30B1     		cbz	r0, .L123
 1486              	.L113:
 608:Core/Src/vl53l0x_api_calibration.c **** 		status = set_ref_spad_map(Dev, spadArray);
 609:Core/Src/vl53l0x_api_calibration.c **** 
 610:Core/Src/vl53l0x_api_calibration.c **** 
 611:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1487              		.loc 1 611 2 is_stmt 1 view .LVU505
 1488              		.loc 1 611 5 is_stmt 0 view .LVU506
 1489 0060 50B1     		cbz	r0, .L124
 1490              	.LVL183:
 1491              	.L114:
 612:Core/Src/vl53l0x_api_calibration.c **** 		status = get_ref_spad_map(Dev, checkSpadArray);
 613:Core/Src/vl53l0x_api_calibration.c **** 
 614:Core/Src/vl53l0x_api_calibration.c **** 		i = 0;
 615:Core/Src/vl53l0x_api_calibration.c **** 
 616:Core/Src/vl53l0x_api_calibration.c **** 		/* Compare spad maps. If not equal report error. */
 617:Core/Src/vl53l0x_api_calibration.c **** 		while (i < size) {
 618:Core/Src/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 619:Core/Src/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 620:Core/Src/vl53l0x_api_calibration.c **** 				break;
 621:Core/Src/vl53l0x_api_calibration.c **** 			}
 622:Core/Src/vl53l0x_api_calibration.c **** 			i++;
 623:Core/Src/vl53l0x_api_calibration.c **** 		}
 624:Core/Src/vl53l0x_api_calibration.c **** 	}
 625:Core/Src/vl53l0x_api_calibration.c **** 	return status;
 1492              		.loc 1 625 2 is_stmt 1 view .LVU507
 626:Core/Src/vl53l0x_api_calibration.c **** }
 1493              		.loc 1 626 1 is_stmt 0 view .LVU508
 1494 0062 07B0     		add	sp, sp, #28
 1495              		.cfi_remember_state
 1496              		.cfi_def_cfa_offset 36
 1497              	.LVL184:
 1498              		.loc 1 626 1 view .LVU509
 1499              		@ sp needed
 1500 0064 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1501              	.LVL185:
 1502              	.L117:
 1503              		.cfi_restore_state
 589:Core/Src/vl53l0x_api_calibration.c **** 			break;
 1504              		.loc 1 589 11 view .LVU510
 1505 0068 6FF03100 		mvn	r0, #49
 1506 006c F5E7     		b	.L111
 1507              	.LVL186:
 1508              	.L123:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 42


 608:Core/Src/vl53l0x_api_calibration.c **** 
 1509              		.loc 1 608 3 is_stmt 1 view .LVU511
 608:Core/Src/vl53l0x_api_calibration.c **** 
 1510              		.loc 1 608 12 is_stmt 0 view .LVU512
 1511 006e 4146     		mov	r1, r8
 1512 0070 0198     		ldr	r0, [sp, #4]
 1513              	.LVL187:
 608:Core/Src/vl53l0x_api_calibration.c **** 
 1514              		.loc 1 608 12 view .LVU513
 1515 0072 FFF7FEFF 		bl	set_ref_spad_map
 1516              	.LVL188:
 608:Core/Src/vl53l0x_api_calibration.c **** 
 1517              		.loc 1 608 12 view .LVU514
 1518 0076 F3E7     		b	.L113
 1519              	.L124:
 612:Core/Src/vl53l0x_api_calibration.c **** 
 1520              		.loc 1 612 3 is_stmt 1 view .LVU515
 612:Core/Src/vl53l0x_api_calibration.c **** 
 1521              		.loc 1 612 12 is_stmt 0 view .LVU516
 1522 0078 03A9     		add	r1, sp, #12
 1523 007a 0198     		ldr	r0, [sp, #4]
 1524              	.LVL189:
 612:Core/Src/vl53l0x_api_calibration.c **** 
 1525              		.loc 1 612 12 view .LVU517
 1526 007c FFF7FEFF 		bl	get_ref_spad_map
 1527              	.LVL190:
 614:Core/Src/vl53l0x_api_calibration.c **** 
 1528              		.loc 1 614 3 is_stmt 1 view .LVU518
 617:Core/Src/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1529              		.loc 1 617 3 view .LVU519
 614:Core/Src/vl53l0x_api_calibration.c **** 
 1530              		.loc 1 614 5 is_stmt 0 view .LVU520
 1531 0080 0023     		movs	r3, #0
 1532              	.LVL191:
 1533              	.L115:
 617:Core/Src/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1534              		.loc 1 617 9 is_stmt 1 view .LVU521
 1535 0082 B342     		cmp	r3, r6
 1536 0084 EDD2     		bcs	.L114
 618:Core/Src/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1537              		.loc 1 618 4 view .LVU522
 618:Core/Src/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1538              		.loc 1 618 17 is_stmt 0 view .LVU523
 1539 0086 18F80310 		ldrb	r1, [r8, r3]	@ zero_extendqisi2
 618:Core/Src/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1540              		.loc 1 618 38 view .LVU524
 1541 008a 06AA     		add	r2, sp, #24
 1542 008c 1A44     		add	r2, r2, r3
 1543 008e 12F80C2C 		ldrb	r2, [r2, #-12]	@ zero_extendqisi2
 618:Core/Src/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1544              		.loc 1 618 7 view .LVU525
 1545 0092 9142     		cmp	r1, r2
 1546 0094 01D1     		bne	.L119
 622:Core/Src/vl53l0x_api_calibration.c **** 		}
 1547              		.loc 1 622 4 is_stmt 1 view .LVU526
 622:Core/Src/vl53l0x_api_calibration.c **** 		}
 1548              		.loc 1 622 5 is_stmt 0 view .LVU527
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 43


 1549 0096 0133     		adds	r3, r3, #1
 1550              	.LVL192:
 622:Core/Src/vl53l0x_api_calibration.c **** 		}
 1551              		.loc 1 622 5 view .LVU528
 1552 0098 F3E7     		b	.L115
 1553              	.L119:
 619:Core/Src/vl53l0x_api_calibration.c **** 				break;
 1554              		.loc 1 619 12 view .LVU529
 1555 009a 6FF03100 		mvn	r0, #49
 1556              	.LVL193:
 619:Core/Src/vl53l0x_api_calibration.c **** 				break;
 1557              		.loc 1 619 12 view .LVU530
 1558 009e E0E7     		b	.L114
 1559              		.cfi_endproc
 1560              	.LFE144:
 1562              		.section	.text.perform_ref_signal_measurement,"ax",%progbits
 1563              		.align	1
 1564              		.global	perform_ref_signal_measurement
 1565              		.syntax unified
 1566              		.thumb
 1567              		.thumb_func
 1568              		.fpu fpv4-sp-d16
 1570              	perform_ref_signal_measurement:
 1571              	.LVL194:
 1572              	.LFB145:
 627:Core/Src/vl53l0x_api_calibration.c **** 
 628:Core/Src/vl53l0x_api_calibration.c **** 
 629:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error perform_ref_signal_measurement(VL53L0X_DEV Dev,
 630:Core/Src/vl53l0x_api_calibration.c **** 		uint16_t *refSignalRate)
 631:Core/Src/vl53l0x_api_calibration.c **** {
 1573              		.loc 1 631 1 is_stmt 1 view -0
 1574              		.cfi_startproc
 1575              		@ args = 0, pretend = 0, frame = 32
 1576              		@ frame_needed = 0, uses_anonymous_args = 0
 1577              		.loc 1 631 1 is_stmt 0 view .LVU532
 1578 0000 70B5     		push	{r4, r5, r6, lr}
 1579              		.cfi_def_cfa_offset 16
 1580              		.cfi_offset 4, -16
 1581              		.cfi_offset 5, -12
 1582              		.cfi_offset 6, -8
 1583              		.cfi_offset 14, -4
 1584 0002 88B0     		sub	sp, sp, #32
 1585              		.cfi_def_cfa_offset 48
 1586 0004 0446     		mov	r4, r0
 1587 0006 0D46     		mov	r5, r1
 632:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1588              		.loc 1 632 2 is_stmt 1 view .LVU533
 1589              	.LVL195:
 633:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t rangingMeasurementData;
 1590              		.loc 1 633 2 view .LVU534
 634:Core/Src/vl53l0x_api_calibration.c **** 
 635:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 1591              		.loc 1 635 2 view .LVU535
 636:Core/Src/vl53l0x_api_calibration.c **** 
 637:Core/Src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
 638:Core/Src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
 639:Core/Src/vl53l0x_api_calibration.c **** 	 */
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 44


 640:Core/Src/vl53l0x_api_calibration.c **** 
 641:Core/Src/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1592              		.loc 1 641 2 view .LVU536
 1593              		.loc 1 641 17 is_stmt 0 view .LVU537
 1594 0008 90F83061 		ldrb	r6, [r0, #304]	@ zero_extendqisi2
 1595              	.LVL196:
 642:Core/Src/vl53l0x_api_calibration.c **** 
 643:Core/Src/vl53l0x_api_calibration.c **** 	/*
 644:Core/Src/vl53l0x_api_calibration.c **** 	 * This function performs a reference signal rate measurement.
 645:Core/Src/vl53l0x_api_calibration.c **** 	 */
 646:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1596              		.loc 1 646 2 is_stmt 1 view .LVU538
 647:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev,
 1597              		.loc 1 647 3 view .LVU539
 1598              		.loc 1 647 12 is_stmt 0 view .LVU540
 1599 000c C022     		movs	r2, #192
 1600 000e 0121     		movs	r1, #1
 1601              	.LVL197:
 1602              		.loc 1 647 12 view .LVU541
 1603 0010 FFF7FEFF 		bl	VL53L0X_WrByte
 1604              	.LVL198:
 648:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0xC0);
 649:Core/Src/vl53l0x_api_calibration.c **** 
 650:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1605              		.loc 1 650 2 is_stmt 1 view .LVU542
 1606              		.loc 1 650 5 is_stmt 0 view .LVU543
 1607 0014 0346     		mov	r3, r0
 1608 0016 30B1     		cbz	r0, .L132
 1609              	.LVL199:
 1610              	.L126:
 651:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 652:Core/Src/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 653:Core/Src/vl53l0x_api_calibration.c **** 
 654:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1611              		.loc 1 654 2 is_stmt 1 view .LVU544
 1612              		.loc 1 654 5 is_stmt 0 view .LVU545
 1613 0018 5BB1     		cbz	r3, .L133
 1614              	.L127:
 655:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 656:Core/Src/vl53l0x_api_calibration.c **** 
 657:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1615              		.loc 1 657 2 is_stmt 1 view .LVU546
 1616              		.loc 1 657 5 is_stmt 0 view .LVU547
 1617 001a 8BB1     		cbz	r3, .L134
 1618              	.L128:
 658:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_RdWord(Dev,
 659:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 660:Core/Src/vl53l0x_api_calibration.c **** 			refSignalRate);
 661:Core/Src/vl53l0x_api_calibration.c **** 
 662:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1619              		.loc 1 662 2 is_stmt 1 view .LVU548
 1620              		.loc 1 662 5 is_stmt 0 view .LVU549
 1621 001c BBB1     		cbz	r3, .L135
 1622              	.L129:
 663:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 664:Core/Src/vl53l0x_api_calibration.c **** 
 665:Core/Src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 45


 1623              		.loc 1 665 2 is_stmt 1 view .LVU550
 1624              		.loc 1 665 5 is_stmt 0 view .LVU551
 1625 001e EBB1     		cbz	r3, .L136
 1626              	.LVL200:
 1627              	.L130:
 666:Core/Src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
 667:Core/Src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 668:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 669:Core/Src/vl53l0x_api_calibration.c **** 		if (status == VL53L0X_ERROR_NONE)
 670:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 671:Core/Src/vl53l0x_api_calibration.c **** 	}
 672:Core/Src/vl53l0x_api_calibration.c **** 
 673:Core/Src/vl53l0x_api_calibration.c **** 	return status;
 1628              		.loc 1 673 2 is_stmt 1 view .LVU552
 674:Core/Src/vl53l0x_api_calibration.c **** }
 1629              		.loc 1 674 1 is_stmt 0 view .LVU553
 1630 0020 1846     		mov	r0, r3
 1631 0022 08B0     		add	sp, sp, #32
 1632              		.cfi_remember_state
 1633              		.cfi_def_cfa_offset 16
 1634              		@ sp needed
 1635 0024 70BD     		pop	{r4, r5, r6, pc}
 1636              	.LVL201:
 1637              	.L132:
 1638              		.cfi_restore_state
 651:Core/Src/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 1639              		.loc 1 651 3 is_stmt 1 view .LVU554
 651:Core/Src/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 1640              		.loc 1 651 12 is_stmt 0 view .LVU555
 1641 0026 01A9     		add	r1, sp, #4
 1642 0028 2046     		mov	r0, r4
 1643              	.LVL202:
 651:Core/Src/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 1644              		.loc 1 651 12 view .LVU556
 1645 002a FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 1646              	.LVL203:
 1647 002e 0346     		mov	r3, r0
 1648              	.LVL204:
 651:Core/Src/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 1649              		.loc 1 651 12 view .LVU557
 1650 0030 F2E7     		b	.L126
 1651              	.L133:
 655:Core/Src/vl53l0x_api_calibration.c **** 
 1652              		.loc 1 655 3 is_stmt 1 view .LVU558
 655:Core/Src/vl53l0x_api_calibration.c **** 
 1653              		.loc 1 655 12 is_stmt 0 view .LVU559
 1654 0032 0122     		movs	r2, #1
 1655 0034 FF21     		movs	r1, #255
 1656 0036 2046     		mov	r0, r4
 1657 0038 FFF7FEFF 		bl	VL53L0X_WrByte
 1658              	.LVL205:
 655:Core/Src/vl53l0x_api_calibration.c **** 
 1659              		.loc 1 655 12 view .LVU560
 1660 003c 0346     		mov	r3, r0
 1661              	.LVL206:
 655:Core/Src/vl53l0x_api_calibration.c **** 
 1662              		.loc 1 655 12 view .LVU561
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 46


 1663 003e ECE7     		b	.L127
 1664              	.L134:
 658:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 1665              		.loc 1 658 3 is_stmt 1 view .LVU562
 658:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 1666              		.loc 1 658 12 is_stmt 0 view .LVU563
 1667 0040 2A46     		mov	r2, r5
 1668 0042 B621     		movs	r1, #182
 1669 0044 2046     		mov	r0, r4
 1670 0046 FFF7FEFF 		bl	VL53L0X_RdWord
 1671              	.LVL207:
 658:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 1672              		.loc 1 658 12 view .LVU564
 1673 004a 0346     		mov	r3, r0
 1674              	.LVL208:
 658:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 1675              		.loc 1 658 12 view .LVU565
 1676 004c E6E7     		b	.L128
 1677              	.L135:
 663:Core/Src/vl53l0x_api_calibration.c **** 
 1678              		.loc 1 663 3 is_stmt 1 view .LVU566
 663:Core/Src/vl53l0x_api_calibration.c **** 
 1679              		.loc 1 663 12 is_stmt 0 view .LVU567
 1680 004e 0022     		movs	r2, #0
 1681 0050 FF21     		movs	r1, #255
 1682 0052 2046     		mov	r0, r4
 1683 0054 FFF7FEFF 		bl	VL53L0X_WrByte
 1684              	.LVL209:
 663:Core/Src/vl53l0x_api_calibration.c **** 
 1685              		.loc 1 663 12 view .LVU568
 1686 0058 0346     		mov	r3, r0
 1687              	.LVL210:
 663:Core/Src/vl53l0x_api_calibration.c **** 
 1688              		.loc 1 663 12 view .LVU569
 1689 005a E0E7     		b	.L129
 1690              	.L136:
 667:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 1691              		.loc 1 667 3 is_stmt 1 view .LVU570
 667:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 1692              		.loc 1 667 12 is_stmt 0 view .LVU571
 1693 005c 3246     		mov	r2, r6
 1694 005e 0121     		movs	r1, #1
 1695 0060 2046     		mov	r0, r4
 1696 0062 FFF7FEFF 		bl	VL53L0X_WrByte
 1697              	.LVL211:
 669:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1698              		.loc 1 669 3 is_stmt 1 view .LVU572
 669:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1699              		.loc 1 669 6 is_stmt 0 view .LVU573
 1700 0066 0346     		mov	r3, r0
 1701 0068 0028     		cmp	r0, #0
 1702 006a D9D1     		bne	.L130
 670:Core/Src/vl53l0x_api_calibration.c **** 	}
 1703              		.loc 1 670 4 is_stmt 1 view .LVU574
 1704 006c 84F83061 		strb	r6, [r4, #304]
 1705 0070 D6E7     		b	.L130
 1706              		.cfi_endproc
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 47


 1707              	.LFE145:
 1709              		.section	.text.VL53L0X_set_reference_spads,"ax",%progbits
 1710              		.align	1
 1711              		.global	VL53L0X_set_reference_spads
 1712              		.syntax unified
 1713              		.thumb
 1714              		.thumb_func
 1715              		.fpu fpv4-sp-d16
 1717              	VL53L0X_set_reference_spads:
 1718              	.LVL212:
 1719              	.LFB147:
 675:Core/Src/vl53l0x_api_calibration.c **** 
 676:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_spad_management(VL53L0X_DEV Dev,
 677:Core/Src/vl53l0x_api_calibration.c **** 				uint32_t *refSpadCount,
 678:Core/Src/vl53l0x_api_calibration.c **** 				uint8_t *isApertureSpads)
 679:Core/Src/vl53l0x_api_calibration.c **** {
 680:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 681:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t lastSpadArray[6];
 682:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 683:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t minimumSpadCount = 3;
 684:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 685:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 686:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex = 0;
 687:Core/Src/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 688:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 689:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t peakSignalRateRef;
 690:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t needAptSpads = 0;
 691:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t index = 0;
 692:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 693:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t signalRateDiff = 0;
 694:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t lastSignalRateDiff = 0;
 695:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t complete = 0;
 696:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 697:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 699:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 700:Core/Src/vl53l0x_api_calibration.c **** 
 701:Core/Src/vl53l0x_api_calibration.c **** 	/*
 702:Core/Src/vl53l0x_api_calibration.c **** 	 * The reference SPAD initialization procedure determines the minimum
 703:Core/Src/vl53l0x_api_calibration.c **** 	 * amount of reference spads to be enables to achieve a target reference
 704:Core/Src/vl53l0x_api_calibration.c **** 	 * signal rate and should be performed once during initialization.
 705:Core/Src/vl53l0x_api_calibration.c **** 	 *
 706:Core/Src/vl53l0x_api_calibration.c **** 	 * Either aperture or non-aperture spads are applied but never both.
 707:Core/Src/vl53l0x_api_calibration.c **** 	 * Firstly non-aperture spads are set, begining with 5 spads, and
 708:Core/Src/vl53l0x_api_calibration.c **** 	 * increased one spad at a time until the closest measurement to the
 709:Core/Src/vl53l0x_api_calibration.c **** 	 * target rate is achieved.
 710:Core/Src/vl53l0x_api_calibration.c **** 	 *
 711:Core/Src/vl53l0x_api_calibration.c **** 	 * If the target rate is exceeded when 5 non-aperture spads are enabled,
 712:Core/Src/vl53l0x_api_calibration.c **** 	 * initialization is performed instead with aperture spads.
 713:Core/Src/vl53l0x_api_calibration.c **** 	 *
 714:Core/Src/vl53l0x_api_calibration.c **** 	 * When setting spads, a 'Good Spad Map' is applied.
 715:Core/Src/vl53l0x_api_calibration.c **** 	 *
 716:Core/Src/vl53l0x_api_calibration.c **** 	 * This procedure operates within a SPAD window of interest of a maximum
 717:Core/Src/vl53l0x_api_calibration.c **** 	 * 44 spads.
 718:Core/Src/vl53l0x_api_calibration.c **** 	 * The start point is currently fixed to 180, which lies towards the end
 719:Core/Src/vl53l0x_api_calibration.c **** 	 * of the non-aperture quadrant and runs in to the adjacent aperture
 720:Core/Src/vl53l0x_api_calibration.c **** 	 * quadrant.
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 48


 721:Core/Src/vl53l0x_api_calibration.c **** 	 */
 722:Core/Src/vl53l0x_api_calibration.c **** 
 723:Core/Src/vl53l0x_api_calibration.c **** 
 724:Core/Src/vl53l0x_api_calibration.c **** 	targetRefRate = PALDevDataGet(Dev, targetRefRate);
 725:Core/Src/vl53l0x_api_calibration.c **** 
 726:Core/Src/vl53l0x_api_calibration.c **** 	/*
 727:Core/Src/vl53l0x_api_calibration.c **** 	 * Initialize Spad arrays.
 728:Core/Src/vl53l0x_api_calibration.c **** 	 * Currently the good spad map is initialised to 'All good'.
 729:Core/Src/vl53l0x_api_calibration.c **** 	 * This is a short term implementation. The good spad map will be
 730:Core/Src/vl53l0x_api_calibration.c **** 	 * provided as an input.
 731:Core/Src/vl53l0x_api_calibration.c **** 	 * Note that there are 6 bytes. Only the first 44 bits will be used to
 732:Core/Src/vl53l0x_api_calibration.c **** 	 * represent spads.
 733:Core/Src/vl53l0x_api_calibration.c **** 	 */
 734:Core/Src/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 735:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 736:Core/Src/vl53l0x_api_calibration.c **** 
 737:Core/Src/vl53l0x_api_calibration.c **** 
 738:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 739:Core/Src/vl53l0x_api_calibration.c **** 
 740:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 741:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 742:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 743:Core/Src/vl53l0x_api_calibration.c **** 
 744:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 745:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 746:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 747:Core/Src/vl53l0x_api_calibration.c **** 
 748:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 749:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 750:Core/Src/vl53l0x_api_calibration.c **** 
 751:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 752:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 753:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 754:Core/Src/vl53l0x_api_calibration.c **** 			startSelect);
 755:Core/Src/vl53l0x_api_calibration.c **** 
 756:Core/Src/vl53l0x_api_calibration.c **** 
 757:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 758:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 759:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 760:Core/Src/vl53l0x_api_calibration.c **** 
 761:Core/Src/vl53l0x_api_calibration.c **** 	/* Perform ref calibration */
 762:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 763:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 764:Core/Src/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 765:Core/Src/vl53l0x_api_calibration.c **** 
 766:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 767:Core/Src/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 768:Core/Src/vl53l0x_api_calibration.c **** 		currentSpadIndex = 0;
 769:Core/Src/vl53l0x_api_calibration.c **** 		lastSpadIndex = currentSpadIndex;
 770:Core/Src/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 771:Core/Src/vl53l0x_api_calibration.c **** 		Status = enable_ref_spads(Dev,
 772:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads,
 773:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 774:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 775:Core/Src/vl53l0x_api_calibration.c **** 					spadArraySize,
 776:Core/Src/vl53l0x_api_calibration.c **** 					startSelect,
 777:Core/Src/vl53l0x_api_calibration.c **** 					currentSpadIndex,
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 49


 778:Core/Src/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 779:Core/Src/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 780:Core/Src/vl53l0x_api_calibration.c **** 	}
 781:Core/Src/vl53l0x_api_calibration.c **** 
 782:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 783:Core/Src/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 784:Core/Src/vl53l0x_api_calibration.c **** 
 785:Core/Src/vl53l0x_api_calibration.c **** 		Status = perform_ref_signal_measurement(Dev,
 786:Core/Src/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 787:Core/Src/vl53l0x_api_calibration.c **** 		if ((Status == VL53L0X_ERROR_NONE) &&
 788:Core/Src/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 789:Core/Src/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 790:Core/Src/vl53l0x_api_calibration.c **** 			 * switch to APERTURE SPADs */
 791:Core/Src/vl53l0x_api_calibration.c **** 
 792:Core/Src/vl53l0x_api_calibration.c **** 			for (index = 0; index < spadArraySize; index++)
 793:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 794:Core/Src/vl53l0x_api_calibration.c **** 
 795:Core/Src/vl53l0x_api_calibration.c **** 
 796:Core/Src/vl53l0x_api_calibration.c **** 			/* Increment to the first APERTURE spad */
 797:Core/Src/vl53l0x_api_calibration.c **** 			while ((is_aperture(startSelect + currentSpadIndex)
 798:Core/Src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 799:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 800:Core/Src/vl53l0x_api_calibration.c **** 			}
 801:Core/Src/vl53l0x_api_calibration.c **** 
 802:Core/Src/vl53l0x_api_calibration.c **** 			needAptSpads = 1;
 803:Core/Src/vl53l0x_api_calibration.c **** 
 804:Core/Src/vl53l0x_api_calibration.c **** 			Status = enable_ref_spads(Dev,
 805:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads,
 806:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 807:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 808:Core/Src/vl53l0x_api_calibration.c **** 					spadArraySize,
 809:Core/Src/vl53l0x_api_calibration.c **** 					startSelect,
 810:Core/Src/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 811:Core/Src/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 812:Core/Src/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 813:Core/Src/vl53l0x_api_calibration.c **** 
 814:Core/Src/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 815:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 816:Core/Src/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 817:Core/Src/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 818:Core/Src/vl53l0x_api_calibration.c **** 
 819:Core/Src/vl53l0x_api_calibration.c **** 				if ((Status == VL53L0X_ERROR_NONE) &&
 820:Core/Src/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 821:Core/Src/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 822:Core/Src/vl53l0x_api_calibration.c **** 					 * setting the minimum number of
 823:Core/Src/vl53l0x_api_calibration.c **** 					 * APERTURE spads. Can do no more
 824:Core/Src/vl53l0x_api_calibration.c **** 					 * therefore set the min number of
 825:Core/Src/vl53l0x_api_calibration.c **** 					 * aperture spads as the result.
 826:Core/Src/vl53l0x_api_calibration.c **** 					 */
 827:Core/Src/vl53l0x_api_calibration.c **** 					isApertureSpads_int = 1;
 828:Core/Src/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 829:Core/Src/vl53l0x_api_calibration.c **** 				}
 830:Core/Src/vl53l0x_api_calibration.c **** 			}
 831:Core/Src/vl53l0x_api_calibration.c **** 		} else {
 832:Core/Src/vl53l0x_api_calibration.c **** 			needAptSpads = 0;
 833:Core/Src/vl53l0x_api_calibration.c **** 		}
 834:Core/Src/vl53l0x_api_calibration.c **** 	}
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 50


 835:Core/Src/vl53l0x_api_calibration.c **** 
 836:Core/Src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) &&
 837:Core/Src/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 838:Core/Src/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 839:Core/Src/vl53l0x_api_calibration.c **** 		 * or non-aperture spads have been set. Proceed to add
 840:Core/Src/vl53l0x_api_calibration.c **** 		 * spads and perform measurements until the target
 841:Core/Src/vl53l0x_api_calibration.c **** 		 * reference is reached.
 842:Core/Src/vl53l0x_api_calibration.c **** 		 */
 843:Core/Src/vl53l0x_api_calibration.c **** 		isApertureSpads_int = needAptSpads;
 844:Core/Src/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 845:Core/Src/vl53l0x_api_calibration.c **** 
 846:Core/Src/vl53l0x_api_calibration.c **** 		memcpy(lastSpadArray, Dev->Data.SpadData.RefSpadEnables,
 847:Core/Src/vl53l0x_api_calibration.c **** 				spadArraySize);
 848:Core/Src/vl53l0x_api_calibration.c **** 		lastSignalRateDiff = abs(peakSignalRateRef -
 849:Core/Src/vl53l0x_api_calibration.c **** 			targetRefRate);
 850:Core/Src/vl53l0x_api_calibration.c **** 		complete = 0;
 851:Core/Src/vl53l0x_api_calibration.c **** 
 852:Core/Src/vl53l0x_api_calibration.c **** 		while (!complete) {
 853:Core/Src/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 854:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 855:Core/Src/vl53l0x_api_calibration.c **** 				spadArraySize, currentSpadIndex,
 856:Core/Src/vl53l0x_api_calibration.c **** 				&nextGoodSpad);
 857:Core/Src/vl53l0x_api_calibration.c **** 
 858:Core/Src/vl53l0x_api_calibration.c **** 			if (nextGoodSpad == -1) {
 859:Core/Src/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 860:Core/Src/vl53l0x_api_calibration.c **** 				break;
 861:Core/Src/vl53l0x_api_calibration.c **** 			}
 862:Core/Src/vl53l0x_api_calibration.c **** 
 863:Core/Src/vl53l0x_api_calibration.c **** 			/* Cannot combine Aperture and Non-Aperture spads, so
 864:Core/Src/vl53l0x_api_calibration.c **** 			 * ensure the current spad is of the correct type.
 865:Core/Src/vl53l0x_api_calibration.c **** 			 */
 866:Core/Src/vl53l0x_api_calibration.c **** 			if (is_aperture((uint32_t)startSelect + nextGoodSpad) !=
 867:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads) {
 868:Core/Src/vl53l0x_api_calibration.c **** 				/* At this point we have enabled the maximum
 869:Core/Src/vl53l0x_api_calibration.c **** 				 * number of Aperture spads.
 870:Core/Src/vl53l0x_api_calibration.c **** 				 */
 871:Core/Src/vl53l0x_api_calibration.c **** 				complete = 1;
 872:Core/Src/vl53l0x_api_calibration.c **** 				break;
 873:Core/Src/vl53l0x_api_calibration.c **** 			}
 874:Core/Src/vl53l0x_api_calibration.c **** 
 875:Core/Src/vl53l0x_api_calibration.c **** 			(refSpadCount_int)++;
 876:Core/Src/vl53l0x_api_calibration.c **** 
 877:Core/Src/vl53l0x_api_calibration.c **** 			currentSpadIndex = nextGoodSpad;
 878:Core/Src/vl53l0x_api_calibration.c **** 			Status = enable_spad_bit(
 879:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 880:Core/Src/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 881:Core/Src/vl53l0x_api_calibration.c **** 
 882:Core/Src/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 883:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 884:Core/Src/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 885:Core/Src/vl53l0x_api_calibration.c **** 				 * perform measurement. */
 886:Core/Src/vl53l0x_api_calibration.c **** 				Status = set_ref_spad_map(Dev,
 887:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 888:Core/Src/vl53l0x_api_calibration.c **** 			}
 889:Core/Src/vl53l0x_api_calibration.c **** 
 890:Core/Src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 891:Core/Src/vl53l0x_api_calibration.c **** 				break;
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 51


 892:Core/Src/vl53l0x_api_calibration.c **** 
 893:Core/Src/vl53l0x_api_calibration.c **** 			Status = perform_ref_signal_measurement(Dev,
 894:Core/Src/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 895:Core/Src/vl53l0x_api_calibration.c **** 
 896:Core/Src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 897:Core/Src/vl53l0x_api_calibration.c **** 				break;
 898:Core/Src/vl53l0x_api_calibration.c **** 
 899:Core/Src/vl53l0x_api_calibration.c **** 			signalRateDiff = abs(peakSignalRateRef - targetRefRate);
 900:Core/Src/vl53l0x_api_calibration.c **** 
 901:Core/Src/vl53l0x_api_calibration.c **** 			if (peakSignalRateRef > targetRefRate) {
 902:Core/Src/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 903:Core/Src/vl53l0x_api_calibration.c **** 				 * measurement closest to the target rate,
 904:Core/Src/vl53l0x_api_calibration.c **** 				 * either above or below it.
 905:Core/Src/vl53l0x_api_calibration.c **** 				 */
 906:Core/Src/vl53l0x_api_calibration.c **** 				if (signalRateDiff > lastSignalRateDiff) {
 907:Core/Src/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 908:Core/Src/vl53l0x_api_calibration.c **** 					 * measurement, so choose this. */
 909:Core/Src/vl53l0x_api_calibration.c **** 					Status = set_ref_spad_map(Dev,
 910:Core/Src/vl53l0x_api_calibration.c **** 							lastSpadArray);
 911:Core/Src/vl53l0x_api_calibration.c **** 					memcpy(
 912:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 913:Core/Src/vl53l0x_api_calibration.c **** 					lastSpadArray, spadArraySize);
 914:Core/Src/vl53l0x_api_calibration.c **** 
 915:Core/Src/vl53l0x_api_calibration.c **** 					(refSpadCount_int)--;
 916:Core/Src/vl53l0x_api_calibration.c **** 				}
 917:Core/Src/vl53l0x_api_calibration.c **** 				complete = 1;
 918:Core/Src/vl53l0x_api_calibration.c **** 			} else {
 919:Core/Src/vl53l0x_api_calibration.c **** 				/* Continue to add spads */
 920:Core/Src/vl53l0x_api_calibration.c **** 				lastSignalRateDiff = signalRateDiff;
 921:Core/Src/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 922:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 923:Core/Src/vl53l0x_api_calibration.c **** 					spadArraySize);
 924:Core/Src/vl53l0x_api_calibration.c **** 			}
 925:Core/Src/vl53l0x_api_calibration.c **** 
 926:Core/Src/vl53l0x_api_calibration.c **** 		} /* while */
 927:Core/Src/vl53l0x_api_calibration.c **** 	}
 928:Core/Src/vl53l0x_api_calibration.c **** 
 929:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 930:Core/Src/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 931:Core/Src/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 932:Core/Src/vl53l0x_api_calibration.c **** 
 933:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 934:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 935:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 936:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 937:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 938:Core/Src/vl53l0x_api_calibration.c **** 	}
 939:Core/Src/vl53l0x_api_calibration.c **** 
 940:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 941:Core/Src/vl53l0x_api_calibration.c **** }
 942:Core/Src/vl53l0x_api_calibration.c **** 
 943:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_reference_spads(VL53L0X_DEV Dev,
 944:Core/Src/vl53l0x_api_calibration.c **** 				 uint32_t count, uint8_t isApertureSpads)
 945:Core/Src/vl53l0x_api_calibration.c **** {
 1720              		.loc 1 945 1 view -0
 1721              		.cfi_startproc
 1722              		@ args = 0, pretend = 0, frame = 8
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 52


 1723              		@ frame_needed = 0, uses_anonymous_args = 0
 1724              		.loc 1 945 1 is_stmt 0 view .LVU576
 1725 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1726              		.cfi_def_cfa_offset 20
 1727              		.cfi_offset 4, -20
 1728              		.cfi_offset 5, -16
 1729              		.cfi_offset 6, -12
 1730              		.cfi_offset 7, -8
 1731              		.cfi_offset 14, -4
 1732 0002 89B0     		sub	sp, sp, #36
 1733              		.cfi_def_cfa_offset 56
 1734 0004 0546     		mov	r5, r0
 1735 0006 0F46     		mov	r7, r1
 1736 0008 1646     		mov	r6, r2
 946:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 1737              		.loc 1 946 2 is_stmt 1 view .LVU577
 1738              	.LVL213:
 947:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 1739              		.loc 1 947 2 view .LVU578
 948:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1740              		.loc 1 948 2 view .LVU579
 949:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 1741              		.loc 1 949 2 view .LVU580
 950:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 1742              		.loc 1 950 2 view .LVU581
 951:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex;
 1743              		.loc 1 951 2 view .LVU582
 952:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t index;
 1744              		.loc 1 952 2 view .LVU583
 953:Core/Src/vl53l0x_api_calibration.c **** 
 954:Core/Src/vl53l0x_api_calibration.c **** 	/*
 955:Core/Src/vl53l0x_api_calibration.c **** 	 * This function applies a requested number of reference spads, either
 956:Core/Src/vl53l0x_api_calibration.c **** 	 * aperture or
 957:Core/Src/vl53l0x_api_calibration.c **** 	 * non-aperture, as requested.
 958:Core/Src/vl53l0x_api_calibration.c **** 	 * The good spad map will be applied.
 959:Core/Src/vl53l0x_api_calibration.c **** 	 */
 960:Core/Src/vl53l0x_api_calibration.c **** 
 961:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1745              		.loc 1 961 2 view .LVU584
 1746              		.loc 1 961 11 is_stmt 0 view .LVU585
 1747 000a 0122     		movs	r2, #1
 1748              	.LVL214:
 1749              		.loc 1 961 11 view .LVU586
 1750 000c FF21     		movs	r1, #255
 1751              	.LVL215:
 1752              		.loc 1 961 11 view .LVU587
 1753 000e FFF7FEFF 		bl	VL53L0X_WrByte
 1754              	.LVL216:
 962:Core/Src/vl53l0x_api_calibration.c **** 
 963:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1755              		.loc 1 963 2 is_stmt 1 view .LVU588
 1756              		.loc 1 963 5 is_stmt 0 view .LVU589
 1757 0012 0346     		mov	r3, r0
 1758 0014 58B1     		cbz	r0, .L150
 1759              	.LVL217:
 1760              	.L138:
 964:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 53


 965:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 966:Core/Src/vl53l0x_api_calibration.c **** 
 967:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1761              		.loc 1 967 2 is_stmt 1 view .LVU590
 1762              		.loc 1 967 5 is_stmt 0 view .LVU591
 1763 0016 8BB1     		cbz	r3, .L151
 1764              	.L139:
 968:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 969:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 970:Core/Src/vl53l0x_api_calibration.c **** 
 971:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1765              		.loc 1 971 2 is_stmt 1 view .LVU592
 1766              		.loc 1 971 5 is_stmt 0 view .LVU593
 1767 0018 BBB1     		cbz	r3, .L152
 1768              	.L140:
 972:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 973:Core/Src/vl53l0x_api_calibration.c **** 
 974:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1769              		.loc 1 974 2 is_stmt 1 view .LVU594
 1770              		.loc 1 974 5 is_stmt 0 view .LVU595
 1771 001a EBB1     		cbz	r3, .L153
 1772              	.LVL218:
 1773              	.L141:
 945:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 1774              		.loc 1 945 1 discriminator 1 view .LVU596
 1775 001c 0023     		movs	r3, #0
 1776              	.L142:
 1777              	.LVL219:
 975:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 976:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 977:Core/Src/vl53l0x_api_calibration.c **** 			startSelect);
 978:Core/Src/vl53l0x_api_calibration.c **** 
 979:Core/Src/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 1778              		.loc 1 979 18 is_stmt 1 discriminator 1 view .LVU597
 1779              		.loc 1 979 2 is_stmt 0 discriminator 1 view .LVU598
 1780 001e 052B     		cmp	r3, #5
 1781 0020 20D8     		bhi	.L154
 980:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1782              		.loc 1 980 3 is_stmt 1 discriminator 3 view .LVU599
 1783              		.loc 1 980 44 is_stmt 0 discriminator 3 view .LVU600
 1784 0022 E818     		adds	r0, r5, r3
 1785 0024 0024     		movs	r4, #0
 1786 0026 80F82441 		strb	r4, [r0, #292]
 979:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1787              		.loc 1 979 41 is_stmt 1 discriminator 3 view .LVU601
 979:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1788              		.loc 1 979 46 is_stmt 0 discriminator 3 view .LVU602
 1789 002a 0133     		adds	r3, r3, #1
 1790              	.LVL220:
 979:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1791              		.loc 1 979 46 discriminator 3 view .LVU603
 1792 002c F7E7     		b	.L142
 1793              	.LVL221:
 1794              	.L150:
 964:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 1795              		.loc 1 964 3 is_stmt 1 view .LVU604
 964:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 54


 1796              		.loc 1 964 12 is_stmt 0 view .LVU605
 1797 002e 0022     		movs	r2, #0
 1798 0030 4F21     		movs	r1, #79
 1799 0032 2846     		mov	r0, r5
 1800              	.LVL222:
 964:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 1801              		.loc 1 964 12 view .LVU606
 1802 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 1803              	.LVL223:
 1804 0038 0346     		mov	r3, r0
 1805              	.LVL224:
 964:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 1806              		.loc 1 964 12 view .LVU607
 1807 003a ECE7     		b	.L138
 1808              	.L151:
 968:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 1809              		.loc 1 968 3 is_stmt 1 view .LVU608
 968:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 1810              		.loc 1 968 12 is_stmt 0 view .LVU609
 1811 003c 2C22     		movs	r2, #44
 1812 003e 4E21     		movs	r1, #78
 1813 0040 2846     		mov	r0, r5
 1814 0042 FFF7FEFF 		bl	VL53L0X_WrByte
 1815              	.LVL225:
 968:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 1816              		.loc 1 968 12 view .LVU610
 1817 0046 0346     		mov	r3, r0
 1818              	.LVL226:
 968:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 1819              		.loc 1 968 12 view .LVU611
 1820 0048 E6E7     		b	.L139
 1821              	.L152:
 972:Core/Src/vl53l0x_api_calibration.c **** 
 1822              		.loc 1 972 3 is_stmt 1 view .LVU612
 972:Core/Src/vl53l0x_api_calibration.c **** 
 1823              		.loc 1 972 12 is_stmt 0 view .LVU613
 1824 004a 0022     		movs	r2, #0
 1825 004c FF21     		movs	r1, #255
 1826 004e 2846     		mov	r0, r5
 1827 0050 FFF7FEFF 		bl	VL53L0X_WrByte
 1828              	.LVL227:
 972:Core/Src/vl53l0x_api_calibration.c **** 
 1829              		.loc 1 972 12 view .LVU614
 1830 0054 0346     		mov	r3, r0
 1831              	.LVL228:
 972:Core/Src/vl53l0x_api_calibration.c **** 
 1832              		.loc 1 972 12 view .LVU615
 1833 0056 E0E7     		b	.L140
 1834              	.L153:
 975:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 1835              		.loc 1 975 3 is_stmt 1 view .LVU616
 975:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 1836              		.loc 1 975 12 is_stmt 0 view .LVU617
 1837 0058 B422     		movs	r2, #180
 1838 005a B621     		movs	r1, #182
 1839 005c 2846     		mov	r0, r5
 1840 005e FFF7FEFF 		bl	VL53L0X_WrByte
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 55


 1841              	.LVL229:
 975:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 1842              		.loc 1 975 12 view .LVU618
 1843 0062 DBE7     		b	.L141
 1844              	.LVL230:
 1845              	.L154:
 981:Core/Src/vl53l0x_api_calibration.c **** 
 982:Core/Src/vl53l0x_api_calibration.c **** 	if (isApertureSpads) {
 1846              		.loc 1 982 2 is_stmt 1 view .LVU619
 1847              		.loc 1 982 5 is_stmt 0 view .LVU620
 1848 0064 26BB     		cbnz	r6, .L148
 947:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1849              		.loc 1 947 11 view .LVU621
 1850 0066 0024     		movs	r4, #0
 1851              	.LVL231:
 1852              	.L145:
 983:Core/Src/vl53l0x_api_calibration.c **** 		/* Increment to the first APERTURE spad */
 984:Core/Src/vl53l0x_api_calibration.c **** 		while ((is_aperture(startSelect + currentSpadIndex) == 0) &&
 985:Core/Src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 986:Core/Src/vl53l0x_api_calibration.c **** 			currentSpadIndex++;
 987:Core/Src/vl53l0x_api_calibration.c **** 		}
 988:Core/Src/vl53l0x_api_calibration.c **** 	}
 989:Core/Src/vl53l0x_api_calibration.c **** 	Status = enable_ref_spads(Dev,
 1853              		.loc 1 989 2 is_stmt 1 view .LVU622
 1854              		.loc 1 989 11 is_stmt 0 view .LVU623
 1855 0068 07AB     		add	r3, sp, #28
 1856 006a 0493     		str	r3, [sp, #16]
 1857 006c 0397     		str	r7, [sp, #12]
 1858 006e 0294     		str	r4, [sp, #8]
 1859 0070 B423     		movs	r3, #180
 1860 0072 0193     		str	r3, [sp, #4]
 1861 0074 0623     		movs	r3, #6
 1862 0076 0093     		str	r3, [sp]
 1863 0078 05F59273 		add	r3, r5, #292
 1864 007c 05F59572 		add	r2, r5, #298
 1865 0080 3146     		mov	r1, r6
 1866 0082 2846     		mov	r0, r5
 1867 0084 FFF7FEFF 		bl	enable_ref_spads
 1868              	.LVL232:
 990:Core/Src/vl53l0x_api_calibration.c **** 				isApertureSpads,
 991:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 992:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables,
 993:Core/Src/vl53l0x_api_calibration.c **** 				spadArraySize,
 994:Core/Src/vl53l0x_api_calibration.c **** 				startSelect,
 995:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex,
 996:Core/Src/vl53l0x_api_calibration.c **** 				count,
 997:Core/Src/vl53l0x_api_calibration.c **** 				&lastSpadIndex);
 998:Core/Src/vl53l0x_api_calibration.c **** 
 999:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 1869              		.loc 1 999 2 is_stmt 1 view .LVU624
 1870              		.loc 1 999 5 is_stmt 0 view .LVU625
 1871 0088 30B9     		cbnz	r0, .L147
1000:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 1872              		.loc 1 1000 3 is_stmt 1 view .LVU626
 1873 008a 0123     		movs	r3, #1
 1874 008c 85F81531 		strb	r3, [r5, #277]
1001:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 56


 1875              		.loc 1 1001 3 view .LVU627
 1876 0090 85F81371 		strb	r7, [r5, #275]
1002:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(count));
1003:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 1877              		.loc 1 1003 3 view .LVU628
 1878 0094 85F81461 		strb	r6, [r5, #276]
 1879              	.L147:
1004:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadType, isApertureSpads);
1005:Core/Src/vl53l0x_api_calibration.c **** 	}
1006:Core/Src/vl53l0x_api_calibration.c **** 
1007:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 1880              		.loc 1 1007 2 view .LVU629
1008:Core/Src/vl53l0x_api_calibration.c **** }
 1881              		.loc 1 1008 1 is_stmt 0 view .LVU630
 1882 0098 09B0     		add	sp, sp, #36
 1883              		.cfi_remember_state
 1884              		.cfi_def_cfa_offset 20
 1885              		@ sp needed
 1886 009a F0BD     		pop	{r4, r5, r6, r7, pc}
 1887              	.LVL233:
 1888              	.L146:
 1889              		.cfi_restore_state
 986:Core/Src/vl53l0x_api_calibration.c **** 		}
 1890              		.loc 1 986 4 is_stmt 1 view .LVU631
 986:Core/Src/vl53l0x_api_calibration.c **** 		}
 1891              		.loc 1 986 20 is_stmt 0 view .LVU632
 1892 009c 0134     		adds	r4, r4, #1
 1893              	.LVL234:
 1894              	.L144:
 984:Core/Src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1895              		.loc 1 984 9 is_stmt 1 view .LVU633
 984:Core/Src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1896              		.loc 1 984 11 is_stmt 0 view .LVU634
 1897 009e 04F1B400 		add	r0, r4, #180
 1898 00a2 FFF7FEFF 		bl	is_aperture
 1899              	.LVL235:
 984:Core/Src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1900              		.loc 1 984 9 view .LVU635
 1901 00a6 0028     		cmp	r0, #0
 1902 00a8 DED1     		bne	.L145
 984:Core/Src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 1903              		.loc 1 984 61 discriminator 1 view .LVU636
 1904 00aa 2B2C     		cmp	r4, #43
 1905 00ac F6D9     		bls	.L146
 1906 00ae DBE7     		b	.L145
 1907              	.LVL236:
 1908              	.L148:
 947:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1909              		.loc 1 947 11 view .LVU637
 1910 00b0 0024     		movs	r4, #0
 1911 00b2 F4E7     		b	.L144
 1912              		.cfi_endproc
 1913              	.LFE147:
 1915              		.section	.text.VL53L0X_get_reference_spads,"ax",%progbits
 1916              		.align	1
 1917              		.global	VL53L0X_get_reference_spads
 1918              		.syntax unified
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 57


 1919              		.thumb
 1920              		.thumb_func
 1921              		.fpu fpv4-sp-d16
 1923              	VL53L0X_get_reference_spads:
 1924              	.LVL237:
 1925              	.LFB148:
1009:Core/Src/vl53l0x_api_calibration.c **** 
1010:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_reference_spads(VL53L0X_DEV Dev,
1011:Core/Src/vl53l0x_api_calibration.c **** 			uint32_t *pSpadCount, uint8_t *pIsApertureSpads)
1012:Core/Src/vl53l0x_api_calibration.c **** {
 1926              		.loc 1 1012 1 is_stmt 1 view -0
 1927              		.cfi_startproc
 1928              		@ args = 0, pretend = 0, frame = 16
 1929              		@ frame_needed = 0, uses_anonymous_args = 0
 1930              		.loc 1 1012 1 is_stmt 0 view .LVU639
 1931 0000 70B5     		push	{r4, r5, r6, lr}
 1932              		.cfi_def_cfa_offset 16
 1933              		.cfi_offset 4, -16
 1934              		.cfi_offset 5, -12
 1935              		.cfi_offset 6, -8
 1936              		.cfi_offset 14, -4
 1937 0002 86B0     		sub	sp, sp, #24
 1938              		.cfi_def_cfa_offset 40
 1939 0004 0446     		mov	r4, r0
 1940 0006 0E46     		mov	r6, r1
 1941 0008 1546     		mov	r5, r2
1013:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 1942              		.loc 1 1013 2 is_stmt 1 view .LVU640
 1943              	.LVL238:
1014:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
 1944              		.loc 1 1014 2 view .LVU641
1015:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t refSpadArray[6];
 1945              		.loc 1 1015 2 view .LVU642
1016:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t cMaxSpadCount = 44;
 1946              		.loc 1 1016 2 view .LVU643
1017:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t cSpadArraySize = 6;
 1947              		.loc 1 1017 2 view .LVU644
1018:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t spadsEnabled;
 1948              		.loc 1 1018 2 view .LVU645
1019:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t isApertureSpads = 0;
 1949              		.loc 1 1019 2 view .LVU646
 1950              		.loc 1 1019 10 is_stmt 0 view .LVU647
 1951 000a 0023     		movs	r3, #0
 1952 000c 8DF80B30 		strb	r3, [sp, #11]
1020:Core/Src/vl53l0x_api_calibration.c **** 
1021:Core/Src/vl53l0x_api_calibration.c **** 	refSpadsInitialised = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1953              		.loc 1 1021 2 is_stmt 1 view .LVU648
 1954              		.loc 1 1021 22 is_stmt 0 view .LVU649
 1955 0010 90F81531 		ldrb	r3, [r0, #277]	@ zero_extendqisi2
 1956              	.LVL239:
1022:Core/Src/vl53l0x_api_calibration.c **** 					RefSpadsInitialised);
1023:Core/Src/vl53l0x_api_calibration.c **** 
1024:Core/Src/vl53l0x_api_calibration.c **** 	if (refSpadsInitialised == 1) {
 1957              		.loc 1 1024 2 is_stmt 1 view .LVU650
 1958              		.loc 1 1024 5 is_stmt 0 view .LVU651
 1959 0014 012B     		cmp	r3, #1
 1960 0016 08D1     		bne	.L156
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 58


1025:Core/Src/vl53l0x_api_calibration.c **** 
1026:Core/Src/vl53l0x_api_calibration.c **** 		*pSpadCount = (uint32_t)VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1961              		.loc 1 1026 3 is_stmt 1 view .LVU652
 1962              		.loc 1 1026 27 is_stmt 0 view .LVU653
 1963 0018 90F81331 		ldrb	r3, [r0, #275]	@ zero_extendqisi2
 1964              	.LVL240:
 1965              		.loc 1 1026 15 view .LVU654
 1966 001c 0B60     		str	r3, [r1]
 1967              	.LVL241:
1027:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadCount);
1028:Core/Src/vl53l0x_api_calibration.c **** 		*pIsApertureSpads = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 1968              		.loc 1 1028 3 is_stmt 1 view .LVU655
 1969              		.loc 1 1028 23 is_stmt 0 view .LVU656
 1970 001e 90F81431 		ldrb	r3, [r0, #276]	@ zero_extendqisi2
 1971              		.loc 1 1028 21 view .LVU657
 1972 0022 1370     		strb	r3, [r2]
1013:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
 1973              		.loc 1 1013 16 view .LVU658
 1974 0024 0020     		movs	r0, #0
 1975              	.LVL242:
 1976              	.L157:
1029:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadType);
1030:Core/Src/vl53l0x_api_calibration.c **** 	} else {
1031:Core/Src/vl53l0x_api_calibration.c **** 
1032:Core/Src/vl53l0x_api_calibration.c **** 		/* obtain spad info from device.*/
1033:Core/Src/vl53l0x_api_calibration.c **** 		Status = get_ref_spad_map(Dev, refSpadArray);
1034:Core/Src/vl53l0x_api_calibration.c **** 
1035:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
1036:Core/Src/vl53l0x_api_calibration.c **** 			/* count enabled spads within spad map array and
1037:Core/Src/vl53l0x_api_calibration.c **** 			 * determine if Aperture or Non-Aperture.
1038:Core/Src/vl53l0x_api_calibration.c **** 			 */
1039:Core/Src/vl53l0x_api_calibration.c **** 			Status = count_enabled_spads(refSpadArray,
1040:Core/Src/vl53l0x_api_calibration.c **** 							cSpadArraySize,
1041:Core/Src/vl53l0x_api_calibration.c **** 							cMaxSpadCount,
1042:Core/Src/vl53l0x_api_calibration.c **** 							&spadsEnabled,
1043:Core/Src/vl53l0x_api_calibration.c **** 							&isApertureSpads);
1044:Core/Src/vl53l0x_api_calibration.c **** 
1045:Core/Src/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
1046:Core/Src/vl53l0x_api_calibration.c **** 
1047:Core/Src/vl53l0x_api_calibration.c **** 				*pSpadCount = spadsEnabled;
1048:Core/Src/vl53l0x_api_calibration.c **** 				*pIsApertureSpads = isApertureSpads;
1049:Core/Src/vl53l0x_api_calibration.c **** 
1050:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
1051:Core/Src/vl53l0x_api_calibration.c **** 					RefSpadsInitialised, 1);
1052:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
1053:Core/Src/vl53l0x_api_calibration.c **** 					ReferenceSpadCount,
1054:Core/Src/vl53l0x_api_calibration.c **** 					(uint8_t)spadsEnabled);
1055:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
1056:Core/Src/vl53l0x_api_calibration.c **** 					ReferenceSpadType, isApertureSpads);
1057:Core/Src/vl53l0x_api_calibration.c **** 			}
1058:Core/Src/vl53l0x_api_calibration.c **** 		}
1059:Core/Src/vl53l0x_api_calibration.c **** 	}
1060:Core/Src/vl53l0x_api_calibration.c **** 
1061:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 1977              		.loc 1 1061 2 is_stmt 1 view .LVU659
1062:Core/Src/vl53l0x_api_calibration.c **** }
 1978              		.loc 1 1062 1 is_stmt 0 view .LVU660
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 59


 1979 0026 06B0     		add	sp, sp, #24
 1980              		.cfi_remember_state
 1981              		.cfi_def_cfa_offset 16
 1982              		@ sp needed
 1983 0028 70BD     		pop	{r4, r5, r6, pc}
 1984              	.LVL243:
 1985              	.L156:
 1986              		.cfi_restore_state
1033:Core/Src/vl53l0x_api_calibration.c **** 
 1987              		.loc 1 1033 3 is_stmt 1 view .LVU661
1033:Core/Src/vl53l0x_api_calibration.c **** 
 1988              		.loc 1 1033 12 is_stmt 0 view .LVU662
 1989 002a 04A9     		add	r1, sp, #16
 1990              	.LVL244:
1033:Core/Src/vl53l0x_api_calibration.c **** 
 1991              		.loc 1 1033 12 view .LVU663
 1992 002c FFF7FEFF 		bl	get_ref_spad_map
 1993              	.LVL245:
1035:Core/Src/vl53l0x_api_calibration.c **** 			/* count enabled spads within spad map array and
 1994              		.loc 1 1035 3 is_stmt 1 view .LVU664
1035:Core/Src/vl53l0x_api_calibration.c **** 			/* count enabled spads within spad map array and
 1995              		.loc 1 1035 6 is_stmt 0 view .LVU665
 1996 0030 0028     		cmp	r0, #0
 1997 0032 F8D1     		bne	.L157
1039:Core/Src/vl53l0x_api_calibration.c **** 							cSpadArraySize,
 1998              		.loc 1 1039 4 is_stmt 1 view .LVU666
1039:Core/Src/vl53l0x_api_calibration.c **** 							cSpadArraySize,
 1999              		.loc 1 1039 13 is_stmt 0 view .LVU667
 2000 0034 0DF10B03 		add	r3, sp, #11
 2001 0038 0093     		str	r3, [sp]
 2002 003a 03AB     		add	r3, sp, #12
 2003 003c 2C22     		movs	r2, #44
 2004 003e 0621     		movs	r1, #6
 2005 0040 04A8     		add	r0, sp, #16
 2006              	.LVL246:
1039:Core/Src/vl53l0x_api_calibration.c **** 							cSpadArraySize,
 2007              		.loc 1 1039 13 view .LVU668
 2008 0042 FFF7FEFF 		bl	count_enabled_spads
 2009              	.LVL247:
1045:Core/Src/vl53l0x_api_calibration.c **** 
 2010              		.loc 1 1045 4 is_stmt 1 view .LVU669
1045:Core/Src/vl53l0x_api_calibration.c **** 
 2011              		.loc 1 1045 7 is_stmt 0 view .LVU670
 2012 0046 0028     		cmp	r0, #0
 2013 0048 EDD1     		bne	.L157
1047:Core/Src/vl53l0x_api_calibration.c **** 				*pIsApertureSpads = isApertureSpads;
 2014              		.loc 1 1047 5 is_stmt 1 view .LVU671
1047:Core/Src/vl53l0x_api_calibration.c **** 				*pIsApertureSpads = isApertureSpads;
 2015              		.loc 1 1047 17 is_stmt 0 view .LVU672
 2016 004a 039A     		ldr	r2, [sp, #12]
 2017 004c 3260     		str	r2, [r6]
1048:Core/Src/vl53l0x_api_calibration.c **** 
 2018              		.loc 1 1048 5 is_stmt 1 view .LVU673
1048:Core/Src/vl53l0x_api_calibration.c **** 
 2019              		.loc 1 1048 23 is_stmt 0 view .LVU674
 2020 004e 9DF80B30 		ldrb	r3, [sp, #11]	@ zero_extendqisi2
 2021 0052 2B70     		strb	r3, [r5]
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 60


1050:Core/Src/vl53l0x_api_calibration.c **** 					RefSpadsInitialised, 1);
 2022              		.loc 1 1050 5 is_stmt 1 view .LVU675
 2023 0054 0121     		movs	r1, #1
 2024 0056 84F81511 		strb	r1, [r4, #277]
1052:Core/Src/vl53l0x_api_calibration.c **** 					ReferenceSpadCount,
 2025              		.loc 1 1052 5 view .LVU676
 2026 005a 84F81321 		strb	r2, [r4, #275]
1055:Core/Src/vl53l0x_api_calibration.c **** 					ReferenceSpadType, isApertureSpads);
 2027              		.loc 1 1055 5 view .LVU677
 2028 005e 84F81431 		strb	r3, [r4, #276]
 2029 0062 E0E7     		b	.L157
 2030              		.cfi_endproc
 2031              	.LFE148:
 2033              		.section	.text.VL53L0X_perform_single_ref_calibration,"ax",%progbits
 2034              		.align	1
 2035              		.global	VL53L0X_perform_single_ref_calibration
 2036              		.syntax unified
 2037              		.thumb
 2038              		.thumb_func
 2039              		.fpu fpv4-sp-d16
 2041              	VL53L0X_perform_single_ref_calibration:
 2042              	.LVL248:
 2043              	.LFB149:
1063:Core/Src/vl53l0x_api_calibration.c **** 
1064:Core/Src/vl53l0x_api_calibration.c **** 
1065:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_single_ref_calibration(VL53L0X_DEV Dev,
1066:Core/Src/vl53l0x_api_calibration.c **** 		uint8_t vhv_init_byte)
1067:Core/Src/vl53l0x_api_calibration.c **** {
 2044              		.loc 1 1067 1 view -0
 2045              		.cfi_startproc
 2046              		@ args = 0, pretend = 0, frame = 0
 2047              		@ frame_needed = 0, uses_anonymous_args = 0
 2048              		.loc 1 1067 1 is_stmt 0 view .LVU679
 2049 0000 10B5     		push	{r4, lr}
 2050              		.cfi_def_cfa_offset 8
 2051              		.cfi_offset 4, -8
 2052              		.cfi_offset 14, -4
 2053 0002 0446     		mov	r4, r0
1068:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2054              		.loc 1 1068 2 is_stmt 1 view .LVU680
 2055              	.LVL249:
1069:Core/Src/vl53l0x_api_calibration.c **** 
1070:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2056              		.loc 1 1070 2 view .LVU681
1071:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START,
 2057              		.loc 1 1071 3 view .LVU682
 2058              		.loc 1 1071 12 is_stmt 0 view .LVU683
 2059 0004 41F00102 		orr	r2, r1, #1
 2060 0008 0021     		movs	r1, #0
 2061              	.LVL250:
 2062              		.loc 1 1071 12 view .LVU684
 2063 000a FFF7FEFF 		bl	VL53L0X_WrByte
 2064              	.LVL251:
1072:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_SYSRANGE_MODE_START_STOP |
1073:Core/Src/vl53l0x_api_calibration.c **** 				vhv_init_byte);
1074:Core/Src/vl53l0x_api_calibration.c **** 
1075:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 61


 2065              		.loc 1 1075 2 is_stmt 1 view .LVU685
 2066              		.loc 1 1075 5 is_stmt 0 view .LVU686
 2067 000e 10B1     		cbz	r0, .L164
 2068              	.L160:
 2069              	.LVL252:
1076:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_measurement_poll_for_completion(Dev);
1077:Core/Src/vl53l0x_api_calibration.c **** 
1078:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2070              		.loc 1 1078 2 is_stmt 1 view .LVU687
 2071              		.loc 1 1078 5 is_stmt 0 view .LVU688
 2072 0010 28B1     		cbz	r0, .L165
 2073              	.L161:
1079:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ClearInterruptMask(Dev, 0);
1080:Core/Src/vl53l0x_api_calibration.c **** 
1081:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2074              		.loc 1 1081 2 is_stmt 1 view .LVU689
 2075              		.loc 1 1081 5 is_stmt 0 view .LVU690
 2076 0012 48B1     		cbz	r0, .L166
 2077              	.L162:
1082:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START, 0x00);
1083:Core/Src/vl53l0x_api_calibration.c **** 
1084:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 2078              		.loc 1 1084 2 is_stmt 1 view .LVU691
1085:Core/Src/vl53l0x_api_calibration.c **** }
 2079              		.loc 1 1085 1 is_stmt 0 view .LVU692
 2080 0014 10BD     		pop	{r4, pc}
 2081              	.LVL253:
 2082              	.L164:
1076:Core/Src/vl53l0x_api_calibration.c **** 
 2083              		.loc 1 1076 3 is_stmt 1 view .LVU693
1076:Core/Src/vl53l0x_api_calibration.c **** 
 2084              		.loc 1 1076 12 is_stmt 0 view .LVU694
 2085 0016 2046     		mov	r0, r4
 2086 0018 FFF7FEFF 		bl	VL53L0X_measurement_poll_for_completion
 2087              	.LVL254:
1076:Core/Src/vl53l0x_api_calibration.c **** 
 2088              		.loc 1 1076 12 view .LVU695
 2089 001c F8E7     		b	.L160
 2090              	.L165:
1079:Core/Src/vl53l0x_api_calibration.c **** 
 2091              		.loc 1 1079 3 is_stmt 1 view .LVU696
1079:Core/Src/vl53l0x_api_calibration.c **** 
 2092              		.loc 1 1079 12 is_stmt 0 view .LVU697
 2093 001e 0021     		movs	r1, #0
 2094 0020 2046     		mov	r0, r4
 2095              	.LVL255:
1079:Core/Src/vl53l0x_api_calibration.c **** 
 2096              		.loc 1 1079 12 view .LVU698
 2097 0022 FFF7FEFF 		bl	VL53L0X_ClearInterruptMask
 2098              	.LVL256:
1079:Core/Src/vl53l0x_api_calibration.c **** 
 2099              		.loc 1 1079 12 view .LVU699
 2100 0026 F4E7     		b	.L161
 2101              	.L166:
1082:Core/Src/vl53l0x_api_calibration.c **** 
 2102              		.loc 1 1082 3 is_stmt 1 view .LVU700
1082:Core/Src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 62


 2103              		.loc 1 1082 12 is_stmt 0 view .LVU701
 2104 0028 0022     		movs	r2, #0
 2105 002a 1146     		mov	r1, r2
 2106 002c 2046     		mov	r0, r4
 2107              	.LVL257:
1082:Core/Src/vl53l0x_api_calibration.c **** 
 2108              		.loc 1 1082 12 view .LVU702
 2109 002e FFF7FEFF 		bl	VL53L0X_WrByte
 2110              	.LVL258:
1082:Core/Src/vl53l0x_api_calibration.c **** 
 2111              		.loc 1 1082 12 view .LVU703
 2112 0032 EFE7     		b	.L162
 2113              		.cfi_endproc
 2114              	.LFE149:
 2116              		.section	.text.VL53L0X_ref_calibration_io,"ax",%progbits
 2117              		.align	1
 2118              		.global	VL53L0X_ref_calibration_io
 2119              		.syntax unified
 2120              		.thumb
 2121              		.thumb_func
 2122              		.fpu fpv4-sp-d16
 2124              	VL53L0X_ref_calibration_io:
 2125              	.LVL259:
 2126              	.LFB150:
1086:Core/Src/vl53l0x_api_calibration.c **** 
1087:Core/Src/vl53l0x_api_calibration.c **** 
1088:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_ref_calibration_io(VL53L0X_DEV Dev, uint8_t read_not_write,
1089:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings, uint8_t PhaseCal,
1090:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal,
1091:Core/Src/vl53l0x_api_calibration.c **** 	const uint8_t vhv_enable, const uint8_t phase_enable)
1092:Core/Src/vl53l0x_api_calibration.c **** {
 2127              		.loc 1 1092 1 is_stmt 1 view -0
 2128              		.cfi_startproc
 2129              		@ args = 16, pretend = 0, frame = 8
 2130              		@ frame_needed = 0, uses_anonymous_args = 0
 2131              		.loc 1 1092 1 is_stmt 0 view .LVU705
 2132 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2133              		.cfi_def_cfa_offset 36
 2134              		.cfi_offset 4, -36
 2135              		.cfi_offset 5, -32
 2136              		.cfi_offset 6, -28
 2137              		.cfi_offset 7, -24
 2138              		.cfi_offset 8, -20
 2139              		.cfi_offset 9, -16
 2140              		.cfi_offset 10, -12
 2141              		.cfi_offset 11, -8
 2142              		.cfi_offset 14, -4
 2143 0004 83B0     		sub	sp, sp, #12
 2144              		.cfi_def_cfa_offset 48
 2145 0006 0546     		mov	r5, r0
 2146 0008 0E46     		mov	r6, r1
 2147 000a 9046     		mov	r8, r2
 2148 000c 1F46     		mov	r7, r3
 2149 000e 9DF838A0 		ldrb	r10, [sp, #56]	@ zero_extendqisi2
 2150 0012 9DF83C90 		ldrb	r9, [sp, #60]	@ zero_extendqisi2
1093:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2151              		.loc 1 1093 2 is_stmt 1 view .LVU706
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 63


 2152              	.LVL260:
1094:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalint = 0;
 2153              		.loc 1 1094 2 view .LVU707
 2154              		.loc 1 1094 10 is_stmt 0 view .LVU708
 2155 0016 4FF0000B 		mov	fp, #0
 2156 001a 8DF807B0 		strb	fp, [sp, #7]
1095:Core/Src/vl53l0x_api_calibration.c **** 
1096:Core/Src/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1097:Core/Src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 2157              		.loc 1 1097 2 is_stmt 1 view .LVU709
 2158              		.loc 1 1097 12 is_stmt 0 view .LVU710
 2159 001e 0122     		movs	r2, #1
 2160              	.LVL261:
 2161              		.loc 1 1097 12 view .LVU711
 2162 0020 FF21     		movs	r1, #255
 2163              	.LVL262:
 2164              		.loc 1 1097 12 view .LVU712
 2165 0022 FFF7FEFF 		bl	VL53L0X_WrByte
 2166              	.LVL263:
 2167              		.loc 1 1097 12 view .LVU713
 2168 0026 0446     		mov	r4, r0
 2169              	.LVL264:
1098:Core/Src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x00);
 2170              		.loc 1 1098 2 is_stmt 1 view .LVU714
 2171              		.loc 1 1098 12 is_stmt 0 view .LVU715
 2172 0028 5A46     		mov	r2, fp
 2173 002a 5946     		mov	r1, fp
 2174 002c 2846     		mov	r0, r5
 2175 002e FFF7FEFF 		bl	VL53L0X_WrByte
 2176              	.LVL265:
 2177              		.loc 1 1098 9 view .LVU716
 2178 0032 0443     		orrs	r4, r4, r0
 2179              	.LVL266:
 2180              		.loc 1 1098 9 view .LVU717
 2181 0034 64B2     		sxtb	r4, r4
 2182              	.LVL267:
1099:Core/Src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2183              		.loc 1 1099 2 is_stmt 1 view .LVU718
 2184              		.loc 1 1099 12 is_stmt 0 view .LVU719
 2185 0036 5A46     		mov	r2, fp
 2186 0038 FF21     		movs	r1, #255
 2187 003a 2846     		mov	r0, r5
 2188 003c FFF7FEFF 		bl	VL53L0X_WrByte
 2189              	.LVL268:
 2190              		.loc 1 1099 9 view .LVU720
 2191 0040 0443     		orrs	r4, r4, r0
 2192              	.LVL269:
 2193              		.loc 1 1099 9 view .LVU721
 2194 0042 64B2     		sxtb	r4, r4
 2195              	.LVL270:
1100:Core/Src/vl53l0x_api_calibration.c **** 
1101:Core/Src/vl53l0x_api_calibration.c **** 	if (read_not_write) {
 2196              		.loc 1 1101 2 is_stmt 1 view .LVU722
 2197              		.loc 1 1101 5 is_stmt 0 view .LVU723
 2198 0044 A6B3     		cbz	r6, .L168
1102:Core/Src/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 2199              		.loc 1 1102 3 is_stmt 1 view .LVU724
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 64


 2200              		.loc 1 1102 6 is_stmt 0 view .LVU725
 2201 0046 BAF1000F 		cmp	r10, #0
 2202 004a 20D1     		bne	.L173
 2203              	.L169:
1103:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xCB, pVhvSettings);
1104:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2204              		.loc 1 1104 3 is_stmt 1 view .LVU726
 2205              		.loc 1 1104 6 is_stmt 0 view .LVU727
 2206 004c B9F1000F 		cmp	r9, #0
 2207 0050 25D1     		bne	.L174
 2208              	.L170:
1105:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xEE, &PhaseCalint);
1106:Core/Src/vl53l0x_api_calibration.c **** 	} else {
1107:Core/Src/vl53l0x_api_calibration.c **** 		if (vhv_enable)
1108:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
1109:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
1110:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
1111:Core/Src/vl53l0x_api_calibration.c **** 	}
1112:Core/Src/vl53l0x_api_calibration.c **** 
1113:Core/Src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 2209              		.loc 1 1113 2 is_stmt 1 view .LVU728
 2210              		.loc 1 1113 12 is_stmt 0 view .LVU729
 2211 0052 0122     		movs	r2, #1
 2212 0054 FF21     		movs	r1, #255
 2213 0056 2846     		mov	r0, r5
 2214 0058 FFF7FEFF 		bl	VL53L0X_WrByte
 2215              	.LVL271:
 2216              		.loc 1 1113 9 view .LVU730
 2217 005c 0443     		orrs	r4, r4, r0
 2218              	.LVL272:
 2219              		.loc 1 1113 9 view .LVU731
 2220 005e 64B2     		sxtb	r4, r4
 2221              	.LVL273:
1114:Core/Src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x01);
 2222              		.loc 1 1114 2 is_stmt 1 view .LVU732
 2223              		.loc 1 1114 12 is_stmt 0 view .LVU733
 2224 0060 0122     		movs	r2, #1
 2225 0062 0021     		movs	r1, #0
 2226 0064 2846     		mov	r0, r5
 2227 0066 FFF7FEFF 		bl	VL53L0X_WrByte
 2228              	.LVL274:
 2229              		.loc 1 1114 9 view .LVU734
 2230 006a 0443     		orrs	r4, r4, r0
 2231              	.LVL275:
 2232              		.loc 1 1114 9 view .LVU735
 2233 006c 64B2     		sxtb	r4, r4
 2234              	.LVL276:
1115:Core/Src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2235              		.loc 1 1115 2 is_stmt 1 view .LVU736
 2236              		.loc 1 1115 12 is_stmt 0 view .LVU737
 2237 006e 0022     		movs	r2, #0
 2238 0070 FF21     		movs	r1, #255
 2239 0072 2846     		mov	r0, r5
 2240 0074 FFF7FEFF 		bl	VL53L0X_WrByte
 2241              	.LVL277:
 2242              		.loc 1 1115 9 view .LVU738
 2243 0078 2043     		orrs	r0, r0, r4
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 65


 2244              	.LVL278:
1116:Core/Src/vl53l0x_api_calibration.c **** 
1117:Core/Src/vl53l0x_api_calibration.c **** 	*pPhaseCal = (uint8_t)(PhaseCalint&0xEF);
 2245              		.loc 1 1117 2 is_stmt 1 view .LVU739
 2246              		.loc 1 1117 36 is_stmt 0 view .LVU740
 2247 007a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 2248              		.loc 1 1117 15 view .LVU741
 2249 007e 03F0EF03 		and	r3, r3, #239
 2250              		.loc 1 1117 13 view .LVU742
 2251 0082 0D9A     		ldr	r2, [sp, #52]
 2252 0084 1370     		strb	r3, [r2]
1118:Core/Src/vl53l0x_api_calibration.c **** 
1119:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 2253              		.loc 1 1119 2 is_stmt 1 view .LVU743
1120:Core/Src/vl53l0x_api_calibration.c **** }
 2254              		.loc 1 1120 1 is_stmt 0 view .LVU744
 2255 0086 40B2     		sxtb	r0, r0
 2256              		.loc 1 1120 1 view .LVU745
 2257 0088 03B0     		add	sp, sp, #12
 2258              		.cfi_remember_state
 2259              		.cfi_def_cfa_offset 36
 2260              		@ sp needed
 2261 008a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2262              	.LVL279:
 2263              	.L173:
 2264              		.cfi_restore_state
1103:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2265              		.loc 1 1103 4 is_stmt 1 view .LVU746
1103:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2266              		.loc 1 1103 14 is_stmt 0 view .LVU747
 2267 008e 0C9A     		ldr	r2, [sp, #48]
 2268 0090 CB21     		movs	r1, #203
 2269 0092 2846     		mov	r0, r5
 2270 0094 FFF7FEFF 		bl	VL53L0X_RdByte
 2271              	.LVL280:
1103:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2272              		.loc 1 1103 11 view .LVU748
 2273 0098 0443     		orrs	r4, r4, r0
 2274              	.LVL281:
1103:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2275              		.loc 1 1103 11 view .LVU749
 2276 009a 64B2     		sxtb	r4, r4
 2277              	.LVL282:
1103:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2278              		.loc 1 1103 11 view .LVU750
 2279 009c D6E7     		b	.L169
 2280              	.L174:
1105:Core/Src/vl53l0x_api_calibration.c **** 	} else {
 2281              		.loc 1 1105 4 is_stmt 1 view .LVU751
1105:Core/Src/vl53l0x_api_calibration.c **** 	} else {
 2282              		.loc 1 1105 14 is_stmt 0 view .LVU752
 2283 009e 0DF10702 		add	r2, sp, #7
 2284 00a2 EE21     		movs	r1, #238
 2285 00a4 2846     		mov	r0, r5
 2286 00a6 FFF7FEFF 		bl	VL53L0X_RdByte
 2287              	.LVL283:
1105:Core/Src/vl53l0x_api_calibration.c **** 	} else {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 66


 2288              		.loc 1 1105 11 view .LVU753
 2289 00aa 0443     		orrs	r4, r4, r0
 2290              	.LVL284:
1105:Core/Src/vl53l0x_api_calibration.c **** 	} else {
 2291              		.loc 1 1105 11 view .LVU754
 2292 00ac 64B2     		sxtb	r4, r4
 2293              	.LVL285:
1105:Core/Src/vl53l0x_api_calibration.c **** 	} else {
 2294              		.loc 1 1105 11 view .LVU755
 2295 00ae D0E7     		b	.L170
 2296              	.L168:
1107:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
 2297              		.loc 1 1107 3 is_stmt 1 view .LVU756
1107:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
 2298              		.loc 1 1107 6 is_stmt 0 view .LVU757
 2299 00b0 BAF1000F 		cmp	r10, #0
 2300 00b4 0BD1     		bne	.L175
 2301              	.L171:
1109:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
 2302              		.loc 1 1109 3 is_stmt 1 view .LVU758
1109:Core/Src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
 2303              		.loc 1 1109 6 is_stmt 0 view .LVU759
 2304 00b6 B9F1000F 		cmp	r9, #0
 2305 00ba CAD0     		beq	.L170
1110:Core/Src/vl53l0x_api_calibration.c **** 	}
 2306              		.loc 1 1110 4 is_stmt 1 view .LVU760
1110:Core/Src/vl53l0x_api_calibration.c **** 	}
 2307              		.loc 1 1110 14 is_stmt 0 view .LVU761
 2308 00bc 3B46     		mov	r3, r7
 2309 00be 8022     		movs	r2, #128
 2310 00c0 EE21     		movs	r1, #238
 2311 00c2 2846     		mov	r0, r5
 2312 00c4 FFF7FEFF 		bl	VL53L0X_UpdateByte
 2313              	.LVL286:
1110:Core/Src/vl53l0x_api_calibration.c **** 	}
 2314              		.loc 1 1110 11 view .LVU762
 2315 00c8 0443     		orrs	r4, r4, r0
 2316              	.LVL287:
1110:Core/Src/vl53l0x_api_calibration.c **** 	}
 2317              		.loc 1 1110 11 view .LVU763
 2318 00ca 64B2     		sxtb	r4, r4
 2319              	.LVL288:
1110:Core/Src/vl53l0x_api_calibration.c **** 	}
 2320              		.loc 1 1110 11 view .LVU764
 2321 00cc C1E7     		b	.L170
 2322              	.L175:
1108:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2323              		.loc 1 1108 4 is_stmt 1 view .LVU765
1108:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2324              		.loc 1 1108 14 is_stmt 0 view .LVU766
 2325 00ce 4246     		mov	r2, r8
 2326 00d0 CB21     		movs	r1, #203
 2327 00d2 2846     		mov	r0, r5
 2328 00d4 FFF7FEFF 		bl	VL53L0X_WrByte
 2329              	.LVL289:
1108:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2330              		.loc 1 1108 11 view .LVU767
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 67


 2331 00d8 0443     		orrs	r4, r4, r0
 2332              	.LVL290:
1108:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2333              		.loc 1 1108 11 view .LVU768
 2334 00da 64B2     		sxtb	r4, r4
 2335              	.LVL291:
1108:Core/Src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2336              		.loc 1 1108 11 view .LVU769
 2337 00dc EBE7     		b	.L171
 2338              		.cfi_endproc
 2339              	.LFE150:
 2341              		.section	.text.VL53L0X_perform_vhv_calibration,"ax",%progbits
 2342              		.align	1
 2343              		.global	VL53L0X_perform_vhv_calibration
 2344              		.syntax unified
 2345              		.thumb
 2346              		.thumb_func
 2347              		.fpu fpv4-sp-d16
 2349              	VL53L0X_perform_vhv_calibration:
 2350              	.LVL292:
 2351              	.LFB151:
1121:Core/Src/vl53l0x_api_calibration.c **** 
1122:Core/Src/vl53l0x_api_calibration.c **** 
1123:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_vhv_calibration(VL53L0X_DEV Dev,
1124:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, const uint8_t get_data_enable,
1125:Core/Src/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1126:Core/Src/vl53l0x_api_calibration.c **** {
 2352              		.loc 1 1126 1 is_stmt 1 view -0
 2353              		.cfi_startproc
 2354              		@ args = 0, pretend = 0, frame = 8
 2355              		@ frame_needed = 0, uses_anonymous_args = 0
 2356              		.loc 1 1126 1 is_stmt 0 view .LVU771
 2357 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2358              		.cfi_def_cfa_offset 24
 2359              		.cfi_offset 4, -24
 2360              		.cfi_offset 5, -20
 2361              		.cfi_offset 6, -16
 2362              		.cfi_offset 7, -12
 2363              		.cfi_offset 8, -8
 2364              		.cfi_offset 14, -4
 2365 0004 86B0     		sub	sp, sp, #24
 2366              		.cfi_def_cfa_offset 48
 2367 0006 0446     		mov	r4, r0
 2368 0008 0D46     		mov	r5, r1
 2369 000a 1646     		mov	r6, r2
1127:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2370              		.loc 1 1127 2 is_stmt 1 view .LVU772
 2371              	.LVL293:
1128:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 2372              		.loc 1 1128 2 view .LVU773
1129:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2373              		.loc 1 1129 2 view .LVU774
1130:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2374              		.loc 1 1130 2 view .LVU775
1131:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalInt = 0;
 2375              		.loc 1 1131 2 view .LVU776
 2376              		.loc 1 1131 10 is_stmt 0 view .LVU777
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 68


 2377 000c 0022     		movs	r2, #0
 2378              	.LVL294:
 2379              		.loc 1 1131 10 view .LVU778
 2380 000e 8DF81720 		strb	r2, [sp, #23]
1132:Core/Src/vl53l0x_api_calibration.c **** 
1133:Core/Src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1134:Core/Src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1135:Core/Src/vl53l0x_api_calibration.c **** 	 */
1136:Core/Src/vl53l0x_api_calibration.c **** 
1137:Core/Src/vl53l0x_api_calibration.c **** 	if (restore_config)
 2381              		.loc 1 1137 2 is_stmt 1 view .LVU779
 2382              		.loc 1 1137 5 is_stmt 0 view .LVU780
 2383 0012 1F46     		mov	r7, r3
 2384 0014 13B1     		cbz	r3, .L182
1138:Core/Src/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 2385              		.loc 1 1138 3 is_stmt 1 view .LVU781
 2386              		.loc 1 1138 18 is_stmt 0 view .LVU782
 2387 0016 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 2388              	.LVL295:
 2389              		.loc 1 1138 18 view .LVU783
 2390 001a 00E0     		b	.L177
 2391              	.LVL296:
 2392              	.L182:
1128:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2393              		.loc 1 1128 10 view .LVU784
 2394 001c 9846     		mov	r8, r3
 2395              	.LVL297:
 2396              	.L177:
1139:Core/Src/vl53l0x_api_calibration.c **** 
1140:Core/Src/vl53l0x_api_calibration.c **** 	/* Run VHV */
1141:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x01);
 2397              		.loc 1 1141 2 is_stmt 1 view .LVU785
 2398              		.loc 1 1141 11 is_stmt 0 view .LVU786
 2399 001e 0122     		movs	r2, #1
 2400 0020 1146     		mov	r1, r2
 2401              	.LVL298:
 2402              		.loc 1 1141 11 view .LVU787
 2403 0022 2046     		mov	r0, r4
 2404              	.LVL299:
 2405              		.loc 1 1141 11 view .LVU788
 2406 0024 FFF7FEFF 		bl	VL53L0X_WrByte
 2407              	.LVL300:
1142:Core/Src/vl53l0x_api_calibration.c **** 
1143:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2408              		.loc 1 1143 2 is_stmt 1 view .LVU789
 2409              		.loc 1 1143 5 is_stmt 0 view .LVU790
 2410 0028 0346     		mov	r3, r0
 2411 002a 50B1     		cbz	r0, .L184
 2412              	.LVL301:
 2413              	.L178:
1144:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x40);
1145:Core/Src/vl53l0x_api_calibration.c **** 
1146:Core/Src/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1147:Core/Src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 2414              		.loc 1 1147 2 is_stmt 1 view .LVU791
 2415              		.loc 1 1147 5 is_stmt 0 view .LVU792
 2416 002c 0BB9     		cbnz	r3, .L179
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 69


 2417              		.loc 1 1147 37 discriminator 1 view .LVU793
 2418 002e 012E     		cmp	r6, #1
 2419 0030 0DD0     		beq	.L185
 2420              	.L179:
1148:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
1149:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1150:Core/Src/vl53l0x_api_calibration.c **** 			pVhvSettings, &PhaseCalInt,
1151:Core/Src/vl53l0x_api_calibration.c **** 			1, 0);
1152:Core/Src/vl53l0x_api_calibration.c **** 	} else
1153:Core/Src/vl53l0x_api_calibration.c **** 		*pVhvSettings = 0;
 2421              		.loc 1 1153 3 is_stmt 1 view .LVU794
 2422              		.loc 1 1153 17 is_stmt 0 view .LVU795
 2423 0032 0022     		movs	r2, #0
 2424 0034 2A70     		strb	r2, [r5]
 2425              	.L180:
1154:Core/Src/vl53l0x_api_calibration.c **** 
1155:Core/Src/vl53l0x_api_calibration.c **** 
1156:Core/Src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 2426              		.loc 1 1156 2 is_stmt 1 view .LVU796
 2427              		.loc 1 1156 5 is_stmt 0 view .LVU797
 2428 0036 03B9     		cbnz	r3, .L181
 2429              		.loc 1 1156 37 discriminator 1 view .LVU798
 2430 0038 BFB9     		cbnz	r7, .L186
 2431              	.LVL302:
 2432              	.L181:
1157:Core/Src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1158:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
1159:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
1160:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
1161:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
1162:Core/Src/vl53l0x_api_calibration.c **** 
1163:Core/Src/vl53l0x_api_calibration.c **** 	}
1164:Core/Src/vl53l0x_api_calibration.c **** 
1165:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 2433              		.loc 1 1165 2 is_stmt 1 view .LVU799
1166:Core/Src/vl53l0x_api_calibration.c **** }
 2434              		.loc 1 1166 1 is_stmt 0 view .LVU800
 2435 003a 1846     		mov	r0, r3
 2436 003c 06B0     		add	sp, sp, #24
 2437              		.cfi_remember_state
 2438              		.cfi_def_cfa_offset 24
 2439              		@ sp needed
 2440 003e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2441              	.LVL303:
 2442              	.L184:
 2443              		.cfi_restore_state
1144:Core/Src/vl53l0x_api_calibration.c **** 
 2444              		.loc 1 1144 3 is_stmt 1 view .LVU801
1144:Core/Src/vl53l0x_api_calibration.c **** 
 2445              		.loc 1 1144 12 is_stmt 0 view .LVU802
 2446 0042 4021     		movs	r1, #64
 2447 0044 2046     		mov	r0, r4
 2448              	.LVL304:
1144:Core/Src/vl53l0x_api_calibration.c **** 
 2449              		.loc 1 1144 12 view .LVU803
 2450 0046 FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 2451              	.LVL305:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 70


 2452 004a 0346     		mov	r3, r0
 2453              	.LVL306:
1144:Core/Src/vl53l0x_api_calibration.c **** 
 2454              		.loc 1 1144 12 view .LVU804
 2455 004c EEE7     		b	.L178
 2456              	.L185:
1148:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2457              		.loc 1 1148 3 is_stmt 1 view .LVU805
1148:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2458              		.loc 1 1148 12 is_stmt 0 view .LVU806
 2459 004e 0022     		movs	r2, #0
 2460 0050 0392     		str	r2, [sp, #12]
 2461 0052 0121     		movs	r1, #1
 2462 0054 0291     		str	r1, [sp, #8]
 2463 0056 0DF11703 		add	r3, sp, #23
 2464              	.LVL307:
1148:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2465              		.loc 1 1148 12 view .LVU807
 2466 005a 0193     		str	r3, [sp, #4]
 2467 005c 0095     		str	r5, [sp]
 2468 005e 1346     		mov	r3, r2
 2469 0060 2046     		mov	r0, r4
 2470 0062 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2471              	.LVL308:
 2472 0066 0346     		mov	r3, r0
 2473              	.LVL309:
1148:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2474              		.loc 1 1148 10 view .LVU808
 2475 0068 E5E7     		b	.L180
 2476              	.L186:
1158:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2477              		.loc 1 1158 3 is_stmt 1 view .LVU809
1158:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2478              		.loc 1 1158 12 is_stmt 0 view .LVU810
 2479 006a 4246     		mov	r2, r8
 2480 006c 0121     		movs	r1, #1
 2481 006e 2046     		mov	r0, r4
 2482 0070 FFF7FEFF 		bl	VL53L0X_WrByte
 2483              	.LVL310:
1160:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2484              		.loc 1 1160 3 is_stmt 1 view .LVU811
1160:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2485              		.loc 1 1160 6 is_stmt 0 view .LVU812
 2486 0074 0346     		mov	r3, r0
 2487 0076 0028     		cmp	r0, #0
 2488 0078 DFD1     		bne	.L181
1161:Core/Src/vl53l0x_api_calibration.c **** 
 2489              		.loc 1 1161 4 is_stmt 1 view .LVU813
 2490 007a 84F83081 		strb	r8, [r4, #304]
 2491 007e DCE7     		b	.L181
 2492              		.cfi_endproc
 2493              	.LFE151:
 2495              		.section	.text.VL53L0X_perform_phase_calibration,"ax",%progbits
 2496              		.align	1
 2497              		.global	VL53L0X_perform_phase_calibration
 2498              		.syntax unified
 2499              		.thumb
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 71


 2500              		.thumb_func
 2501              		.fpu fpv4-sp-d16
 2503              	VL53L0X_perform_phase_calibration:
 2504              	.LVL311:
 2505              	.LFB152:
1167:Core/Src/vl53l0x_api_calibration.c **** 
1168:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_phase_calibration(VL53L0X_DEV Dev,
1169:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t *pPhaseCal, const uint8_t get_data_enable,
1170:Core/Src/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1171:Core/Src/vl53l0x_api_calibration.c **** {
 2506              		.loc 1 1171 1 view -0
 2507              		.cfi_startproc
 2508              		@ args = 0, pretend = 0, frame = 8
 2509              		@ frame_needed = 0, uses_anonymous_args = 0
 2510              		.loc 1 1171 1 is_stmt 0 view .LVU815
 2511 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2512              		.cfi_def_cfa_offset 24
 2513              		.cfi_offset 4, -24
 2514              		.cfi_offset 5, -20
 2515              		.cfi_offset 6, -16
 2516              		.cfi_offset 7, -12
 2517              		.cfi_offset 8, -8
 2518              		.cfi_offset 14, -4
 2519 0004 86B0     		sub	sp, sp, #24
 2520              		.cfi_def_cfa_offset 48
 2521 0006 0446     		mov	r4, r0
 2522 0008 0D46     		mov	r5, r1
 2523 000a 1646     		mov	r6, r2
1172:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2524              		.loc 1 1172 2 is_stmt 1 view .LVU816
 2525              	.LVL312:
1173:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 2526              		.loc 1 1173 2 view .LVU817
1174:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2527              		.loc 1 1174 2 view .LVU818
1175:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2528              		.loc 1 1175 2 view .LVU819
1176:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettingsint;
 2529              		.loc 1 1176 2 view .LVU820
1177:Core/Src/vl53l0x_api_calibration.c **** 
1178:Core/Src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1179:Core/Src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1180:Core/Src/vl53l0x_api_calibration.c **** 	 */
1181:Core/Src/vl53l0x_api_calibration.c **** 
1182:Core/Src/vl53l0x_api_calibration.c **** 	if (restore_config)
 2530              		.loc 1 1182 2 view .LVU821
 2531              		.loc 1 1182 5 is_stmt 0 view .LVU822
 2532 000c 1F46     		mov	r7, r3
 2533 000e 13B1     		cbz	r3, .L193
1183:Core/Src/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 2534              		.loc 1 1183 3 is_stmt 1 view .LVU823
 2535              		.loc 1 1183 18 is_stmt 0 view .LVU824
 2536 0010 90F83081 		ldrb	r8, [r0, #304]	@ zero_extendqisi2
 2537              	.LVL313:
 2538              		.loc 1 1183 18 view .LVU825
 2539 0014 00E0     		b	.L188
 2540              	.LVL314:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 72


 2541              	.L193:
1173:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2542              		.loc 1 1173 10 view .LVU826
 2543 0016 9846     		mov	r8, r3
 2544              	.LVL315:
 2545              	.L188:
1184:Core/Src/vl53l0x_api_calibration.c **** 
1185:Core/Src/vl53l0x_api_calibration.c **** 	/* Run PhaseCal */
1186:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x02);
 2546              		.loc 1 1186 2 is_stmt 1 view .LVU827
 2547              		.loc 1 1186 11 is_stmt 0 view .LVU828
 2548 0018 0222     		movs	r2, #2
 2549              	.LVL316:
 2550              		.loc 1 1186 11 view .LVU829
 2551 001a 0121     		movs	r1, #1
 2552              	.LVL317:
 2553              		.loc 1 1186 11 view .LVU830
 2554 001c 2046     		mov	r0, r4
 2555              	.LVL318:
 2556              		.loc 1 1186 11 view .LVU831
 2557 001e FFF7FEFF 		bl	VL53L0X_WrByte
 2558              	.LVL319:
1187:Core/Src/vl53l0x_api_calibration.c **** 
1188:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2559              		.loc 1 1188 2 is_stmt 1 view .LVU832
 2560              		.loc 1 1188 5 is_stmt 0 view .LVU833
 2561 0022 0346     		mov	r3, r0
 2562 0024 50B1     		cbz	r0, .L195
 2563              	.LVL320:
 2564              	.L189:
1189:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x0);
1190:Core/Src/vl53l0x_api_calibration.c **** 
1191:Core/Src/vl53l0x_api_calibration.c **** 	/* Read PhaseCal from device */
1192:Core/Src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 2565              		.loc 1 1192 2 is_stmt 1 view .LVU834
 2566              		.loc 1 1192 5 is_stmt 0 view .LVU835
 2567 0026 0BB9     		cbnz	r3, .L190
 2568              		.loc 1 1192 37 discriminator 1 view .LVU836
 2569 0028 012E     		cmp	r6, #1
 2570 002a 0DD0     		beq	.L196
 2571              	.L190:
1193:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
1194:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1195:Core/Src/vl53l0x_api_calibration.c **** 			&VhvSettingsint, pPhaseCal,
1196:Core/Src/vl53l0x_api_calibration.c **** 			0, 1);
1197:Core/Src/vl53l0x_api_calibration.c **** 	} else
1198:Core/Src/vl53l0x_api_calibration.c **** 		*pPhaseCal = 0;
 2572              		.loc 1 1198 3 is_stmt 1 view .LVU837
 2573              		.loc 1 1198 14 is_stmt 0 view .LVU838
 2574 002c 0022     		movs	r2, #0
 2575 002e 2A70     		strb	r2, [r5]
 2576              	.L191:
1199:Core/Src/vl53l0x_api_calibration.c **** 
1200:Core/Src/vl53l0x_api_calibration.c **** 
1201:Core/Src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 2577              		.loc 1 1201 2 is_stmt 1 view .LVU839
 2578              		.loc 1 1201 5 is_stmt 0 view .LVU840
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 73


 2579 0030 03B9     		cbnz	r3, .L192
 2580              		.loc 1 1201 37 discriminator 1 view .LVU841
 2581 0032 BFB9     		cbnz	r7, .L197
 2582              	.LVL321:
 2583              	.L192:
1202:Core/Src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1203:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
1204:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
1205:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
1206:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
1207:Core/Src/vl53l0x_api_calibration.c **** 
1208:Core/Src/vl53l0x_api_calibration.c **** 	}
1209:Core/Src/vl53l0x_api_calibration.c **** 
1210:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 2584              		.loc 1 1210 2 is_stmt 1 view .LVU842
1211:Core/Src/vl53l0x_api_calibration.c **** }
 2585              		.loc 1 1211 1 is_stmt 0 view .LVU843
 2586 0034 1846     		mov	r0, r3
 2587 0036 06B0     		add	sp, sp, #24
 2588              		.cfi_remember_state
 2589              		.cfi_def_cfa_offset 24
 2590              		@ sp needed
 2591 0038 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2592              	.LVL322:
 2593              	.L195:
 2594              		.cfi_restore_state
1189:Core/Src/vl53l0x_api_calibration.c **** 
 2595              		.loc 1 1189 3 is_stmt 1 view .LVU844
1189:Core/Src/vl53l0x_api_calibration.c **** 
 2596              		.loc 1 1189 12 is_stmt 0 view .LVU845
 2597 003c 0021     		movs	r1, #0
 2598 003e 2046     		mov	r0, r4
 2599              	.LVL323:
1189:Core/Src/vl53l0x_api_calibration.c **** 
 2600              		.loc 1 1189 12 view .LVU846
 2601 0040 FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 2602              	.LVL324:
 2603 0044 0346     		mov	r3, r0
 2604              	.LVL325:
1189:Core/Src/vl53l0x_api_calibration.c **** 
 2605              		.loc 1 1189 12 view .LVU847
 2606 0046 EEE7     		b	.L189
 2607              	.L196:
1193:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2608              		.loc 1 1193 3 is_stmt 1 view .LVU848
1193:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2609              		.loc 1 1193 12 is_stmt 0 view .LVU849
 2610 0048 0121     		movs	r1, #1
 2611 004a 0391     		str	r1, [sp, #12]
 2612 004c 0022     		movs	r2, #0
 2613 004e 0292     		str	r2, [sp, #8]
 2614 0050 0195     		str	r5, [sp, #4]
 2615 0052 0DF11703 		add	r3, sp, #23
 2616              	.LVL326:
1193:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2617              		.loc 1 1193 12 view .LVU850
 2618 0056 0093     		str	r3, [sp]
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 74


 2619 0058 1346     		mov	r3, r2
 2620 005a 2046     		mov	r0, r4
 2621 005c FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 2622              	.LVL327:
 2623 0060 0346     		mov	r3, r0
 2624              	.LVL328:
1193:Core/Src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
 2625              		.loc 1 1193 10 view .LVU851
 2626 0062 E5E7     		b	.L191
 2627              	.L197:
1203:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2628              		.loc 1 1203 3 is_stmt 1 view .LVU852
1203:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2629              		.loc 1 1203 12 is_stmt 0 view .LVU853
 2630 0064 4246     		mov	r2, r8
 2631 0066 0121     		movs	r1, #1
 2632 0068 2046     		mov	r0, r4
 2633 006a FFF7FEFF 		bl	VL53L0X_WrByte
 2634              	.LVL329:
1205:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2635              		.loc 1 1205 3 is_stmt 1 view .LVU854
1205:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2636              		.loc 1 1205 6 is_stmt 0 view .LVU855
 2637 006e 0346     		mov	r3, r0
 2638 0070 0028     		cmp	r0, #0
 2639 0072 DFD1     		bne	.L192
1206:Core/Src/vl53l0x_api_calibration.c **** 
 2640              		.loc 1 1206 4 is_stmt 1 view .LVU856
 2641 0074 84F83081 		strb	r8, [r4, #304]
 2642 0078 DCE7     		b	.L192
 2643              		.cfi_endproc
 2644              	.LFE152:
 2646              		.section	.text.VL53L0X_perform_ref_calibration,"ax",%progbits
 2647              		.align	1
 2648              		.global	VL53L0X_perform_ref_calibration
 2649              		.syntax unified
 2650              		.thumb
 2651              		.thumb_func
 2652              		.fpu fpv4-sp-d16
 2654              	VL53L0X_perform_ref_calibration:
 2655              	.LVL330:
 2656              	.LFB153:
1212:Core/Src/vl53l0x_api_calibration.c **** 
1213:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_calibration(VL53L0X_DEV Dev,
1214:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal, uint8_t get_data_enable)
1215:Core/Src/vl53l0x_api_calibration.c **** {
 2657              		.loc 1 1215 1 view -0
 2658              		.cfi_startproc
 2659              		@ args = 0, pretend = 0, frame = 0
 2660              		@ frame_needed = 0, uses_anonymous_args = 0
 2661              		.loc 1 1215 1 is_stmt 0 view .LVU858
 2662 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2663              		.cfi_def_cfa_offset 24
 2664              		.cfi_offset 3, -24
 2665              		.cfi_offset 4, -20
 2666              		.cfi_offset 5, -16
 2667              		.cfi_offset 6, -12
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 75


 2668              		.cfi_offset 7, -8
 2669              		.cfi_offset 14, -4
 2670 0002 0446     		mov	r4, r0
 2671 0004 1646     		mov	r6, r2
 2672 0006 1D46     		mov	r5, r3
1216:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2673              		.loc 1 1216 2 is_stmt 1 view .LVU859
 2674              	.LVL331:
1217:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 2675              		.loc 1 1217 2 view .LVU860
1218:Core/Src/vl53l0x_api_calibration.c **** 
1219:Core/Src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1220:Core/Src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1221:Core/Src/vl53l0x_api_calibration.c **** 	 */
1222:Core/Src/vl53l0x_api_calibration.c **** 
1223:Core/Src/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 2676              		.loc 1 1223 2 view .LVU861
 2677              		.loc 1 1223 17 is_stmt 0 view .LVU862
 2678 0008 90F83071 		ldrb	r7, [r0, #304]	@ zero_extendqisi2
 2679              	.LVL332:
1224:Core/Src/vl53l0x_api_calibration.c **** 
1225:Core/Src/vl53l0x_api_calibration.c **** 	/* In the following function we don't save the config to optimize
1226:Core/Src/vl53l0x_api_calibration.c **** 	 * writes on device. Config is saved and restored only once. */
1227:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_perform_vhv_calibration(
 2680              		.loc 1 1227 2 is_stmt 1 view .LVU863
 2681              		.loc 1 1227 11 is_stmt 0 view .LVU864
 2682 000c 0023     		movs	r3, #0
 2683              	.LVL333:
 2684              		.loc 1 1227 11 view .LVU865
 2685 000e 2A46     		mov	r2, r5
 2686              	.LVL334:
 2687              		.loc 1 1227 11 view .LVU866
 2688 0010 FFF7FEFF 		bl	VL53L0X_perform_vhv_calibration
 2689              	.LVL335:
1228:Core/Src/vl53l0x_api_calibration.c **** 			Dev, pVhvSettings, get_data_enable, 0);
1229:Core/Src/vl53l0x_api_calibration.c **** 
1230:Core/Src/vl53l0x_api_calibration.c **** 
1231:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2690              		.loc 1 1231 2 is_stmt 1 view .LVU867
 2691              		.loc 1 1231 5 is_stmt 0 view .LVU868
 2692 0014 0346     		mov	r3, r0
 2693 0016 10B1     		cbz	r0, .L202
 2694              	.LVL336:
 2695              	.L199:
1232:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
1233:Core/Src/vl53l0x_api_calibration.c **** 			Dev, pPhaseCal, get_data_enable, 0);
1234:Core/Src/vl53l0x_api_calibration.c **** 
1235:Core/Src/vl53l0x_api_calibration.c **** 
1236:Core/Src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 2696              		.loc 1 1236 2 is_stmt 1 view .LVU869
 2697              		.loc 1 1236 5 is_stmt 0 view .LVU870
 2698 0018 4BB1     		cbz	r3, .L203
 2699              	.LVL337:
 2700              	.L200:
1237:Core/Src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1238:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
1239:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 76


1240:Core/Src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
1241:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
1242:Core/Src/vl53l0x_api_calibration.c **** 
1243:Core/Src/vl53l0x_api_calibration.c **** 	}
1244:Core/Src/vl53l0x_api_calibration.c **** 
1245:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 2701              		.loc 1 1245 2 is_stmt 1 view .LVU871
1246:Core/Src/vl53l0x_api_calibration.c **** }
 2702              		.loc 1 1246 1 is_stmt 0 view .LVU872
 2703 001a 1846     		mov	r0, r3
 2704 001c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2705              	.LVL338:
 2706              	.L202:
1232:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 2707              		.loc 1 1232 3 is_stmt 1 view .LVU873
1232:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 2708              		.loc 1 1232 12 is_stmt 0 view .LVU874
 2709 001e 0023     		movs	r3, #0
 2710 0020 2A46     		mov	r2, r5
 2711 0022 3146     		mov	r1, r6
 2712 0024 2046     		mov	r0, r4
 2713              	.LVL339:
1232:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 2714              		.loc 1 1232 12 view .LVU875
 2715 0026 FFF7FEFF 		bl	VL53L0X_perform_phase_calibration
 2716              	.LVL340:
 2717 002a 0346     		mov	r3, r0
 2718              	.LVL341:
1232:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 2719              		.loc 1 1232 12 view .LVU876
 2720 002c F4E7     		b	.L199
 2721              	.L203:
1238:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2722              		.loc 1 1238 3 is_stmt 1 view .LVU877
1238:Core/Src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 2723              		.loc 1 1238 12 is_stmt 0 view .LVU878
 2724 002e 3A46     		mov	r2, r7
 2725 0030 0121     		movs	r1, #1
 2726 0032 2046     		mov	r0, r4
 2727 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 2728              	.LVL342:
1240:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2729              		.loc 1 1240 3 is_stmt 1 view .LVU879
1240:Core/Src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 2730              		.loc 1 1240 6 is_stmt 0 view .LVU880
 2731 0038 0346     		mov	r3, r0
 2732 003a 0028     		cmp	r0, #0
 2733 003c EDD1     		bne	.L200
1241:Core/Src/vl53l0x_api_calibration.c **** 
 2734              		.loc 1 1241 4 is_stmt 1 view .LVU881
 2735 003e 84F83071 		strb	r7, [r4, #304]
 2736 0042 EAE7     		b	.L200
 2737              		.cfi_endproc
 2738              	.LFE153:
 2740              		.section	.text.VL53L0X_perform_ref_spad_management,"ax",%progbits
 2741              		.align	1
 2742              		.global	VL53L0X_perform_ref_spad_management
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 77


 2743              		.syntax unified
 2744              		.thumb
 2745              		.thumb_func
 2746              		.fpu fpv4-sp-d16
 2748              	VL53L0X_perform_ref_spad_management:
 2749              	.LVL343:
 2750              	.LFB146:
 679:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2751              		.loc 1 679 1 view -0
 2752              		.cfi_startproc
 2753              		@ args = 0, pretend = 0, frame = 56
 2754              		@ frame_needed = 0, uses_anonymous_args = 0
 679:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2755              		.loc 1 679 1 is_stmt 0 view .LVU883
 2756 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2757              		.cfi_def_cfa_offset 36
 2758              		.cfi_offset 4, -36
 2759              		.cfi_offset 5, -32
 2760              		.cfi_offset 6, -28
 2761              		.cfi_offset 7, -24
 2762              		.cfi_offset 8, -20
 2763              		.cfi_offset 9, -16
 2764              		.cfi_offset 10, -12
 2765              		.cfi_offset 11, -8
 2766              		.cfi_offset 14, -4
 2767 0004 95B0     		sub	sp, sp, #84
 2768              		.cfi_def_cfa_offset 120
 2769 0006 0546     		mov	r5, r0
 2770 0008 0C91     		str	r1, [sp, #48]
 2771 000a 0D92     		str	r2, [sp, #52]
 680:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t lastSpadArray[6];
 2772              		.loc 1 680 2 is_stmt 1 view .LVU884
 2773              	.LVL344:
 681:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 2774              		.loc 1 681 2 view .LVU885
 682:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t minimumSpadCount = 3;
 2775              		.loc 1 682 2 view .LVU886
 683:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 2776              		.loc 1 683 2 view .LVU887
 684:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 2777              		.loc 1 684 2 view .LVU888
 685:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex = 0;
 2778              		.loc 1 685 2 view .LVU889
 686:Core/Src/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 2779              		.loc 1 686 2 view .LVU890
 686:Core/Src/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 2780              		.loc 1 686 11 is_stmt 0 view .LVU891
 2781 000c 0023     		movs	r3, #0
 2782 000e 1193     		str	r3, [sp, #68]
 687:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 2783              		.loc 1 687 2 is_stmt 1 view .LVU892
 687:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 2784              		.loc 1 687 10 is_stmt 0 view .LVU893
 2785 0010 1093     		str	r3, [sp, #64]
 688:Core/Src/vl53l0x_api_calibration.c **** 	uint16_t peakSignalRateRef;
 2786              		.loc 1 688 2 is_stmt 1 view .LVU894
 2787              	.LVL345:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 78


 689:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t needAptSpads = 0;
 2788              		.loc 1 689 2 view .LVU895
 690:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t index = 0;
 2789              		.loc 1 690 2 view .LVU896
 691:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 2790              		.loc 1 691 2 view .LVU897
 692:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t signalRateDiff = 0;
 2791              		.loc 1 692 2 view .LVU898
 693:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t lastSignalRateDiff = 0;
 2792              		.loc 1 693 2 view .LVU899
 694:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t complete = 0;
 2793              		.loc 1 694 2 view .LVU900
 695:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2794              		.loc 1 695 2 view .LVU901
 696:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2795              		.loc 1 696 2 view .LVU902
 696:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2796              		.loc 1 696 10 is_stmt 0 view .LVU903
 2797 0012 8DF83D30 		strb	r3, [sp, #61]
 697:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 2798              		.loc 1 697 2 is_stmt 1 view .LVU904
 697:Core/Src/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 2799              		.loc 1 697 10 is_stmt 0 view .LVU905
 2800 0016 8DF83C30 		strb	r3, [sp, #60]
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2801              		.loc 1 698 2 is_stmt 1 view .LVU906
 2802              	.LVL346:
 699:Core/Src/vl53l0x_api_calibration.c **** 
 2803              		.loc 1 699 2 view .LVU907
 724:Core/Src/vl53l0x_api_calibration.c **** 
 2804              		.loc 1 724 2 view .LVU908
 724:Core/Src/vl53l0x_api_calibration.c **** 
 2805              		.loc 1 724 16 is_stmt 0 view .LVU909
 2806 001a B0F83CA1 		ldrh	r10, [r0, #316]
 2807              	.LVL347:
 734:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2808              		.loc 1 734 2 is_stmt 1 view .LVU910
 2809              	.L205:
 734:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2810              		.loc 1 734 18 discriminator 1 view .LVU911
 734:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2811              		.loc 1 734 2 is_stmt 0 discriminator 1 view .LVU912
 2812 001e 052B     		cmp	r3, #5
 2813 0020 05D8     		bhi	.L239
 735:Core/Src/vl53l0x_api_calibration.c **** 
 2814              		.loc 1 735 3 is_stmt 1 discriminator 3 view .LVU913
 735:Core/Src/vl53l0x_api_calibration.c **** 
 2815              		.loc 1 735 44 is_stmt 0 discriminator 3 view .LVU914
 2816 0022 EA18     		adds	r2, r5, r3
 2817 0024 0021     		movs	r1, #0
 2818 0026 82F82411 		strb	r1, [r2, #292]
 734:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2819              		.loc 1 734 41 is_stmt 1 discriminator 3 view .LVU915
 734:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2820              		.loc 1 734 46 is_stmt 0 discriminator 3 view .LVU916
 2821 002a 0133     		adds	r3, r3, #1
 2822              	.LVL348:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 79


 734:Core/Src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2823              		.loc 1 734 46 discriminator 3 view .LVU917
 2824 002c F7E7     		b	.L205
 2825              	.L239:
 738:Core/Src/vl53l0x_api_calibration.c **** 
 2826              		.loc 1 738 2 is_stmt 1 view .LVU918
 738:Core/Src/vl53l0x_api_calibration.c **** 
 2827              		.loc 1 738 11 is_stmt 0 view .LVU919
 2828 002e 0122     		movs	r2, #1
 2829 0030 FF21     		movs	r1, #255
 2830 0032 2846     		mov	r0, r5
 2831              	.LVL349:
 738:Core/Src/vl53l0x_api_calibration.c **** 
 2832              		.loc 1 738 11 view .LVU920
 2833 0034 FFF7FEFF 		bl	VL53L0X_WrByte
 2834              	.LVL350:
 740:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2835              		.loc 1 740 2 is_stmt 1 view .LVU921
 740:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2836              		.loc 1 740 5 is_stmt 0 view .LVU922
 2837 0038 0446     		mov	r4, r0
 2838 003a 0028     		cmp	r0, #0
 2839 003c 31D0     		beq	.L240
 2840              	.LVL351:
 2841              	.L207:
 744:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2842              		.loc 1 744 2 is_stmt 1 view .LVU923
 744:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2843              		.loc 1 744 5 is_stmt 0 view .LVU924
 2844 003e 002C     		cmp	r4, #0
 2845 0040 36D0     		beq	.L241
 2846              	.L208:
 748:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2847              		.loc 1 748 2 is_stmt 1 view .LVU925
 748:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2848              		.loc 1 748 5 is_stmt 0 view .LVU926
 2849 0042 002C     		cmp	r4, #0
 2850 0044 3BD0     		beq	.L242
 2851              	.L209:
 751:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2852              		.loc 1 751 2 is_stmt 1 view .LVU927
 751:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2853              		.loc 1 751 5 is_stmt 0 view .LVU928
 2854 0046 002C     		cmp	r4, #0
 2855 0048 40D0     		beq	.L243
 2856              	.L210:
 757:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2857              		.loc 1 757 2 is_stmt 1 view .LVU929
 757:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2858              		.loc 1 757 5 is_stmt 0 view .LVU930
 2859 004a 002C     		cmp	r4, #0
 2860 004c 45D0     		beq	.L244
 2861              	.L211:
 762:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 2862              		.loc 1 762 2 is_stmt 1 view .LVU931
 762:Core/Src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 2863              		.loc 1 762 5 is_stmt 0 view .LVU932
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 80


 2864 004e 002C     		cmp	r4, #0
 2865 0050 4AD0     		beq	.L245
 2866              	.L212:
 766:Core/Src/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 2867              		.loc 1 766 2 is_stmt 1 view .LVU933
 766:Core/Src/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 2868              		.loc 1 766 5 is_stmt 0 view .LVU934
 2869 0052 002C     		cmp	r4, #0
 2870 0054 51D0     		beq	.L246
 2871              	.L213:
 782:Core/Src/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 2872              		.loc 1 782 2 is_stmt 1 view .LVU935
 782:Core/Src/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 2873              		.loc 1 782 5 is_stmt 0 view .LVU936
 2874 0056 002C     		cmp	r4, #0
 2875 0058 63D0     		beq	.L247
 699:Core/Src/vl53l0x_api_calibration.c **** 
 2876              		.loc 1 699 11 view .LVU937
 2877 005a 0023     		movs	r3, #0
 2878 005c 1F46     		mov	r7, r3
 2879 005e 0B93     		str	r3, [sp, #44]
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 2880              		.loc 1 698 11 view .LVU938
 2881 0060 9846     		mov	r8, r3
 2882 0062 0893     		str	r3, [sp, #32]
 2883              	.LVL352:
 2884              	.L214:
 836:Core/Src/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2885              		.loc 1 836 2 is_stmt 1 view .LVU939
 836:Core/Src/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2886              		.loc 1 836 5 is_stmt 0 view .LVU940
 2887 0064 002C     		cmp	r4, #0
 2888 0066 40F01A81 		bne	.L220
 837:Core/Src/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 2889              		.loc 1 837 22 discriminator 1 view .LVU941
 2890 006a BDF83E30 		ldrh	r3, [sp, #62]
 836:Core/Src/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2891              		.loc 1 836 37 discriminator 1 view .LVU942
 2892 006e 5345     		cmp	r3, r10
 2893 0070 80F01581 		bcs	.L220
 843:Core/Src/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 2894              		.loc 1 843 3 is_stmt 1 view .LVU943
 843:Core/Src/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 2895              		.loc 1 843 23 is_stmt 0 view .LVU944
 2896 0074 9DF82020 		ldrb	r2, [sp, #32]	@ zero_extendqisi2
 2897 0078 0B92     		str	r2, [sp, #44]
 2898              	.LVL353:
 844:Core/Src/vl53l0x_api_calibration.c **** 
 2899              		.loc 1 844 3 is_stmt 1 view .LVU945
 846:Core/Src/vl53l0x_api_calibration.c **** 				spadArraySize);
 2900              		.loc 1 846 3 view .LVU946
 2901 007a D5F82401 		ldr	r0, [r5, #292]	@ unaligned
 2902 007e 1290     		str	r0, [sp, #72]
 2903 0080 B5F82821 		ldrh	r2, [r5, #296]	@ unaligned
 2904 0084 ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 848:Core/Src/vl53l0x_api_calibration.c **** 			targetRefRate);
 2905              		.loc 1 848 3 view .LVU947
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 81


 848:Core/Src/vl53l0x_api_calibration.c **** 			targetRefRate);
 2906              		.loc 1 848 46 is_stmt 0 view .LVU948
 2907 0088 CDF824A0 		str	r10, [sp, #36]
 2908 008c A3EB0A03 		sub	r3, r3, r10
 848:Core/Src/vl53l0x_api_calibration.c **** 			targetRefRate);
 2909              		.loc 1 848 22 view .LVU949
 2910 0090 002B     		cmp	r3, #0
 2911 0092 B8BF     		it	lt
 2912 0094 5B42     		rsblt	r3, r3, #0
 2913 0096 0A93     		str	r3, [sp, #40]
 2914              	.LVL354:
 850:Core/Src/vl53l0x_api_calibration.c **** 
 2915              		.loc 1 850 3 is_stmt 1 view .LVU950
 852:Core/Src/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2916              		.loc 1 852 3 view .LVU951
 844:Core/Src/vl53l0x_api_calibration.c **** 
 2917              		.loc 1 844 20 is_stmt 0 view .LVU952
 2918 0098 4FF00308 		mov	r8, #3
 850:Core/Src/vl53l0x_api_calibration.c **** 
 2919              		.loc 1 850 12 view .LVU953
 2920 009c 4FF0000B 		mov	fp, #0
 852:Core/Src/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2921              		.loc 1 852 9 view .LVU954
 2922 00a0 C1E0     		b	.L221
 2923              	.LVL355:
 2924              	.L240:
 741:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 2925              		.loc 1 741 3 is_stmt 1 view .LVU955
 741:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 2926              		.loc 1 741 12 is_stmt 0 view .LVU956
 2927 00a2 0022     		movs	r2, #0
 2928 00a4 4F21     		movs	r1, #79
 2929 00a6 2846     		mov	r0, r5
 2930              	.LVL356:
 741:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 2931              		.loc 1 741 12 view .LVU957
 2932 00a8 FFF7FEFF 		bl	VL53L0X_WrByte
 2933              	.LVL357:
 2934 00ac 0446     		mov	r4, r0
 2935              	.LVL358:
 741:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 2936              		.loc 1 741 12 view .LVU958
 2937 00ae C6E7     		b	.L207
 2938              	.L241:
 745:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 2939              		.loc 1 745 3 is_stmt 1 view .LVU959
 745:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 2940              		.loc 1 745 12 is_stmt 0 view .LVU960
 2941 00b0 2C22     		movs	r2, #44
 2942 00b2 4E21     		movs	r1, #78
 2943 00b4 2846     		mov	r0, r5
 2944 00b6 FFF7FEFF 		bl	VL53L0X_WrByte
 2945              	.LVL359:
 2946 00ba 0446     		mov	r4, r0
 2947              	.LVL360:
 745:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 2948              		.loc 1 745 12 view .LVU961
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 82


 2949 00bc C1E7     		b	.L208
 2950              	.L242:
 749:Core/Src/vl53l0x_api_calibration.c **** 
 2951              		.loc 1 749 3 is_stmt 1 view .LVU962
 749:Core/Src/vl53l0x_api_calibration.c **** 
 2952              		.loc 1 749 12 is_stmt 0 view .LVU963
 2953 00be 0022     		movs	r2, #0
 2954 00c0 FF21     		movs	r1, #255
 2955 00c2 2846     		mov	r0, r5
 2956 00c4 FFF7FEFF 		bl	VL53L0X_WrByte
 2957              	.LVL361:
 2958 00c8 0446     		mov	r4, r0
 2959              	.LVL362:
 749:Core/Src/vl53l0x_api_calibration.c **** 
 2960              		.loc 1 749 12 view .LVU964
 2961 00ca BCE7     		b	.L209
 2962              	.L243:
 752:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 2963              		.loc 1 752 3 is_stmt 1 view .LVU965
 752:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 2964              		.loc 1 752 12 is_stmt 0 view .LVU966
 2965 00cc B422     		movs	r2, #180
 2966 00ce B621     		movs	r1, #182
 2967 00d0 2846     		mov	r0, r5
 2968 00d2 FFF7FEFF 		bl	VL53L0X_WrByte
 2969              	.LVL363:
 2970 00d6 0446     		mov	r4, r0
 2971              	.LVL364:
 752:Core/Src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 2972              		.loc 1 752 12 view .LVU967
 2973 00d8 B7E7     		b	.L210
 2974              	.L244:
 758:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 2975              		.loc 1 758 3 is_stmt 1 view .LVU968
 758:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 2976              		.loc 1 758 12 is_stmt 0 view .LVU969
 2977 00da 0022     		movs	r2, #0
 2978 00dc 8021     		movs	r1, #128
 2979 00de 2846     		mov	r0, r5
 2980 00e0 FFF7FEFF 		bl	VL53L0X_WrByte
 2981              	.LVL365:
 2982 00e4 0446     		mov	r4, r0
 2983              	.LVL366:
 758:Core/Src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 2984              		.loc 1 758 12 view .LVU970
 2985 00e6 B2E7     		b	.L211
 2986              	.L245:
 763:Core/Src/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 2987              		.loc 1 763 3 is_stmt 1 view .LVU971
 763:Core/Src/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 2988              		.loc 1 763 12 is_stmt 0 view .LVU972
 2989 00e8 0023     		movs	r3, #0
 2990 00ea 0FAA     		add	r2, sp, #60
 2991 00ec 0DF13D01 		add	r1, sp, #61
 2992 00f0 2846     		mov	r0, r5
 2993 00f2 FFF7FEFF 		bl	VL53L0X_perform_ref_calibration
 2994              	.LVL367:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 83


 2995 00f6 0446     		mov	r4, r0
 2996              	.LVL368:
 763:Core/Src/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 2997              		.loc 1 763 12 view .LVU973
 2998 00f8 ABE7     		b	.L212
 2999              	.L246:
 768:Core/Src/vl53l0x_api_calibration.c **** 		lastSpadIndex = currentSpadIndex;
 3000              		.loc 1 768 3 is_stmt 1 view .LVU974
 769:Core/Src/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 3001              		.loc 1 769 3 view .LVU975
 769:Core/Src/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 3002              		.loc 1 769 17 is_stmt 0 view .LVU976
 3003 00fa 0021     		movs	r1, #0
 3004 00fc 1191     		str	r1, [sp, #68]
 770:Core/Src/vl53l0x_api_calibration.c **** 		Status = enable_ref_spads(Dev,
 3005              		.loc 1 770 3 is_stmt 1 view .LVU977
 771:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads,
 3006              		.loc 1 771 3 view .LVU978
 771:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads,
 3007              		.loc 1 771 12 is_stmt 0 view .LVU979
 3008 00fe 11AB     		add	r3, sp, #68
 3009 0100 0493     		str	r3, [sp, #16]
 3010 0102 0323     		movs	r3, #3
 3011 0104 0393     		str	r3, [sp, #12]
 3012 0106 0291     		str	r1, [sp, #8]
 3013 0108 B423     		movs	r3, #180
 3014 010a 0193     		str	r3, [sp, #4]
 3015 010c 0623     		movs	r3, #6
 3016 010e 0093     		str	r3, [sp]
 3017 0110 05F59273 		add	r3, r5, #292
 3018 0114 05F59572 		add	r2, r5, #298
 3019 0118 2846     		mov	r0, r5
 3020 011a FFF7FEFF 		bl	enable_ref_spads
 3021              	.LVL369:
 3022 011e 0446     		mov	r4, r0
 3023              	.LVL370:
 771:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads,
 3024              		.loc 1 771 12 view .LVU980
 3025 0120 99E7     		b	.L213
 3026              	.L247:
 783:Core/Src/vl53l0x_api_calibration.c **** 
 3027              		.loc 1 783 3 is_stmt 1 view .LVU981
 783:Core/Src/vl53l0x_api_calibration.c **** 
 3028              		.loc 1 783 20 is_stmt 0 view .LVU982
 3029 0122 119F     		ldr	r7, [sp, #68]
 3030              	.LVL371:
 785:Core/Src/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 3031              		.loc 1 785 3 is_stmt 1 view .LVU983
 785:Core/Src/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 3032              		.loc 1 785 12 is_stmt 0 view .LVU984
 3033 0124 0DF13E01 		add	r1, sp, #62
 3034 0128 2846     		mov	r0, r5
 3035 012a FFF7FEFF 		bl	perform_ref_signal_measurement
 3036              	.LVL372:
 787:Core/Src/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 3037              		.loc 1 787 3 is_stmt 1 view .LVU985
 787:Core/Src/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 84


 3038              		.loc 1 787 6 is_stmt 0 view .LVU986
 3039 012e 0446     		mov	r4, r0
 3040 0130 0028     		cmp	r0, #0
 3041 0132 45D1     		bne	.L228
 788:Core/Src/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
 3042              		.loc 1 788 23 discriminator 1 view .LVU987
 3043 0134 BDF83E30 		ldrh	r3, [sp, #62]
 787:Core/Src/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 3044              		.loc 1 787 38 discriminator 1 view .LVU988
 3045 0138 5345     		cmp	r3, r10
 3046 013a 0CD8     		bhi	.L229
 699:Core/Src/vl53l0x_api_calibration.c **** 
 3047              		.loc 1 699 11 view .LVU989
 3048 013c 0023     		movs	r3, #0
 3049 013e 0B93     		str	r3, [sp, #44]
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 3050              		.loc 1 698 11 view .LVU990
 3051 0140 9846     		mov	r8, r3
 832:Core/Src/vl53l0x_api_calibration.c **** 		}
 3052              		.loc 1 832 17 view .LVU991
 3053 0142 0893     		str	r3, [sp, #32]
 3054 0144 8EE7     		b	.L214
 3055              	.LVL373:
 3056              	.L216:
 793:Core/Src/vl53l0x_api_calibration.c **** 
 3057              		.loc 1 793 5 is_stmt 1 discriminator 3 view .LVU992
 793:Core/Src/vl53l0x_api_calibration.c **** 
 3058              		.loc 1 793 46 is_stmt 0 discriminator 3 view .LVU993
 3059 0146 EA18     		adds	r2, r5, r3
 3060 0148 0021     		movs	r1, #0
 3061 014a 82F82411 		strb	r1, [r2, #292]
 792:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 3062              		.loc 1 792 43 is_stmt 1 discriminator 3 view .LVU994
 792:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 3063              		.loc 1 792 48 is_stmt 0 discriminator 3 view .LVU995
 3064 014e 0133     		adds	r3, r3, #1
 3065              	.LVL374:
 3066              	.L215:
 792:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 3067              		.loc 1 792 20 is_stmt 1 discriminator 1 view .LVU996
 792:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 3068              		.loc 1 792 4 is_stmt 0 discriminator 1 view .LVU997
 3069 0150 052B     		cmp	r3, #5
 3070 0152 F8D9     		bls	.L216
 3071 0154 02E0     		b	.L217
 3072              	.LVL375:
 3073              	.L229:
 792:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 3074              		.loc 1 792 15 view .LVU998
 3075 0156 0023     		movs	r3, #0
 3076 0158 FAE7     		b	.L215
 3077              	.LVL376:
 3078              	.L219:
 799:Core/Src/vl53l0x_api_calibration.c **** 			}
 3079              		.loc 1 799 5 is_stmt 1 view .LVU999
 799:Core/Src/vl53l0x_api_calibration.c **** 			}
 3080              		.loc 1 799 21 is_stmt 0 view .LVU1000
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 85


 3081 015a 0137     		adds	r7, r7, #1
 3082              	.LVL377:
 3083              	.L217:
 797:Core/Src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 3084              		.loc 1 797 10 is_stmt 1 view .LVU1001
 797:Core/Src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 3085              		.loc 1 797 12 is_stmt 0 view .LVU1002
 3086 015c 07F1B400 		add	r0, r7, #180
 3087 0160 FFF7FEFF 		bl	is_aperture
 3088              	.LVL378:
 797:Core/Src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 3089              		.loc 1 797 10 view .LVU1003
 3090 0164 08B9     		cbnz	r0, .L218
 798:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 3091              		.loc 1 798 11 view .LVU1004
 3092 0166 2B2F     		cmp	r7, #43
 3093 0168 F7D9     		bls	.L219
 3094              	.L218:
 802:Core/Src/vl53l0x_api_calibration.c **** 
 3095              		.loc 1 802 4 is_stmt 1 view .LVU1005
 3096              	.LVL379:
 804:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads,
 3097              		.loc 1 804 4 view .LVU1006
 804:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads,
 3098              		.loc 1 804 13 is_stmt 0 view .LVU1007
 3099 016a 11AB     		add	r3, sp, #68
 3100 016c 0493     		str	r3, [sp, #16]
 3101 016e 0323     		movs	r3, #3
 3102 0170 0393     		str	r3, [sp, #12]
 3103 0172 0297     		str	r7, [sp, #8]
 3104 0174 B423     		movs	r3, #180
 3105 0176 0193     		str	r3, [sp, #4]
 3106 0178 0623     		movs	r3, #6
 3107 017a 0093     		str	r3, [sp]
 3108 017c 05F59273 		add	r3, r5, #292
 3109 0180 05F59572 		add	r2, r5, #298
 3110 0184 0121     		movs	r1, #1
 3111 0186 2846     		mov	r0, r5
 3112 0188 FFF7FEFF 		bl	enable_ref_spads
 3113              	.LVL380:
 814:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 3114              		.loc 1 814 4 is_stmt 1 view .LVU1008
 814:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 3115              		.loc 1 814 7 is_stmt 0 view .LVU1009
 3116 018c 0446     		mov	r4, r0
 3117 018e 28B1     		cbz	r0, .L248
 699:Core/Src/vl53l0x_api_calibration.c **** 
 3118              		.loc 1 699 11 view .LVU1010
 3119 0190 0023     		movs	r3, #0
 3120 0192 0B93     		str	r3, [sp, #44]
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 3121              		.loc 1 698 11 view .LVU1011
 3122 0194 9846     		mov	r8, r3
 802:Core/Src/vl53l0x_api_calibration.c **** 
 3123              		.loc 1 802 17 view .LVU1012
 3124 0196 0123     		movs	r3, #1
 3125 0198 0893     		str	r3, [sp, #32]
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 86


 3126 019a 63E7     		b	.L214
 3127              	.L248:
 815:Core/Src/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 3128              		.loc 1 815 5 is_stmt 1 view .LVU1013
 815:Core/Src/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 3129              		.loc 1 815 22 is_stmt 0 view .LVU1014
 3130 019c 119F     		ldr	r7, [sp, #68]
 3131              	.LVL381:
 816:Core/Src/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 3132              		.loc 1 816 5 is_stmt 1 view .LVU1015
 816:Core/Src/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 3133              		.loc 1 816 14 is_stmt 0 view .LVU1016
 3134 019e 0DF13E01 		add	r1, sp, #62
 3135 01a2 2846     		mov	r0, r5
 3136              	.LVL382:
 816:Core/Src/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 3137              		.loc 1 816 14 view .LVU1017
 3138 01a4 FFF7FEFF 		bl	perform_ref_signal_measurement
 3139              	.LVL383:
 819:Core/Src/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 3140              		.loc 1 819 5 is_stmt 1 view .LVU1018
 819:Core/Src/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 3141              		.loc 1 819 8 is_stmt 0 view .LVU1019
 3142 01a8 0446     		mov	r4, r0
 3143 01aa 70B9     		cbnz	r0, .L231
 820:Core/Src/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 3144              		.loc 1 820 25 discriminator 1 view .LVU1020
 3145 01ac BDF83E30 		ldrh	r3, [sp, #62]
 819:Core/Src/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 3146              		.loc 1 819 40 discriminator 1 view .LVU1021
 3147 01b0 5345     		cmp	r3, r10
 3148 01b2 10D8     		bhi	.L232
 699:Core/Src/vl53l0x_api_calibration.c **** 
 3149              		.loc 1 699 11 view .LVU1022
 3150 01b4 0023     		movs	r3, #0
 3151 01b6 0B93     		str	r3, [sp, #44]
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 3152              		.loc 1 698 11 view .LVU1023
 3153 01b8 9846     		mov	r8, r3
 802:Core/Src/vl53l0x_api_calibration.c **** 
 3154              		.loc 1 802 17 view .LVU1024
 3155 01ba 0123     		movs	r3, #1
 3156 01bc 0893     		str	r3, [sp, #32]
 3157 01be 51E7     		b	.L214
 3158              	.LVL384:
 3159              	.L228:
 699:Core/Src/vl53l0x_api_calibration.c **** 
 3160              		.loc 1 699 11 view .LVU1025
 3161 01c0 0023     		movs	r3, #0
 3162 01c2 0B93     		str	r3, [sp, #44]
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 3163              		.loc 1 698 11 view .LVU1026
 3164 01c4 9846     		mov	r8, r3
 832:Core/Src/vl53l0x_api_calibration.c **** 		}
 3165              		.loc 1 832 17 view .LVU1027
 3166 01c6 0893     		str	r3, [sp, #32]
 3167 01c8 4CE7     		b	.L214
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 87


 3168              	.LVL385:
 3169              	.L231:
 699:Core/Src/vl53l0x_api_calibration.c **** 
 3170              		.loc 1 699 11 view .LVU1028
 3171 01ca 0023     		movs	r3, #0
 3172 01cc 0B93     		str	r3, [sp, #44]
 698:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 3173              		.loc 1 698 11 view .LVU1029
 3174 01ce 9846     		mov	r8, r3
 802:Core/Src/vl53l0x_api_calibration.c **** 
 3175              		.loc 1 802 17 view .LVU1030
 3176 01d0 0123     		movs	r3, #1
 3177 01d2 0893     		str	r3, [sp, #32]
 3178 01d4 46E7     		b	.L214
 3179              	.L232:
 827:Core/Src/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 3180              		.loc 1 827 26 view .LVU1031
 3181 01d6 0123     		movs	r3, #1
 3182 01d8 0B93     		str	r3, [sp, #44]
 828:Core/Src/vl53l0x_api_calibration.c **** 				}
 3183              		.loc 1 828 23 view .LVU1032
 3184 01da 4FF00308 		mov	r8, #3
 802:Core/Src/vl53l0x_api_calibration.c **** 
 3185              		.loc 1 802 17 view .LVU1033
 3186 01de 0893     		str	r3, [sp, #32]
 3187 01e0 40E7     		b	.L214
 3188              	.LVL386:
 3189              	.L249:
 883:Core/Src/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 3190              		.loc 1 883 5 is_stmt 1 view .LVU1034
 883:Core/Src/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 3191              		.loc 1 883 21 is_stmt 0 view .LVU1035
 3192 01e2 771C     		adds	r7, r6, #1
 3193              	.LVL387:
 886:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 3194              		.loc 1 886 5 is_stmt 1 view .LVU1036
 886:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 3195              		.loc 1 886 14 is_stmt 0 view .LVU1037
 3196 01e4 4946     		mov	r1, r9
 3197 01e6 2846     		mov	r0, r5
 3198              	.LVL388:
 886:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 3199              		.loc 1 886 14 view .LVU1038
 3200 01e8 FFF7FEFF 		bl	set_ref_spad_map
 3201              	.LVL389:
 3202 01ec 0446     		mov	r4, r0
 3203              	.LVL390:
 886:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 3204              		.loc 1 886 14 view .LVU1039
 3205 01ee 3DE0     		b	.L222
 3206              	.LVL391:
 3207              	.L250:
 909:Core/Src/vl53l0x_api_calibration.c **** 							lastSpadArray);
 3208              		.loc 1 909 6 is_stmt 1 view .LVU1040
 909:Core/Src/vl53l0x_api_calibration.c **** 							lastSpadArray);
 3209              		.loc 1 909 15 is_stmt 0 view .LVU1041
 3210 01f0 12A9     		add	r1, sp, #72
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 88


 3211 01f2 2846     		mov	r0, r5
 3212              	.LVL392:
 909:Core/Src/vl53l0x_api_calibration.c **** 							lastSpadArray);
 3213              		.loc 1 909 15 view .LVU1042
 3214 01f4 FFF7FEFF 		bl	set_ref_spad_map
 3215              	.LVL393:
 909:Core/Src/vl53l0x_api_calibration.c **** 							lastSpadArray);
 3216              		.loc 1 909 15 view .LVU1043
 3217 01f8 0446     		mov	r4, r0
 3218              	.LVL394:
 911:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 3219              		.loc 1 911 6 is_stmt 1 view .LVU1044
 3220 01fa 1298     		ldr	r0, [sp, #72]
 3221 01fc C5F82401 		str	r0, [r5, #292]	@ unaligned
 3222 0200 BDF84C30 		ldrh	r3, [sp, #76]	@ unaligned
 3223 0204 A5F82831 		strh	r3, [r5, #296]	@ unaligned
 915:Core/Src/vl53l0x_api_calibration.c **** 				}
 3224              		.loc 1 915 6 view .LVU1045
 3225              	.LVL395:
 915:Core/Src/vl53l0x_api_calibration.c **** 				}
 3226              		.loc 1 915 24 is_stmt 0 view .LVU1046
 3227 0208 CDF81C80 		str	r8, [sp, #28]
 917:Core/Src/vl53l0x_api_calibration.c **** 			} else {
 3228              		.loc 1 917 14 view .LVU1047
 3229 020c 4FF0010B 		mov	fp, #1
 3230              	.LVL396:
 917:Core/Src/vl53l0x_api_calibration.c **** 			} else {
 3231              		.loc 1 917 14 view .LVU1048
 3232 0210 07E0     		b	.L224
 3233              	.LVL397:
 3234              	.L223:
 920:Core/Src/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 3235              		.loc 1 920 5 is_stmt 1 view .LVU1049
 921:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 3236              		.loc 1 921 5 view .LVU1050
 3237 0212 D5F82401 		ldr	r0, [r5, #292]	@ unaligned
 3238              	.LVL398:
 921:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 3239              		.loc 1 921 5 is_stmt 0 view .LVU1051
 3240 0216 1290     		str	r0, [sp, #72]
 3241 0218 B5F82821 		ldrh	r2, [r5, #296]	@ unaligned
 3242 021c ADF84C20 		strh	r2, [sp, #76]	@ unaligned
 920:Core/Src/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 3243              		.loc 1 920 24 view .LVU1052
 3244 0220 0A93     		str	r3, [sp, #40]
 3245              	.LVL399:
 3246              	.L224:
 917:Core/Src/vl53l0x_api_calibration.c **** 			} else {
 3247              		.loc 1 917 14 view .LVU1053
 3248 0222 DDF81C80 		ldr	r8, [sp, #28]
 3249              	.LVL400:
 3250              	.L221:
 852:Core/Src/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 3251              		.loc 1 852 9 is_stmt 1 view .LVU1054
 3252 0226 BBF1000F 		cmp	fp, #0
 3253 022a 38D1     		bne	.L220
 853:Core/Src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 89


 3254              		.loc 1 853 4 view .LVU1055
 3255 022c 10AB     		add	r3, sp, #64
 3256 022e 3A46     		mov	r2, r7
 3257 0230 0621     		movs	r1, #6
 3258 0232 05F59570 		add	r0, r5, #298
 3259 0236 FFF7FEFF 		bl	get_next_good_spad
 3260              	.LVL401:
 858:Core/Src/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 3261              		.loc 1 858 4 view .LVU1056
 858:Core/Src/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 3262              		.loc 1 858 21 is_stmt 0 view .LVU1057
 3263 023a 109E     		ldr	r6, [sp, #64]
 858:Core/Src/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 3264              		.loc 1 858 7 view .LVU1058
 3265 023c B6F1FF3F 		cmp	r6, #-1
 3266 0240 2BD0     		beq	.L233
 866:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads) {
 3267              		.loc 1 866 4 is_stmt 1 view .LVU1059
 866:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads) {
 3268              		.loc 1 866 8 is_stmt 0 view .LVU1060
 3269 0242 3746     		mov	r7, r6
 3270              	.LVL402:
 866:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads) {
 3271              		.loc 1 866 8 view .LVU1061
 3272 0244 06F1B400 		add	r0, r6, #180
 3273 0248 FFF7FEFF 		bl	is_aperture
 3274              	.LVL403:
 866:Core/Src/vl53l0x_api_calibration.c **** 					needAptSpads) {
 3275              		.loc 1 866 7 view .LVU1062
 3276 024c 089B     		ldr	r3, [sp, #32]
 3277 024e 9842     		cmp	r0, r3
 3278 0250 25D1     		bne	.L220
 875:Core/Src/vl53l0x_api_calibration.c **** 
 3279              		.loc 1 875 4 is_stmt 1 view .LVU1063
 875:Core/Src/vl53l0x_api_calibration.c **** 
 3280              		.loc 1 875 22 is_stmt 0 view .LVU1064
 3281 0252 08F10103 		add	r3, r8, #1
 3282 0256 0793     		str	r3, [sp, #28]
 3283              	.LVL404:
 877:Core/Src/vl53l0x_api_calibration.c **** 			Status = enable_spad_bit(
 3284              		.loc 1 877 4 is_stmt 1 view .LVU1065
 878:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 3285              		.loc 1 878 4 view .LVU1066
 879:Core/Src/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 3286              		.loc 1 879 24 is_stmt 0 view .LVU1067
 3287 0258 05F59279 		add	r9, r5, #292
 878:Core/Src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 3288              		.loc 1 878 13 view .LVU1068
 3289 025c 3246     		mov	r2, r6
 3290 025e 0621     		movs	r1, #6
 3291 0260 4846     		mov	r0, r9
 3292 0262 FFF7FEFF 		bl	enable_spad_bit
 3293              	.LVL405:
 882:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 3294              		.loc 1 882 4 is_stmt 1 view .LVU1069
 882:Core/Src/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 3295              		.loc 1 882 7 is_stmt 0 view .LVU1070
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 90


 3296 0266 0446     		mov	r4, r0
 3297 0268 0028     		cmp	r0, #0
 3298 026a BAD0     		beq	.L249
 3299              	.LVL406:
 3300              	.L222:
 890:Core/Src/vl53l0x_api_calibration.c **** 				break;
 3301              		.loc 1 890 4 is_stmt 1 view .LVU1071
 890:Core/Src/vl53l0x_api_calibration.c **** 				break;
 3302              		.loc 1 890 7 is_stmt 0 view .LVU1072
 3303 026c 5CBB     		cbnz	r4, .L234
 893:Core/Src/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 3304              		.loc 1 893 4 is_stmt 1 view .LVU1073
 893:Core/Src/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 3305              		.loc 1 893 13 is_stmt 0 view .LVU1074
 3306 026e 0DF13E01 		add	r1, sp, #62
 3307 0272 2846     		mov	r0, r5
 3308 0274 FFF7FEFF 		bl	perform_ref_signal_measurement
 3309              	.LVL407:
 896:Core/Src/vl53l0x_api_calibration.c **** 				break;
 3310              		.loc 1 896 4 is_stmt 1 view .LVU1075
 896:Core/Src/vl53l0x_api_calibration.c **** 				break;
 3311              		.loc 1 896 7 is_stmt 0 view .LVU1076
 3312 0278 0446     		mov	r4, r0
 3313 027a 38BB     		cbnz	r0, .L235
 899:Core/Src/vl53l0x_api_calibration.c **** 
 3314              		.loc 1 899 4 is_stmt 1 view .LVU1077
 899:Core/Src/vl53l0x_api_calibration.c **** 
 3315              		.loc 1 899 43 is_stmt 0 view .LVU1078
 3316 027c BDF83E20 		ldrh	r2, [sp, #62]
 3317 0280 099B     		ldr	r3, [sp, #36]
 3318 0282 D31A     		subs	r3, r2, r3
 899:Core/Src/vl53l0x_api_calibration.c **** 
 3319              		.loc 1 899 21 view .LVU1079
 3320 0284 002B     		cmp	r3, #0
 3321 0286 B8BF     		it	lt
 3322 0288 5B42     		rsblt	r3, r3, #0
 3323              	.LVL408:
 901:Core/Src/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 3324              		.loc 1 901 4 is_stmt 1 view .LVU1080
 901:Core/Src/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 3325              		.loc 1 901 7 is_stmt 0 view .LVU1081
 3326 028a 5245     		cmp	r2, r10
 3327 028c C1D9     		bls	.L223
 906:Core/Src/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 3328              		.loc 1 906 5 is_stmt 1 view .LVU1082
 906:Core/Src/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
 3329              		.loc 1 906 8 is_stmt 0 view .LVU1083
 3330 028e 0A9A     		ldr	r2, [sp, #40]
 3331 0290 9A42     		cmp	r2, r3
 3332 0292 ADD3     		bcc	.L250
 917:Core/Src/vl53l0x_api_calibration.c **** 			} else {
 3333              		.loc 1 917 14 view .LVU1084
 3334 0294 4FF0010B 		mov	fp, #1
 3335              	.LVL409:
 917:Core/Src/vl53l0x_api_calibration.c **** 			} else {
 3336              		.loc 1 917 14 view .LVU1085
 3337 0298 C3E7     		b	.L224
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 91


 3338              	.LVL410:
 3339              	.L233:
 859:Core/Src/vl53l0x_api_calibration.c **** 				break;
 3340              		.loc 1 859 12 view .LVU1086
 3341 029a 6FF03104 		mvn	r4, #49
 3342              	.LVL411:
 3343              	.L220:
 929:Core/Src/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 3344              		.loc 1 929 2 is_stmt 1 view .LVU1087
 929:Core/Src/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 3345              		.loc 1 929 5 is_stmt 0 view .LVU1088
 3346 029e 74B9     		cbnz	r4, .L226
 930:Core/Src/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 3347              		.loc 1 930 3 is_stmt 1 view .LVU1089
 930:Core/Src/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 3348              		.loc 1 930 17 is_stmt 0 view .LVU1090
 3349 02a0 0C9A     		ldr	r2, [sp, #48]
 3350 02a2 C2F80080 		str	r8, [r2]
 931:Core/Src/vl53l0x_api_calibration.c **** 
 3351              		.loc 1 931 3 is_stmt 1 view .LVU1091
 931:Core/Src/vl53l0x_api_calibration.c **** 
 3352              		.loc 1 931 20 is_stmt 0 view .LVU1092
 3353 02a6 0D99     		ldr	r1, [sp, #52]
 3354 02a8 0B98     		ldr	r0, [sp, #44]
 3355 02aa 0870     		strb	r0, [r1]
 933:Core/Src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 3356              		.loc 1 933 3 is_stmt 1 view .LVU1093
 3357 02ac 0123     		movs	r3, #1
 3358 02ae 85F81531 		strb	r3, [r5, #277]
 934:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 3359              		.loc 1 934 3 view .LVU1094
 3360 02b2 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3361 02b4 85F81331 		strb	r3, [r5, #275]
 936:Core/Src/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 3362              		.loc 1 936 3 view .LVU1095
 3363 02b8 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 3364 02ba 85F81431 		strb	r3, [r5, #276]
 3365              	.L226:
 940:Core/Src/vl53l0x_api_calibration.c **** }
 3366              		.loc 1 940 2 view .LVU1096
 941:Core/Src/vl53l0x_api_calibration.c **** 
 3367              		.loc 1 941 1 is_stmt 0 view .LVU1097
 3368 02be 2046     		mov	r0, r4
 3369 02c0 15B0     		add	sp, sp, #84
 3370              		.cfi_remember_state
 3371              		.cfi_def_cfa_offset 36
 3372              		@ sp needed
 3373 02c2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3374              	.LVL412:
 3375              	.L234:
 3376              		.cfi_restore_state
 875:Core/Src/vl53l0x_api_calibration.c **** 
 3377              		.loc 1 875 22 view .LVU1098
 3378 02c6 DDF81C80 		ldr	r8, [sp, #28]
 3379 02ca E8E7     		b	.L220
 3380              	.LVL413:
 3381              	.L235:
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 92


 875:Core/Src/vl53l0x_api_calibration.c **** 
 3382              		.loc 1 875 22 view .LVU1099
 3383 02cc DDF81C80 		ldr	r8, [sp, #28]
 3384 02d0 E5E7     		b	.L220
 3385              		.cfi_endproc
 3386              	.LFE146:
 3388              		.section	.text.VL53L0X_set_ref_calibration,"ax",%progbits
 3389              		.align	1
 3390              		.global	VL53L0X_set_ref_calibration
 3391              		.syntax unified
 3392              		.thumb
 3393              		.thumb_func
 3394              		.fpu fpv4-sp-d16
 3396              	VL53L0X_set_ref_calibration:
 3397              	.LVL414:
 3398              	.LFB154:
1247:Core/Src/vl53l0x_api_calibration.c **** 
1248:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_ref_calibration(VL53L0X_DEV Dev,
1249:Core/Src/vl53l0x_api_calibration.c **** 		uint8_t VhvSettings, uint8_t PhaseCal)
1250:Core/Src/vl53l0x_api_calibration.c **** {
 3399              		.loc 1 1250 1 is_stmt 1 view -0
 3400              		.cfi_startproc
 3401              		@ args = 0, pretend = 0, frame = 8
 3402              		@ frame_needed = 0, uses_anonymous_args = 0
 3403              		.loc 1 1250 1 is_stmt 0 view .LVU1101
 3404 0000 10B5     		push	{r4, lr}
 3405              		.cfi_def_cfa_offset 8
 3406              		.cfi_offset 4, -8
 3407              		.cfi_offset 14, -4
 3408 0002 86B0     		sub	sp, sp, #24
 3409              		.cfi_def_cfa_offset 32
 3410 0004 1346     		mov	r3, r2
1251:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 3411              		.loc 1 1251 2 is_stmt 1 view .LVU1102
 3412              	.LVL415:
1252:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t pVhvSettings;
 3413              		.loc 1 1252 2 view .LVU1103
1253:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t pPhaseCal;
 3414              		.loc 1 1253 2 view .LVU1104
1254:Core/Src/vl53l0x_api_calibration.c **** 
1255:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 0,
 3415              		.loc 1 1255 2 view .LVU1105
 3416              		.loc 1 1255 11 is_stmt 0 view .LVU1106
 3417 0006 0124     		movs	r4, #1
 3418 0008 0394     		str	r4, [sp, #12]
 3419 000a 0294     		str	r4, [sp, #8]
 3420 000c 0DF11602 		add	r2, sp, #22
 3421              	.LVL416:
 3422              		.loc 1 1255 11 view .LVU1107
 3423 0010 0192     		str	r2, [sp, #4]
 3424 0012 0DF11702 		add	r2, sp, #23
 3425 0016 0092     		str	r2, [sp]
 3426 0018 0A46     		mov	r2, r1
 3427 001a 0021     		movs	r1, #0
 3428              	.LVL417:
 3429              		.loc 1 1255 11 view .LVU1108
 3430 001c FFF7FEFF 		bl	VL53L0X_ref_calibration_io
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 93


 3431              	.LVL418:
1256:Core/Src/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1257:Core/Src/vl53l0x_api_calibration.c **** 		&pVhvSettings, &pPhaseCal,
1258:Core/Src/vl53l0x_api_calibration.c **** 		1, 1);
1259:Core/Src/vl53l0x_api_calibration.c **** 
1260:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 3432              		.loc 1 1260 2 is_stmt 1 view .LVU1109
1261:Core/Src/vl53l0x_api_calibration.c **** }
 3433              		.loc 1 1261 1 is_stmt 0 view .LVU1110
 3434 0020 06B0     		add	sp, sp, #24
 3435              		.cfi_def_cfa_offset 8
 3436              		@ sp needed
 3437 0022 10BD     		pop	{r4, pc}
 3438              		.cfi_endproc
 3439              	.LFE154:
 3441              		.section	.text.VL53L0X_get_ref_calibration,"ax",%progbits
 3442              		.align	1
 3443              		.global	VL53L0X_get_ref_calibration
 3444              		.syntax unified
 3445              		.thumb
 3446              		.thumb_func
 3447              		.fpu fpv4-sp-d16
 3449              	VL53L0X_get_ref_calibration:
 3450              	.LVL419:
 3451              	.LFB155:
1262:Core/Src/vl53l0x_api_calibration.c **** 
1263:Core/Src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_ref_calibration(VL53L0X_DEV Dev,
1264:Core/Src/vl53l0x_api_calibration.c **** 		uint8_t *pVhvSettings, uint8_t *pPhaseCal)
1265:Core/Src/vl53l0x_api_calibration.c **** {
 3452              		.loc 1 1265 1 is_stmt 1 view -0
 3453              		.cfi_startproc
 3454              		@ args = 0, pretend = 0, frame = 0
 3455              		@ frame_needed = 0, uses_anonymous_args = 0
 3456              		.loc 1 1265 1 is_stmt 0 view .LVU1112
 3457 0000 00B5     		push	{lr}
 3458              		.cfi_def_cfa_offset 4
 3459              		.cfi_offset 14, -4
 3460 0002 85B0     		sub	sp, sp, #20
 3461              		.cfi_def_cfa_offset 24
 3462 0004 0B46     		mov	r3, r1
1266:Core/Src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 3463              		.loc 1 1266 2 is_stmt 1 view .LVU1113
 3464              	.LVL420:
1267:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 3465              		.loc 1 1267 2 view .LVU1114
1268:Core/Src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 3466              		.loc 1 1268 2 view .LVU1115
1269:Core/Src/vl53l0x_api_calibration.c **** 
1270:Core/Src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 1,
 3467              		.loc 1 1270 2 view .LVU1116
 3468              		.loc 1 1270 11 is_stmt 0 view .LVU1117
 3469 0006 0121     		movs	r1, #1
 3470              	.LVL421:
 3471              		.loc 1 1270 11 view .LVU1118
 3472 0008 0391     		str	r1, [sp, #12]
 3473 000a 0291     		str	r1, [sp, #8]
 3474 000c 0192     		str	r2, [sp, #4]
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 94


 3475 000e 0093     		str	r3, [sp]
 3476 0010 0023     		movs	r3, #0
 3477              	.LVL422:
 3478              		.loc 1 1270 11 view .LVU1119
 3479 0012 1A46     		mov	r2, r3
 3480              	.LVL423:
 3481              		.loc 1 1270 11 view .LVU1120
 3482 0014 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 3483              	.LVL424:
1271:Core/Src/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1272:Core/Src/vl53l0x_api_calibration.c **** 		pVhvSettings, pPhaseCal,
1273:Core/Src/vl53l0x_api_calibration.c **** 		1, 1);
1274:Core/Src/vl53l0x_api_calibration.c **** 
1275:Core/Src/vl53l0x_api_calibration.c **** 	return Status;
 3484              		.loc 1 1275 2 is_stmt 1 view .LVU1121
1276:Core/Src/vl53l0x_api_calibration.c **** }
 3485              		.loc 1 1276 1 is_stmt 0 view .LVU1122
 3486 0018 05B0     		add	sp, sp, #20
 3487              		.cfi_def_cfa_offset 4
 3488              		@ sp needed
 3489 001a 5DF804FB 		ldr	pc, [sp], #4
 3490              		.cfi_endproc
 3491              	.LFE155:
 3493              		.global	refArrayQuadrants
 3494              		.section	.data.refArrayQuadrants,"aw"
 3495              		.align	2
 3496              		.set	.LANCHOR0,. + 0
 3499              	refArrayQuadrants:
 3500 0000 0A000000 		.word	10
 3501 0004 05000000 		.word	5
 3502 0008 00000000 		.word	0
 3503 000c 05000000 		.word	5
 3504              		.text
 3505              	.Letext0:
 3506              		.file 2 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\machine\
 3507              		.file 3 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_st
 3508              		.file 4 "Core/Inc/vl53l0x_types.h"
 3509              		.file 5 "Core/Inc/vl53l0x_device.h"
 3510              		.file 6 "Core/Inc/vl53l0x_def.h"
 3511              		.file 7 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\loc
 3512              		.file 8 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\_ty
 3513              		.file 9 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\lib\\gcc\\arm-none-eabi\\9.2.1\\
 3514              		.file 10 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\sys\\re
 3515              		.file 11 "Drivers/CMSIS/Include/core_cm4.h"
 3516              		.file 12 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 3517              		.file 13 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 3518              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 3519              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 3520              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 3521              		.file 17 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 3522              		.file 18 "Core/Inc/vl53l0x_platform.h"
 3523              		.file 19 "c:\\make\\test\\gcc-arm-none-eabi-9-2019-q4-major-win32\\arm-none-eabi\\include\\stdlib.
 3524              		.file 20 "Core/Inc/vl53l0x_api_core.h"
 3525              		.file 21 "Core/Inc/vl53l0x_api.h"
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 95


DEFINED SYMBOLS
                            *ABS*:00000000 vl53l0x_api_calibration.c
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:18     .text.VL53L0X_perform_xtalk_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:26     .text.VL53L0X_perform_xtalk_calibration:00000000 VL53L0X_perform_xtalk_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:328    .text.VL53L0X_perform_offset_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:335    .text.VL53L0X_perform_offset_calibration:00000000 VL53L0X_perform_offset_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:596    .text.VL53L0X_set_offset_calibration_data_micro_meter:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:603    .text.VL53L0X_set_offset_calibration_data_micro_meter:00000000 VL53L0X_set_offset_calibration_data_micro_meter
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:681    .text.VL53L0X_set_offset_calibration_data_micro_meter:00000040 $d
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:688    .text.VL53L0X_get_offset_calibration_data_micro_meter:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:695    .text.VL53L0X_get_offset_calibration_data_micro_meter:00000000 VL53L0X_get_offset_calibration_data_micro_meter
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:771    .text.VL53L0X_apply_offset_adjustment:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:778    .text.VL53L0X_apply_offset_adjustment:00000000 VL53L0X_apply_offset_adjustment
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:867    .text.get_next_good_spad:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:874    .text.get_next_good_spad:00000000 get_next_good_spad
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1001   .text.is_aperture:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1008   .text.is_aperture:00000000 is_aperture
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1044   .text.is_aperture:00000014 $d
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1049   .text.enable_spad_bit:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1056   .text.enable_spad_bit:00000000 enable_spad_bit
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1117   .text.count_enabled_spads:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1124   .text.count_enabled_spads:00000000 count_enabled_spads
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1306   .text.set_ref_spad_map:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1313   .text.set_ref_spad_map:00000000 set_ref_spad_map
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1341   .text.get_ref_spad_map:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1348   .text.get_ref_spad_map:00000000 get_ref_spad_map
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1376   .text.enable_ref_spads:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1383   .text.enable_ref_spads:00000000 enable_ref_spads
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1563   .text.perform_ref_signal_measurement:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1570   .text.perform_ref_signal_measurement:00000000 perform_ref_signal_measurement
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1710   .text.VL53L0X_set_reference_spads:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1717   .text.VL53L0X_set_reference_spads:00000000 VL53L0X_set_reference_spads
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1916   .text.VL53L0X_get_reference_spads:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:1923   .text.VL53L0X_get_reference_spads:00000000 VL53L0X_get_reference_spads
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2034   .text.VL53L0X_perform_single_ref_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2041   .text.VL53L0X_perform_single_ref_calibration:00000000 VL53L0X_perform_single_ref_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2117   .text.VL53L0X_ref_calibration_io:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2124   .text.VL53L0X_ref_calibration_io:00000000 VL53L0X_ref_calibration_io
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2342   .text.VL53L0X_perform_vhv_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2349   .text.VL53L0X_perform_vhv_calibration:00000000 VL53L0X_perform_vhv_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2496   .text.VL53L0X_perform_phase_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2503   .text.VL53L0X_perform_phase_calibration:00000000 VL53L0X_perform_phase_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2647   .text.VL53L0X_perform_ref_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2654   .text.VL53L0X_perform_ref_calibration:00000000 VL53L0X_perform_ref_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2741   .text.VL53L0X_perform_ref_spad_management:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:2748   .text.VL53L0X_perform_ref_spad_management:00000000 VL53L0X_perform_ref_spad_management
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:3389   .text.VL53L0X_set_ref_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:3396   .text.VL53L0X_set_ref_calibration:00000000 VL53L0X_set_ref_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:3442   .text.VL53L0X_get_ref_calibration:00000000 $t
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:3449   .text.VL53L0X_get_ref_calibration:00000000 VL53L0X_get_ref_calibration
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:3499   .data.refArrayQuadrants:00000000 refArrayQuadrants
C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s:3495   .data.refArrayQuadrants:00000000 $d

UNDEFINED SYMBOLS
VL53L0X_SetXTalkCompensationEnable
VL53L0X_SetLimitCheckEnable
VL53L0X_PerformSingleRangingMeasurement
ARM GAS  C:\Users\anmh1\AppData\Local\Temp\ccj24uLd.s 			page 96


VL53L0X_SetXTalkCompensationRateMegaCps
VL53L0X_SetOffsetCalibrationDataMicroMeter
VL53L0X_GetSequenceStepEnable
VL53L0X_SetSequenceStepEnable
VL53L0X_WrWord
VL53L0X_RdWord
VL53L0X_get_info_from_device
VL53L0X_GetOffsetCalibrationDataMicroMeter
VL53L0X_WriteMulti
VL53L0X_ReadMulti
VL53L0X_WrByte
VL53L0X_measurement_poll_for_completion
VL53L0X_ClearInterruptMask
VL53L0X_RdByte
VL53L0X_UpdateByte
